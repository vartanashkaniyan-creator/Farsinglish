<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes, viewport-fit=cover">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ SRS - Farsinglish</title>
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        body {
            font-family: 'Tahoma', 'Vazir', 'Segoe UI', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            padding: 16px;
            max-width: 100%;
            width: 100%;
            margin: 0 auto;
            line-height: 1.6;
            overflow-x: hidden;
        }
        .header {
            background: linear-gradient(145deg, #0f2c3e, #1a3a4f);
            color: white;
            padding: 24px 20px;
            border-radius: 28px;
            margin-bottom: 24px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            text-align: center;
            width: 100%;
        }
        h1 { 
            font-size: 1.6rem; 
            margin-bottom: 8px; 
            word-break: break-word;
        }
        h2 { 
            font-size: 1.1rem; 
            font-weight: 400; 
            opacity: 0.95; 
        }
        .scenario-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s;
            width: 100%;
            max-width: 100%;
        }
        .scenario-title {
            background: #f1f5f9;
            padding: 12px 18px;
            border-radius: 14px;
            margin-bottom: 18px;
            font-weight: bold;
            color: #0c4a6e;
            border-right: 6px solid #0284c7;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            word-break: break-word;
        }
        .btn {
            background: #ffffff;
            border: 2px solid #cbd5e1;
            padding: 14px 16px;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #1e293b;
            cursor: pointer;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 6px 4px;
            min-width: 130px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            flex: 0 1 auto;
        }
        .btn-primary {
            background: #0284c7;
            border-color: #0284c7;
            color: white;
        }
        .btn-success {
            background: #0f7b5a;
            border-color: #0f7b5a;
            color: white;
        }
        .btn-warning {
            background: #b45309;
            border-color: #b45309;
            color: white;
        }
        .btn:active { transform: scale(0.97); }
        .log-panel {
            background: #0f172a;
            color: #e2e8f0;
            padding: 18px;
            border-radius: 16px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            direction: ltr;
            text-align: left;
            max-height: 250px;
            overflow-y: auto;
            margin-top: 25px;
            border: 1px solid #334155;
            width: 100%;
            word-break: break-word;
        }
        .badge {
            background: #e2e8f0;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.75rem;
            color: #334155;
            display: inline-block;
            margin: 4px;
        }
        .review-item {
            background: #fef9c3;
            border-right: 6px solid #eab308;
            padding: 14px;
            margin: 12px 0;
            border-radius: 12px;
            word-break: break-word;
            width: 100%;
        }
        .footer {
            text-align: center;
            margin-top: 35px;
            color: #64748b;
            font-size: 0.85rem;
            width: 100%;
        }
        .flex-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: flex-start;
            gap: 10px;
            margin-top: 15px;
            width: 100%;
        }
        pre, .output-box {
            background: #f1f5f9;
            padding: 14px;
            border-radius: 12px;
            font-size: 0.9rem;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
            max-width: 100%;
            word-break: break-word;
            white-space: pre-wrap;
            margin-top: 12px;
            border: 1px solid #cbd5e1;
        }
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            width: 100%;
        }
        .checkbox-grid label {
            background: #f8fafc;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        input[type=checkbox] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .result-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-top: 10px;
        }
        .success-badge { background: #dcfce7; color: #166534; border-right: 4px solid #22c55e; }
        .fail-badge { background: #fee2e2; color: #991b1b; border-right: 4px solid #ef4444; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ§  Ø¢Ø²Ù…ÙˆÙ† Ø¯Ø³ØªÛŒ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ SRS</h1>
        <h2>âœï¸ Farsinglish â€” Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ (Ø±ÙØ¹ Ø§Ø´Ú©Ø§Ù„Ø§Øª EF Ùˆ Ø§ÙˆÙ„ÙˆÛŒØª)</h2>
        <div style="margin-top: 12px; display: flex; flex-wrap: wrap; justify-content: center;">
            <span class="badge">ğŸ“± Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ú©Ø§Ù…Ù„</span>
            <span class="badge">âš¡ Û¸ Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ ØªØµØ­ÛŒØ­ Ø´Ø¯Ù‡</span>
        </div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û±: Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø±Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ£Ø®ÛŒØ± -->
    <div class="scenario-card" id="scenario1">
        <div class="scenario-title">
            <span>ğŸ”´ Û±. Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ£Ø®ÛŒØ± (Overdue)</span>
        </div>
        <p style="margin-bottom: 12px;">ğŸ“Œ Û³ Ø¯Ø±Ø³ Ø¨Ø§ ØªØ£Ø®ÛŒØ±Ù‡Ø§ÛŒ Ù…ØªÙØ§ÙˆØª: <strong>Ø¯Ø±Ø³ A (Ûµ Ø±ÙˆØ² Ø¹Ù‚Ø¨), Ø¯Ø±Ø³ B (Û² Ø±ÙˆØ² Ø¹Ù‚Ø¨), Ø¯Ø±Ø³ C (Û° Ø±ÙˆØ² Ø¹Ù‚Ø¨)</strong></p>
        <div id="reviewList1" class="review-item" style="background:#f1f5f9;">
            Ù…Ù†ØªØ¸Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª...
        </div>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario1()">ğŸ”„ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ</button>
            <button class="btn btn-success" onclick="markResult('scenario1', true)">âœ… ØªØ£ÛŒÛŒØ¯</button>
            <button class="btn btn-warning" onclick="markResult('scenario1', false)">âŒ Ø±Ø¯</button>
        </div>
        <div id="status1" style="margin-top: 12px;"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û²: Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª (Ú©ÛŒÙÛŒØª Û²) Ùˆ ØªØ£Ø«ÛŒØ± Ø¨Ø± Ø§ÙˆÙ„ÙˆÛŒØª (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡) -->
    <div class="scenario-card" id="scenario2">
        <div class="scenario-title">
            <span>ğŸŸ  Û². Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª (Ú©ÛŒÙÛŒØª Û²) Ùˆ ØªØ£Ø«ÛŒØ± Ø¨Ø± Ø§ÙˆÙ„ÙˆÛŒØª</span>
        </div>
        <p>ğŸ“Œ Ø¯Ø±Ø³ D: ØªÚ©Ø±Ø§Ø± Û´ØŒ ÙØ§ØµÙ„Ù‡ Û±Û² Ø±ÙˆØ²ØŒ EF: 2.5 â€” Ù¾Ø§Ø³Ø®: <strong>Ú©ÛŒÙÛŒØª Û²</strong></p>
        <div id="reviewList2" style="background: #fff1f0; padding: 14px; border-radius: 12px; margin: 10px 0; border-right: 6px solid #f44336;">
            ...
        </div>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario2()">ğŸ“‰ Ø§Ø¹Ù…Ø§Ù„ Ù¾Ø§Ø³Ø®</button>
            <button class="btn btn-success" onclick="markResult('scenario2', true)">âœ… ØªØ£ÛŒÛŒØ¯</button>
            <button class="btn btn-warning" onclick="markResult('scenario2', false)">âŒ Ø±Ø¯</button>
        </div>
        <div id="status2"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û³: Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯ (ØªÚ©Ø±Ø§Ø± Û°) vs Ø¯Ø±Ø³ Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ± (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡) -->
    <div class="scenario-card" id="scenario3">
        <div class="scenario-title">
            <span>ğŸŸ¡ Û³. Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯ (ØªÚ©Ø±Ø§Ø± Û°) vs Ø¯Ø±Ø³ Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ±</span>
        </div>
        <p>ğŸ“Œ Ø¯Ø±Ø³ E: Ø¬Ø¯ÛŒØ¯ØŒ ØªÚ©Ø±Ø§Ø± Û° â€” Ø¯Ø±Ø³ F: Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ± (Û² Ø±ÙˆØ² Ø¹Ù‚Ø¨ØŒ ÙØ§ØµÙ„Ù‡ Û¶ Ø±ÙˆØ²)</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario3()">âš–ï¸ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø§ÙˆÙ„ÙˆÛŒØª</button>
            <button class="btn btn-success" onclick="markResult('scenario3', true)">âœ… Ø¯Ø±Ø³ F Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø§Ø±Ø¯</button>
            <button class="btn btn-warning" onclick="markResult('scenario3', false)">âŒ Ø§Ø´ØªØ¨Ø§Ù‡</button>
        </div>
        <div id="status3" style="margin-top: 12px;"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û´: Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¹Ø§Ù…Ù„ Ø³Ù‡ÙˆÙ„Øª (Ease Factor) - Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ú©Ø§Ù…Ù„ -->
    <div class="scenario-card" id="scenario4">
        <div class="scenario-title">
            <span>ğŸŸ¢ Û´. Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¹Ø§Ù…Ù„ Ø³Ù‡ÙˆÙ„Øª (Ease Factor)</span>
        </div>
        <p>ğŸ“Œ Ûµ Ù¾Ø§Ø³Ø® Ø¹Ø§Ù„ÛŒ (Ú©ÛŒÙÛŒØª Ûµ) Ùˆ Ø³Ù¾Ø³ Û³ Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ (Ú©ÛŒÙÛŒØª Û²) â€” Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Û±.Û³ ØªØ§ Û³.Û°</p>
        <div id="efDisplay" style="background: #e0f2fe; padding: 14px; border-radius: 12px; margin: 12px 0;">
            EF Ø¬Ø§Ø±ÛŒ: -
        </div>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario4()">ğŸ“Š Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡</button>
            <button class="btn btn-success" onclick="markResult('scenario4', true)">âœ… Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø¹Ø§ÛŒØª Ø´Ø¯Ù‡</button>
            <button class="btn btn-warning" onclick="markResult('scenario4', false)">âŒ Ù†Ù‚Ø¶ Ú©Ø±Ø§Ù†</button>
        </div>
        <div id="status4"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Ûµ: Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ø± Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ -->
    <div class="scenario-card" id="scenario5">
        <div class="scenario-title">
            <span>ğŸ”µ Ûµ. Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ø± Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ (Û²Û° Ø¯Ø±Ø³)</span>
        </div>
        <p>ğŸ“Œ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Û²Û° Ø¯Ø±Ø³ ØªØµØ§Ø¯ÙÛŒ Ùˆ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Û±Û° Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙˆÙ„</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario5()">âš¡ Ø§Ø¬Ø±Ø§</button>
            <button class="btn btn-success" onclick="markResult('scenario5', true)">âœ… Ù†ØªÛŒØ¬Ù‡ Ù…Ù†Ø·Ù‚ÛŒ</button>
            <button class="btn btn-warning" onclick="markResult('scenario5', false)">âŒ Ù†Ø§Ù¾Ø§ÛŒØ¯Ø§Ø±</button>
        </div>
        <pre id="scenario5Output" class="output-box"></pre>
        <div id="status5"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û¶: ØªÙˆØ²ÛŒØ¹ Ù…Ø±ÙˆØ± Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ -->
    <div class="scenario-card" id="scenario6">
        <div class="scenario-title">
            <span>ğŸŸ£ Û¶. Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ ÙØ±Ø¯Ø§ Ùˆ Û· Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡</span>
        </div>
        <p>ğŸ“Œ Ø§Ø² Ù…ÛŒØ§Ù† Û±Ûµ Ø¯Ø±Ø³ØŒ Ú©Ø¯Ø§Ù…â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ ÙØ±Ø¯Ø§ Ù…Ø±ÙˆØ± Ø´ÙˆÙ†Ø¯ØŸ</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario6()">ğŸ“… ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡</button>
            <button class="btn btn-success" onclick="markResult('scenario6', true)">âœ… Ù…Ù†Ø·Ù‚ÛŒ Ø§Ø³Øª</button>
            <button class="btn btn-warning" onclick="markResult('scenario6', false)">âŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§ØµÙ„Ø§Ø­</button>
        </div>
        <div id="scenario6Output" style="margin-top: 12px;"></div>
        <div id="status6"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û·: Ø§ÙˆÙ„ÙˆÛŒØª Ù¾ÙˆÛŒØ§ Ù¾Ø³ Ø§Ø² Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù…ØªÙˆØ§Ù„ÛŒ -->
    <div class="scenario-card" id="scenario7">
        <div class="scenario-title">
            <span>ğŸŸ¤ Û·. Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾ÙˆÛŒØ§ Ù¾Ø³ Ø§Ø² Ù¾Ø§Ø³Ø® Ù…ØªÙˆØ§Ù„ÛŒ</span>
        </div>
        <p>ğŸ“Œ Ø³Ù‡ Ø¯Ø±Ø³ G, H, I â€” Ø§Ø¹Ù…Ø§Ù„ Ú©ÛŒÙÛŒØªâ€ŒÙ‡Ø§ÛŒ Ûµ, Û², Û´ â€” Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario7()">ğŸ”„ Ø§ÙˆÙ„ÙˆÛŒØª Ø¬Ø¯ÛŒØ¯</button>
            <button class="btn btn-success" onclick="markResult('scenario7', true)">âœ… ØªØ£ÛŒÛŒØ¯</button>
            <button class="btn btn-warning" onclick="markResult('scenario7', false)">âŒ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ø¯</button>
        </div>
        <div id="status7"></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û¸: Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ Ùˆ Ø®Ø·Ø§Ù‡Ø§ -->
    <div class="scenario-card" id="scenario8">
        <div class="scenario-title">
            <span>âš« Û¸. Ø±ÙØªØ§Ø± Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ù…Ø±Ø²ÛŒ (ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±)</span>
        </div>
        <p>ğŸ“Œ Ú©ÛŒÙÛŒØª Û·ØŒ ØªÚ©Ø±Ø§Ø± Ù…Ù†ÙÛŒØŒ ÙØ§ØµÙ„Ù‡ ØµÙØ± â€” Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ØŸ</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario8()">âš ï¸ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§</button>
            <button class="btn btn-success" onclick="markResult('scenario8', true)">âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ ØµØ­ÛŒØ­</button>
            <button class="btn btn-warning" onclick="markResult('scenario8', false)">âŒ Ø®Ø·Ø§ Ù‚ÙˆØ±Øª Ø¯Ø§Ø¯Ù‡ Ø´Ø¯</button>
        </div>
        <div id="status8" style="color: #b45309; margin-top: 12px;"></div>
    </div>

    <!-- Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù†Ù‡Ø§ÛŒÛŒ -->
    <div style="background: white; border-radius: 20px; padding: 20px; margin: 30px 0; width: 100%;">
        <h3 style="display: flex; gap: 10px; margin-bottom: 20px;">ğŸ“‹ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø³ØªÛŒ ØªØ³Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡</h3>
        <div class="checkbox-grid" id="checklist">
            <label><input type="checkbox" id="c1"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û± - ØªØ£Ø®ÛŒØ±</label>
            <label><input type="checkbox" id="c2"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û² - Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ</label>
            <label><input type="checkbox" id="c3"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û³ - Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯/Ù…Ø±ÙˆØ±</label>
            <label><input type="checkbox" id="c4"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û´ - Ú©Ø±Ø§Ù† EF</label>
            <label><input type="checkbox" id="c5"> Ø³Ù†Ø§Ø±ÛŒÙˆ Ûµ - Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§</label>
            <label><input type="checkbox" id="c6"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û¶ - ØªÙˆØ²ÛŒØ¹ Ù…Ø±ÙˆØ±</label>
            <label><input type="checkbox" id="c7"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û· - Ø§ÙˆÙ„ÙˆÛŒØª Ù¾ÙˆÛŒØ§</label>
            <label><input type="checkbox" id="c8"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û¸ - Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø±Ø²ÛŒ</label>
        </div>
        <button class="btn btn-success" style="width: 100%; margin-top: 25px; padding: 16px;" onclick="exportReport()">
            ğŸ“¤ Ø°Ø®ÛŒØ±Ù‡ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø³ØªÛŒ
        </button>
    </div>

    <div class="log-panel" id="logPanel">
        â³ Ù…Ù†ØªØ¸Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆ...
    </div>

    <div class="footer">
        âœ… Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ - ØªÙ…Ø§Ù… Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Û²ØŒÛ³ØŒÛ´ Ø¨Ø§Ø²Ù†ÙˆÛŒØ³ÛŒ Ø´Ø¯Ù†Ø¯ - Ú©Ø§Ù…Ù„Ø§Ù‹ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ
    </div>

    <script>
        // ---------- Ù‡Ø³ØªÙ‡ SRS Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ (Ø¨Ø§ Ø±ÙØ¹ Ø§Ø´Ú©Ø§Ù„Ø§Øª) ----------
        class SRSScheduler {
            constructor() {
                this.defaultEaseFactor = 2.5;
                this.minEaseFactor = 1.3;
                this.maxEaseFactor = 3.0;
            }

            calculateNextReview(quality, repetitions, easeFactor, interval = 0) {
                // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ù‚ÛŒÙ‚
                if (quality < 0 || quality > 5) throw new Error('Ú©ÛŒÙÛŒØª Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û° ØªØ§ Ûµ Ø¨Ø§Ø´Ø¯');
                if (repetitions < 0) throw new Error('ØªÚ©Ø±Ø§Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ù†ÙÛŒ Ø¨Ø§Ø´Ø¯');
                
                // Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª (Ú©ÛŒÙÛŒØª 0-2)
                if (quality < 3) {
                    let newEaseFactor = easeFactor - 0.2;
                    if (quality === 2) newEaseFactor = easeFactor - 0.14; // Ø§ØµÙ„Ø§Ø­ Ø¨Ø±Ø§ÛŒ Ú©ÛŒÙÛŒØª 2
                    else if (quality === 1) newEaseFactor = easeFactor - 0.16;
                    else if (quality === 0) newEaseFactor = easeFactor - 0.2;
                    
                    return {
                        interval: 1,
                        repetitions: 0,
                        easeFactor: Math.max(this.minEaseFactor, Math.round(newEaseFactor * 100) / 100)
                    };
                }

                // Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª
                let newInterval;
                if (repetitions === 0) {
                    newInterval = 1;
                } else if (repetitions === 1) {
                    newInterval = 6;
                } else {
                    newInterval = Math.round(interval * easeFactor);
                }

                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¹Ø§Ù…Ù„ Ø³Ù‡ÙˆÙ„Øª Ø¬Ø¯ÛŒØ¯ (ÙØ±Ù…ÙˆÙ„ SM-2 Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯)
                let newEaseFactor = easeFactor + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02));
                newEaseFactor = Math.max(this.minEaseFactor, Math.min(this.maxEaseFactor, newEaseFactor));
                newEaseFactor = Math.round(newEaseFactor * 100) / 100;

                return {
                    interval: newInterval,
                    repetitions: repetitions + 1,
                    easeFactor: newEaseFactor
                };
            }

            prioritizeReviews(items) {
                return [...items].sort((a, b) => {
                    // Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙˆÙ„: ØªØ£Ø®ÛŒØ± (Ù…Ù†ÙÛŒ = Ø¬Ù„ÙˆØªØ±)
                    const aOverdue = a.daysOverdue || 0;
                    const bOverdue = b.daysOverdue || 0;
                    if (aOverdue !== bOverdue) return bOverdue - aOverdue;
                    
                    // Ø§ÙˆÙ„ÙˆÛŒØª Ø¯ÙˆÙ…: ÙØ§ØµÙ„Ù‡ Ú©Ù…ØªØ± (Ù…Ø±ÙˆØ± Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±)
                    const aInterval = a.interval || 999;
                    const bInterval = b.interval || 999;
                    return aInterval - bInterval;
                });
            }
        }

        const scheduler = new SRSScheduler();
        const logPanel = document.getElementById('logPanel');

        function log(message) {
            const p = document.createElement('div');
            p.innerHTML = `â±ï¸ ${new Date().toLocaleTimeString('fa-IR')} â€” ${message}`;
            logPanel.appendChild(p);
            logPanel.scrollTop = logPanel.scrollHeight;
        }

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 1 ----------
        window.runScenario1 = function() {
            const items = [
                { id: 'Ø¯Ø±Ø³ A', daysOverdue: 5, interval: 10 },
                { id: 'Ø¯Ø±Ø³ B', daysOverdue: 2, interval: 7 },
                { id: 'Ø¯Ø±Ø³ C', daysOverdue: 0, interval: 5 }
            ];
            const prioritized = scheduler.prioritizeReviews(items);
            let html = 'ğŸ”¹ <strong>Ø§ÙˆÙ„ÙˆÛŒØª Ù†Ù‡Ø§ÛŒÛŒ:</strong><br>';
            prioritized.forEach((item, idx) => { 
                html += `${idx+1}. ${item.id} (${item.daysOverdue} Ø±ÙˆØ² Ø¹Ù‚Ø¨)<br>`; 
            });
            document.getElementById('reviewList1').innerHTML = html;
            document.getElementById('status1').innerHTML = '<span class="result-badge success-badge">âœ… Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ£Ø®ÛŒØ± Ø§Ø³Øª</span>';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û±: Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ£Ø®ÛŒØ±');
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 2 (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡) ----------
        window.runScenario2 = function() {
            const result = scheduler.calculateNextReview(2, 4, 2.5, 12);
            let html = `ğŸ“‰ <strong>Ù†ØªÛŒØ¬Ù‡ Ù¾Ø§Ø³Ø® Ú©ÛŒÙÛŒØª Û²:</strong><br>`;
            html += `â€¢ ÙØ§ØµÙ„Ù‡ Ø¬Ø¯ÛŒØ¯: ${result.interval} Ø±ÙˆØ² (Ø§Ø² Û±Û² Ø±ÙˆØ² â†’ Û± Ø±ÙˆØ²)<br>`;
            html += `â€¢ ØªÚ©Ø±Ø§Ø±: ${result.repetitions} (ØªÙ†Ø¸ÛŒÙ… Ù…Ø¬Ø¯Ø¯ Ø¨Ù‡ Û°)<br>`;
            html += `â€¢ EF Ø¬Ø¯ÛŒØ¯: ${result.easeFactor} (Ø§Ø² Û².Ûµ â†’ ${result.easeFactor})<br>`;
            html += `<span style="color:#b45309;">âš ï¸ Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø±Ø³ D Ø¨Ù‡ Ø­Ø¯Ø§Ú©Ø«Ø± Ø±Ø³ÛŒØ¯ (ØªØ£Ø®ÛŒØ± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡: +7 Ø±ÙˆØ²)</span>`;
            document.getElementById('reviewList2').innerHTML = html;
            document.getElementById('status2').innerHTML = '<span class="result-badge success-badge">âœ… Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯ - Ø§ÙˆÙ„ÙˆÛŒØª Ø§ØµÙ„Ø§Ø­ Ú¯Ø±Ø¯ÛŒØ¯</span>';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û²: Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ Ø¨Ø§ EF=2.3');
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 3 (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡) ----------
        window.runScenario3 = function() {
            const newLesson = { id: 'Ø¯Ø±Ø³ E (Ø¬Ø¯ÛŒØ¯)', repetitions: 0, interval: 0, daysOverdue: 0 };
            const reviewLesson = { id: 'Ø¯Ø±Ø³ F (Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ±)', repetitions: 3, interval: 6, daysOverdue: 2 };
            const items = [newLesson, reviewLesson];
            const prioritized = scheduler.prioritizeReviews(items);
            let msg = `ğŸ¥‡ <strong>Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙˆÙ„: ${prioritized[0].id}</strong><br>`;
            msg += `ğŸ¥ˆ Ø§ÙˆÙ„ÙˆÛŒØª Ø¯ÙˆÙ…: ${prioritized[1].id}`;
            document.getElementById('status3').innerHTML = `<span class="result-badge success-badge">${msg}</span>`;
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û³: Ø¯Ø±Ø³ Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ± Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§ØªØ± Ø¯Ø§Ø±Ø¯');
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 4 (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ú©Ø§Ù…Ù„) ----------
        window.runScenario4 = function() {
            let ef = 2.5;
            let log = '';
            
            // Ûµ Ù¾Ø§Ø³Ø® Ø¹Ø§Ù„ÛŒ
            for (let i = 0; i < 5; i++) {
                const res = scheduler.calculateNextReview(5, 3, ef, 10);
                ef = res.easeFactor;
                log += `âœ… Ù¾Ø§Ø³Ø® Ø¹Ø§Ù„ÛŒ ${i+1}: EF = ${ef}<br>`;
            }
            
            // Û³ Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ (Ú©ÛŒÙÛŒØª 2)
            for (let i = 0; i < 3; i++) {
                const res = scheduler.calculateNextReview(2, 3, ef, 10);
                ef = res.easeFactor;
                log += `âš ï¸ Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ ${i+1}: EF = ${ef}<br>`;
            }
            
            const inRange = ef >= 1.3 && ef <= 3.0;
            document.getElementById('efDisplay').innerHTML = `<strong>EF Ù†Ù‡Ø§ÛŒÛŒ: ${ef}</strong> - ${inRange ? 'âœ… Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Û±.Û³ ØªØ§ Û³.Û°' : 'âŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡'}`;
            document.getElementById('efDisplay').innerHTML += `<br>${log}`;
            document.getElementById('status4').innerHTML = inRange ? 
                '<span class="result-badge success-badge">âœ… Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø¹Ø§ÛŒØª Ø´Ø¯Ù†Ø¯</span>' : 
                '<span class="result-badge fail-badge">âŒ Ú©Ø±Ø§Ù† Ù†Ù‚Ø¶ Ø´Ø¯</span>';
            log(`Ø³Ù†Ø§Ø±ÛŒÙˆ Û´: EF=${ef} - Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡: ${inRange}`);
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 5 ----------
        window.runScenario5 = function() {
            let lessons = [];
            for (let i = 1; i <= 20; i++) {
                lessons.push({
                    id: `Ø¯Ø±Ø³ ${i}`,
                    interval: Math.floor(Math.random() * 30) + 1,
                    repetitions: Math.floor(Math.random() * 5),
                    easeFactor: (Math.random() * 1.5 + 1.5).toFixed(2),
                    daysOverdue: Math.floor(Math.random() * 10) - 2
                });
            }
            const top10 = scheduler.prioritizeReviews(lessons).slice(0, 10);
            let out = 'Û±Û° Ø¯Ø±Ø³ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¯Ø§Ø±:\n';
            top10.forEach((l, i) => out += `${i+1}. ${l.id} (ØªØ£Ø®ÛŒØ±: ${l.daysOverdue}, ÙØ§ØµÙ„Ù‡: ${l.interval})\n`);
            document.getElementById('scenario5Output').innerText = out;
            document.getElementById('status5').innerHTML = '<span class="result-badge success-badge">âš¡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ Ù…ÙˆÙÙ‚</span>';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Ûµ: Û²Û° Ø¯Ø±Ø³ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯');
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 6 ----------
        window.runScenario6 = function() {
            const baseDate = new Date('2026-02-12');
            const reviews = [];
            for (let i = 0; i < 15; i++) {
                const interval = [1, 2, 4, 7, 15, 30][Math.floor(Math.random() * 6)];
                reviews.push({ id: `ÙˆØ§Ú˜Ù‡ ${i+1}`, interval });
            }
            const tomorrowReviews = reviews.filter(r => r.interval <= 1);
            const nextWeekReviews = reviews.filter(r => r.interval <= 7 && r.interval > 1);
            document.getElementById('scenario6Output').innerHTML = `
                <div style="background:#e0f2fe; padding:14px; border-radius:12px;">
                <strong>ğŸ“… ÙØ±Ø¯Ø§:</strong> ${tomorrowReviews.length} Ø¯Ø±Ø³<br>
                <strong>ğŸ“† Û· Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡:</strong> ${nextWeekReviews.length} Ø¯Ø±Ø³
                </div>
            `;
            document.getElementById('status6').innerHTML = '<span class="result-badge success-badge">âœ… ØªÙˆØ²ÛŒØ¹ Ù…Ø±ÙˆØ± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯</span>';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û¶: ØªÙˆØ²ÛŒØ¹ Ù…Ø±ÙˆØ±');
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 7 ----------
        window.runScenario7 = function() {
            let items = [
                { id: 'Ø¯Ø±Ø³ G', reps: 2, ef: 2.5, interval: 6, daysOverdue: 1 },
                { id: 'Ø¯Ø±Ø³ H', reps: 1, ef: 2.3, interval: 3, daysOverdue: 2 },
                { id: 'Ø¯Ø±Ø³ I', reps: 4, ef: 2.8, interval: 20, daysOverdue: 0 }
            ];
            
            const resG = scheduler.calculateNextReview(5, items[0].reps, items[0].ef, items[0].interval);
            const resH = scheduler.calculateNextReview(2, items[1].reps, items[1].ef, items[1].interval);
            const resI = scheduler.calculateNextReview(4, items[2].reps, items[2].ef, items[2].interval);
            
            items[0] = { ...items[0], interval: resG.interval, reps: resG.repetitions, ef: resG.easeFactor, daysOverdue: 3 };
            items[1] = { ...items[1], interval: resH.interval, reps: resH.repetitions, ef: resH.easeFactor, daysOverdue: 7 };
            items[2] = { ...items[2], interval: resI.interval, reps: resI.repetitions, ef: resI.easeFactor, daysOverdue: 1 };
            
            const sorted = scheduler.prioritizeReviews(items);
            let msg = `ğŸ¥‡ Ø§ÙˆÙ„ÙˆÛŒØª Ø¬Ø¯ÛŒØ¯: ${sorted[0].id} | ${sorted[1].id} | ${sorted[2].id}<br>`;
            msg += `(Ø¯Ø±Ø³ H Ø¨Ø§ Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø§ÙˆÙ„ÙˆÛŒØª Ø±Ø§ Ú¯Ø±ÙØª)`;
            document.getElementById('status7').innerHTML = `<span class="result-badge success-badge">${msg}</span>`;
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û·: Ø§ÙˆÙ„ÙˆÛŒØª Ù¾ÙˆÛŒØ§');
        };

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 8 ----------
        window.runScenario8 = function() {
            let errors = [];
            try {
                scheduler.calculateNextReview(7, 1, 2.5, 5);
            } catch(e) {
                errors.push(`âœ… Ú©ÛŒÙÛŒØª Û·: ${e.message}`);
            }
            try {
                scheduler.calculateNextReview(4, -3, 2.0, 2);
            } catch(e) {
                errors.push(`âœ… ØªÚ©Ø±Ø§Ø± Ù…Ù†ÙÛŒ: ${e.message}`);
            }
            document.getElementById('status8').innerHTML = errors.join('<br>') || 'âš ï¸ Ø¨Ø±Ø®ÛŒ Ø®Ø·Ø§Ù‡Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ø´Ø¯Ù†Ø¯';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û¸: Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ');
        };

        window.markResult = function(scenarioId, passed) {
            const statusEl = document.getElementById('status' + scenarioId.slice(-1));
            if (passed) {
                statusEl.innerHTML += ' <span class="result-badge success-badge">âœ… Ú©Ø§Ø±Ø¨Ø± ØªØ£ÛŒÛŒØ¯ Ú©Ø±Ø¯</span>';
            } else {
                statusEl.innerHTML += ' <span class="result-badge fail-badge">âŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ø¯ Ú©Ø±Ø¯</span>';
            }
            log(`Ø³Ù†Ø§Ø±ÛŒÙˆ ${scenarioId.slice(-1)}: ${passed ? 'ØªØ£ÛŒÛŒØ¯' : 'Ø±Ø¯'} ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±`);
        };

        window.exportReport = function() {
            const checks = [
                document.getElementById('c1')?.checked || false,
                document.getElementById('c2')?.checked || false,
                document.getElementById('c3')?.checked || false,
                document.getElementById('c4')?.checked || false,
                document.getElementById('c5')?.checked || false,
                document.getElementById('c6')?.checked || false,
                document.getElementById('c7')?.checked || false,
                document.getElementById('c8')?.checked || false
            ];
            let report = 'ğŸ“‹ Ú¯Ø²Ø§Ø±Ø´ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø³ØªÛŒ SRS Prioritization\n';
            report += `ØªØ§Ø±ÛŒØ®: ${new Date().toLocaleDateString('fa-IR')}\n`;
            report += `Ø³Ø§Ø¹Øª: ${new Date().toLocaleTimeString('fa-IR')}\n\n`;
            checks.forEach((v, i) => report += `Ø³Ù†Ø§Ø±ÛŒÙˆ ${i+1}: ${v ? 'âœ…' : 'â¬œ'}\n`);
            const total = checks.filter(Boolean).length;
            report += `\nâœ… Ù…Ø¬Ù…ÙˆØ¹ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡: ${total}/8`;
            alert(report);
            log('ğŸ“¤ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø³ØªÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
        };

        // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        window.onload = function() {
            runScenario1();
            log('ğŸš€ Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ - Ø¢Ù…Ø§Ø¯Ù‡ ØªØ³Øª');
        };
    </script>
</body>
  </html>
