<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª i18n</title>
    <style>
        body { font-family: Tahoma, sans-serif; max-width: 600px; margin: 0 auto; padding: 15px; background: #f5f5f5; }
        .box { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { background: #0066cc; color: white; border: none; padding: 12px 20px; border-radius: 8px; margin: 5px; width: 100%; font-size: 16px; }
        .lang { display: flex; gap: 10px; margin-bottom: 20px; }
        .lang button { background: #e9ecef; color: #000; width: auto; flex: 1; }
        .active { background: #0066cc !important; color: white !important; }
        .result { background: #e3f2fd; padding: 15px; border-radius: 8px; margin-top: 15px; font-size: 18px; }
    </style>
</head>
<body>
    <div class="box">
        <h1 style="text-align:center;">ğŸŒ Farsinglish</h1>
        <h3 style="text-align:center;">ØªØ³Øª Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡</h3>
        
        <div class="lang">
            <button id="faBtn" class="active" onclick="setLang('fa')">ÙØ§Ø±Ø³ÛŒ</button>
            <button id="enBtn" onclick="setLang('en')">English</button>
            <button id="esBtn" onclick="setLang('es')">EspaÃ±ol</button>
        </div>
        
        <div style="text-align:center; margin:20px 0;">
            <span style="background:#ffc107; padding:8px 25px; border-radius:30px;">
                Ø²Ø¨Ø§Ù† ÙØ¹Ù„ÛŒ: <strong id="currentLang">fa</strong>
            </span>
        </div>
    </div>
    
    <div class="box">
        <h2>ğŸ“˜ ØªØ±Ø¬Ù…Ù‡ Ú©Ù„Ù…Ø§Øª</h2>
        <div id="results" class="result">
            appName = ÙØ±Ø³ÛŒÙ†Ú¯Ù„ÛŒØ´<br>
            welcome = Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯<br>
            start = Ø´Ø±ÙˆØ¹ Ø¯Ø±Ø³
        </div>
        
        <button onclick="testTranslate()">ğŸ” Ù†Ù…Ø§ÛŒØ´ ØªØ±Ø¬Ù…Ù‡â€ŒÙ‡Ø§</button>
        <button onclick="testFallback()">ğŸ”„ ØªØ³Øª Fallback</button>
        <button onclick="testMissing()">â“ ØªØ³Øª Ú©Ù„ÛŒØ¯ ØºÙ„Ø·</button>
    </div>
    
    <div class="box">
        <h2>ğŸ“‹ Ú¯Ø²Ø§Ø±Ø´</h2>
        <div id="log" style="background:#000; color:#0f0; padding:15px; border-radius:8px; font-family:monospace; direction:ltr; text-align:left; height:150px; overflow-y:auto;">
        </div>
        <button onclick="clearLog()" style="background:#dc3545;">ğŸ§¹ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
    </div>

    <script>
        // Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø³Ø§Ø¯Ù‡
        const dict = {
            appName: { fa: 'ÙØ±Ø³ÛŒÙ†Ú¯Ù„ÛŒØ´', en: 'Farsinglish' },
            welcome: { fa: 'Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯', en: 'Welcome' },
            start: { fa: 'Ø´Ø±ÙˆØ¹ Ø¯Ø±Ø³', en: 'Start Lesson' },
            review: { fa: 'Ù…Ø±ÙˆØ±', en: 'Review' }
        };
        
        let currentLang = 'fa';
        let logs = [];
        
        function setLang(lang) {
            currentLang = lang;
            document.getElementById('currentLang').innerHTML = lang;
            
            document.getElementById('faBtn').classList.remove('active');
            document.getElementById('enBtn').classList.remove('active');
            document.getElementById('esBtn').classList.remove('active');
            
            if (lang === 'fa') document.getElementById('faBtn').classList.add('active');
            if (lang === 'en') document.getElementById('enBtn').classList.add('active');
            if (lang === 'es') document.getElementById('esBtn').classList.add('active');
            
            addLog('Ø²Ø¨Ø§Ù† ØªØºÛŒÛŒØ± Ú©Ø±Ø¯: ' + lang);
        }
        
        function translate(key) {
            if (!dict[key]) {
                addLog('Ø®Ø·Ø§: Ú©Ù„ÛŒØ¯ "' + key + '" ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
                return '??' + key + '??';
            }
            
            if (dict[key][currentLang]) {
                return dict[key][currentLang];
            }
            
            // Fallback Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
            if (dict[key]['en']) {
                addLog('Fallback: ' + currentLang + ' -> en Ø¨Ø±Ø§ÛŒ ' + key);
                return dict[key]['en'];
            }
            
            return '???';
        }
        
        function addLog(msg) {
            let time = new Date().toLocaleTimeString();
            logs.push('[' + time + '] ' + msg);
            let logDiv = document.getElementById('log');
            logDiv.innerHTML = logs.join('<br>');
        }
        
        function clearLog() {
            logs = [];
            document.getElementById('log').innerHTML = '';
            addLog('Ú¯Ø²Ø§Ø±Ø´ Ù¾Ø§Ú© Ø´Ø¯');
        }
        
        function testTranslate() {
            addLog('--- Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª ØªØ±Ø¬Ù…Ù‡ ---');
            let app = translate('appName');
            let wel = translate('welcome');
            let start = translate('start');
            
            let html = '';
            html += 'appName = ' + app + '<br>';
            html += 'welcome = ' + wel + '<br>';
            html += 'start = ' + start + '<br>';
            document.getElementById('results').innerHTML = html;
            
            addLog('appName: ' + app);
            addLog('welcome: ' + wel);
            addLog('start: ' + start);
        }
        
        function testFallback() {
            addLog('--- ØªØ³Øª Fallback (Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ) ---');
            let old = currentLang;
            setLang('es');
            let val = translate('start');
            document.getElementById('results').innerHTML = 'start Ø¨Ø§ es = ' + val + ' (Ø¨Ø§ÛŒØ¯: Start Lesson)';
            setLang(old);
        }
        
        function testMissing() {
            addLog('--- ØªØ³Øª Ú©Ù„ÛŒØ¯ ØºÙ„Ø· ---');
            let val = translate('xyz123');
            document.getElementById('results').innerHTML = 'xyz123 = ' + val;
        }
        
        // Ø´Ø±ÙˆØ¹
        window.onload = function() {
            setLang('fa');
            clearLog();
            testTranslate();
        };
    </script>
</body>
</html>
