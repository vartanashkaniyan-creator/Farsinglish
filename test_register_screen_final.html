<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ: ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… (register-screen.js) - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ Ø±ÙØ¹ Ø®Ø·Ø§ÛŒ ØªØ³Øª Û¹</title>
    <style>
        body {
            font-family: system-ui, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 16px;
            background: #f9fafc;
            color: #1e293b;
        }
        h1 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: #0f172a;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 8px;
        }
        .subtitle {
            font-size: 0.95rem;
            color: #475569;
            margin-bottom: 24px;
        }
        .test-panel {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.03);
            border: 1px solid #eef2f6;
            margin-bottom: 24px;
        }
        .test-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }
        button {
            background: #2dd4bf;
            border: none;
            border-radius: 40px;
            padding: 14px 20px;
            font-size: 1rem;
            font-weight: 600;
            color: #0f172a;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(45,212,191,0.2);
            transition: all 0.15s;
            width: 100%;
            border: 1px solid #5eead4;
        }
        button:hover {
            background: #2aa79b;
            transform: translateY(-1px);
        }
        button:active {
            transform: translateY(1px);
            box-shadow: none;
        }
        .btn-icon {
            background: white;
            border-radius: 30px;
            padding: 4px 12px;
            font-size: 0.8rem;
            font-weight: 500;
            color: #0f172a;
        }
        .console {
            background: #0f172a;
            color: #b9e6f0;
            border-radius: 16px;
            padding: 16px;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.85rem;
            direction: ltr;
            text-align: left;
            white-space: pre-wrap;
            word-break: break-word;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid #334155;
        }
        .badge {
            background: #f1f5f9;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-left: 8px;
            color: #334155;
        }
        .assertion-pass {
            color: #4ade80;
            font-weight: 500;
        }
        .assertion-fail {
            color: #f87171;
            font-weight: 500;
        }
        .log-entry {
            margin: 4px 0;
            border-bottom: 1px dotted #334155;
            padding-bottom: 4px;
        }
        hr {
            border: none;
            border-top: 2px dashed #cbd5e1;
            margin: 16px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ ØªØ³Øª Ø¯Ø³ØªÛŒ Â· ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… (register-screen.js) - Ø±ÙØ¹ Ø®Ø·Ø§ÛŒ ØªØ³Øª Û¹</h1>
    <div class="subtitle">
        <span class="badge">Ø±ÙØ¹ Ø®Ø·Ø§ÛŒ Ù‡Ø¯Ø§ÛŒØª</span>
        <span class="badge">Û±Û° ØªØ³Øª Ù…ÙˆÙÙ‚</span>
        <span class="badge">snake_case</span>
    </div>

    <!-- Ù¾Ù†Ù„ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§ØµÙˆÙ„ ØªØ³Øª -->
    <div class="test-panel" style="background: #eef2ff; border: 1px solid #a5b4fc;">
        <div style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: space-between;">
            <div><strong>âœ… Ù…Ø³ØªÙ‚Ù„ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±</strong> â€” ÙÙ‚Ø· HTML/JS</div>
            <div><strong>ğŸ” Ø±ÙØªØ§Ø±Ú¯Ø±Ø§</strong> â€” ÙˆØ±ÙˆØ¯ÛŒ/Ø±ÙˆÛŒØ¯Ø§Ø¯ â† Ø®Ø±ÙˆØ¬ÛŒ</div>
            <div><strong>ğŸ§ª ØªÚ©â€ŒØ§Ø¯Ø¹Ø§</strong> â€” Ù‡Ø± Ø¯Ú©Ù…Ù‡ ÛŒÚ© Ø³Ù†Ø§Ø±ÛŒÙˆ</div>
            <div><strong>ğŸ“± Ù…ÙˆØ¨Ø§ÛŒÙ„â€ŒÙØ±Ø³Øª</strong> â€” Ú©Ø§Ù…Ù„Ø§Ù‹ ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§</div>
        </div>
    </div>

    <!-- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ (Fake) -->
    <div class="test-panel">
        <h3 style="margin-top: 0;">ğŸ§° ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ ØªØ²Ø±ÛŒÙ‚â€ŒØ´Ø¯Ù‡ (Fake) - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</h3>
        <ul style="line-height: 1.8; padding-right: 20px;">
            <li><code>FakeAuthService</code> â€” Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¬Ø¯ÛŒØ¯ Ù‡Ù…ÛŒØ´Ù‡ Ù…ÙˆÙÙ‚ (Ø¨Ù‡ Ø¬Ø² Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ø®Ø·Ø§)</li>
            <li><code>FakeSessionManager</code> â€” Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø´Ø³Øª Ù…ÙˆÙ‚Øª</li>
            <li><code>FakeRouter</code> â€” Ù…ØªØ¯ navigate Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø¯Ø§ÛŒØª</li>
        </ul>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ³Øª (Û±Û° ØªØ³Øª) -->
    <div class="test-grid">
        <button id="test_valid_registration">
            <span>ğŸ“‹ Û±. Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹ØªØ¨Ø± (Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_duplicate_username">
            <span>ğŸ“‹ Û². Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ (Ø®Ø·Ø§) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_weak_password">
            <span>ğŸ“‹ Û³. Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¶Ø¹ÛŒÙ (Ú©Ù…ØªØ± Ø§Ø² Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_invalid_email">
            <span>ğŸ“‹ Û´. Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± (Ø¨Ø¯ÙˆÙ† @) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_empty_fields">
            <span>ğŸ“‹ Ûµ. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ (Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_password_mismatch">
            <span>ğŸ“‹ Û¶. Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø±Ù…Ø² Ùˆ ØªÚ©Ø±Ø§Ø± </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_server_error">
            <span>ğŸ“‹ Û·. Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÛµÛ°Û°) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_toggle_password">
            <span>ğŸ“‹ Û¸. Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø±Ù…Ø² </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_navigate_success">
            <span>ğŸ“‹ Û¹. Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ù¾Ø³ Ù…ÙˆÙÙ‚ÛŒØª </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="test_reset_form">
            <span>ğŸ“‹ Û±Û°. Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù… </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù†Ø³ÙˆÙ„ -->
    <div style="display: flex; gap: 10px; margin: 20px 0 10px;">
        <button id="clear_log" style="background: #f1f5f9; box-shadow: none; color: #334155; border: 1px solid #cbd5e1;">
            ğŸ§¹ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù†Ø³ÙˆÙ„
        </button>
        <span style="flex:1;"></span>
        <span id="test_counter" style="background:#e6f0ff; padding:6px 16px; border-radius:30px;">Û° ØªØ³Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯</span>
    </div>

    <!-- Ú©Ù†Ø³ÙˆÙ„ Ù…Ø¬Ø§Ø²ÛŒ -->
    <div class="console" id="log_console">
[Ú©Ù†Ø³ÙˆÙ„ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª] Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ø± ØªØ³Øª Ø¯Ú©Ù…Ù‡ Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.
    </div>

    <script>
        (function() {
            // -------------------- Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Fake ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ Ø±ÙØ¹ Ø®Ø·Ø§ÛŒ ØªØ³Øª Û¹ --------------------
            class FakeAuthService {
                constructor() {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                    this.users = [
                        { username: 'ali', email: 'ali@example.com', password: 'hashed_123' }
                    ];
                }

                async register({ username, email, password }) {
                    // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
                    
                    // 1. Ø¨Ø±Ø±Ø³ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ
                    if (!username || !email || !password) {
                        return { success: false, error: 'EMPTY_FIELDS' };
                    }
                    
                    // 2. Ø¨Ø±Ø±Ø³ÛŒ Ø±Ù…Ø² Ø¶Ø¹ÛŒÙ (Ú©Ù…ØªØ± Ø§Ø² Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±)
                    if (password.length < 6) {
                        return { success: false, error: 'WEAK_PASSWORD' };
                    }
                    
                    // 3. Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±
                    if (!email.includes('@')) {
                        return { success: false, error: 'INVALID_EMAIL' };
                    }
                    
                    // 4. Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±
                    if (username === 'server_error') {
                        throw new Error('ERR_SERVER_500');
                    }
                    
                    // 5. Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù†
                    const existing = this.users.find(u => u.username === username || u.email === email);
                    if (existing) {
                        return { success: false, error: 'DUPLICATE_USER' };
                    }
                    
                    // 6. Ù…ÙˆÙÙ‚ - Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                    this.users.push({ username, email, password: `hashed_${password}` });
                    return { success: true, userId: Date.now() };
                }

                // Ù…ØªØ¯ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
                getUserCount() {
                    return this.users.length;
                }
            }

            class FakeSessionManager {
                constructor() {
                    this.session = null;
                }
                setSession(userData) {
                    this.session = userData;
                }
                getSession() {
                    return this.session;
                }
                clearSession() {
                    this.session = null;
                }
            }

            class FakeRouter {
                constructor() {
                    this.lastNavigate = null;
                    this.navigationHistory = [];
                }
                navigate(path) {
                    this.lastNavigate = path;
                    this.navigationHistory.push(path);
                }
                getLastNavigate() {
                    return this.lastNavigate;
                }
                getHistory() {
                    return this.navigationHistory;
                }
                reset() {
                    this.lastNavigate = null;
                    this.navigationHistory = [];
                }
            }

            // -------------------- Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ --------------------
            const fakeAuth = new FakeAuthService();
            const fakeSession = new FakeSessionManager();
            const fakeRouter = new FakeRouter();

            // -------------------- Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú©Ù†Ø³ÙˆÙ„ Ùˆ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ --------------------
            const consoleDiv = document.getElementById('log_console');
            const testCounterSpan = document.getElementById('test_counter');
            let testRunCount = 0;

            // -------------------- ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ù„Ø§Ú¯ --------------------
            function logToConsole(message, type = 'info') {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                const timestamp = new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                let prefix = '';
                if (type === 'pass') prefix = 'âœ… ';
                else if (type === 'fail') prefix = 'âŒ ';
                else if (type === 'warn') prefix = 'âš ï¸ ';
                else if (type === 'step') prefix = 'ğŸ”¹ ';
                else prefix = 'ğŸ“Œ ';

                entry.innerHTML = `<span style="color:#94a3b8;">[${timestamp}]</span> ${prefix}${message}`;
                consoleDiv.appendChild(entry);
                consoleDiv.scrollTop = consoleDiv.scrollHeight;

                if (type === 'pass' || type === 'fail') {
                    testRunCount++;
                    testCounterSpan.innerText = `${testRunCount} ØªØ³Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯`;
                }
            }

            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù†Ø³ÙˆÙ„
            document.getElementById('clear_log').addEventListener('click', function() {
                consoleDiv.innerHTML = '[Ú©Ù†Ø³ÙˆÙ„ Ù¾Ø§Ú© Ø´Ø¯] Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø¨Ø¹Ø¯ÛŒ.';
                testRunCount = 0;
                testCounterSpan.innerText = 'Û° ØªØ³Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯';
                fakeRouter.reset();
                logToConsole('Ù„Ø§Ú¯ Ù¾Ø§Ú© Ø´Ø¯.', 'info');
            });

            // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù…
            function getFakeFormData(overrides = {}) {
                return {
                    username: overrides.username ?? 'testuser_' + Date.now(),
                    email: overrides.email ?? 'test@example.com',
                    password: overrides.password ?? 'StrongPass123',
                    confirmPassword: overrides.confirmPassword ?? 'StrongPass123',
                    ...overrides
                };
            }

            // -------------------- ØªØ¹Ø±ÛŒÙ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ ØªØ³Øª (Ø±ÙØ¹ Ø®Ø·Ø§ÛŒ ØªØ³Øª Û¹) --------------------
            
            // ØªØ³Øª Û±: Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹ØªØ¨Ø±
            document.getElementById('test_valid_registration').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û±] Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹ØªØ¨Ø±', 'step');
                const formData = getFakeFormData({ 
                    username: 'valid_' + Date.now(),
                    password: 'ValidPass123'
                });
                try {
                    const result = await fakeAuth.register(formData);
                    if (result.success === true) {
                        logToConsole('âœ… Ù†ØªÛŒØ¬Ù‡: Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯', 'pass');
                        logToConsole(`  userId: ${result.userId}`, 'info');
                    } else {
                        logToConsole(`âŒ Ù†ØªÛŒØ¬Ù‡: Ø´Ú©Ø³Øª - Ø®Ø·Ø§: ${result.error}`, 'fail');
                    }
                } catch (err) {
                    logToConsole(`âŒ Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${err.message}`, 'fail');
                }
            });

            // ØªØ³Øª Û²: Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ
            document.getElementById('test_duplicate_username').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û²] Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ (ali)', 'step');
                const formData = getFakeFormData({ 
                    username: 'ali', 
                    email: 'another@mail.com',
                    password: 'StrongPass123' 
                });
                const result = await fakeAuth.register(formData);
                if (result.success === false && result.error === 'DUPLICATE_USER') {
                    logToConsole('âœ… Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ (Ù…Ù†ØªØ¸Ø±Ù‡)', 'pass');
                } else {
                    logToConsole(`âŒ Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ DUPLICATE_USER Ù…ÛŒâ€ŒÚ¯Ø±ÙØª - Ø¯Ø±ÛŒØ§ÙØª: ${result.error}`, 'fail');
                }
            });

            // ØªØ³Øª Û³: Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¶Ø¹ÛŒÙ
            document.getElementById('test_weak_password').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û³] Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¶Ø¹ÛŒÙ', 'step');
                const formData = getFakeFormData({ 
                    password: '123', 
                    confirmPassword: '123',
                    username: 'weak_' + Date.now()
                });
                const result = await fakeAuth.register(formData);
                if (result.success === false && result.error === 'WEAK_PASSWORD') {
                    logToConsole('âœ… Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ WEAK_PASSWORD Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', 'pass');
                } else {
                    logToConsole(`âŒ Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ Ø¶Ø¹Ù Ø±Ù…Ø² Ù…ÛŒâ€ŒÚ¯Ø±ÙØª - Ø¯Ø±ÛŒØ§ÙØª: ${result.error || 'success'}`, 'fail');
                }
            });

            // ØªØ³Øª Û´: Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±
            document.getElementById('test_invalid_email').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û´] Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±', 'step');
                const formData = getFakeFormData({ 
                    email: 'testexample.com',
                    password: 'StrongPass123' 
                });
                const result = await fakeAuth.register(formData);
                if (result.success === false && result.error === 'INVALID_EMAIL') {
                    logToConsole('âœ… Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', 'pass');
                } else {
                    logToConsole(`âŒ Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ INVALID_EMAIL Ù…ÛŒâ€ŒÚ¯Ø±ÙØª - Ø¯Ø±ÛŒØ§ÙØª: ${result.error}`, 'fail');
                }
            });

            // ØªØ³Øª Ûµ: ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ
            document.getElementById('test_empty_fields').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Ûµ] ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ', 'step');
                const formData = { username: '', email: '', password: '', confirmPassword: '' };
                try {
                    const result = await fakeAuth.register(formData);
                    if (result.success === false && result.error === 'EMPTY_FIELDS') {
                        logToConsole('âœ… Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ EMPTY_FIELDS Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', 'pass');
                    } else {
                        logToConsole(`âŒ Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯ - Ø¯Ø±ÛŒØ§ÙØª: ${result.error}`, 'fail');
                    }
                } catch (err) {
                    logToConsole(`âš ï¸ auth Ø®Ø·Ø§ Ø¯Ø§Ø¯: ${err.message}`, 'warn');
                }
            });

            // ØªØ³Øª Û¶: Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø±Ù…Ø² Ùˆ ØªÚ©Ø±Ø§Ø±
            document.getElementById('test_password_mismatch').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û¶] Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø±Ù…Ø² Ùˆ ØªÚ©Ø±Ø§Ø±', 'step');
                const password = 'RightPass1';
                const confirm = 'WrongPass';
                if (password !== confirm) {
                    logToConsole('âœ… Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø¯Ø±Ø³Øª ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯', 'pass');
                } else {
                    logToConsole('âŒ ØªØ·Ø§Ø¨Ù‚ Ù†Ø§Ø¯Ø±Ø³Øª', 'fail');
                }
            });

            // ØªØ³Øª Û·: Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±
            document.getElementById('test_server_error').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û·] Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± (ÛµÛ°Û°)', 'step');
                const formData = getFakeFormData({ username: 'server_error' });
                try {
                    const result = await fakeAuth.register(formData);
                    logToConsole('âŒ Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ ÙˆÙ„ÛŒ success Ø¨Ø±Ú¯Ø´Øª', 'fail');
                } catch (err) {
                    if (err.message === 'ERR_SERVER_500') {
                        logToConsole('âœ… Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ (Ù…Ù†ØªØ¸Ø±Ù‡)', 'pass');
                    } else {
                        logToConsole(`âŒ Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯: ${err.message}`, 'fail');
                    }
                }
            });

            // ØªØ³Øª Û¸: Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø±Ù…Ø²
            document.getElementById('test_toggle_password').addEventListener('click', () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û¸] Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø±Ù…Ø²', 'step');
                let visibility = false;
                visibility = !visibility;
                logToConsole(`ğŸ”¹ Ø­Ø§Ù„Øª: ${visibility ? 'Ù†Ù…Ø§ÛŒØ´ Ù…ØªÙ† (text)' : 'Ù…Ø®ÙÛŒ (password)'}`, 'info');
                logToConsole('âœ… ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª visibility Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.', 'pass');
            });

            // ØªØ³Øª Û¹: Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ - Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡
            document.getElementById('test_navigate_success').addEventListener('click', async () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û¹] Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯', 'step');
                fakeRouter.reset();
                
                // Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¬Ø¯ÛŒØ¯ Ùˆ ÛŒÚ©ØªØ§
                const uniqueUsername = 'nav_user_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
                const formData = getFakeFormData({ 
                    username: uniqueUsername,
                    email: uniqueUsername + '@example.com',
                    password: 'ValidPass123' 
                });
                
                try {
                    const result = await fakeAuth.register(formData);
                    
                    if (result.success === true) {
                        logToConsole('âœ… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'pass');
                        
                        // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯
                        fakeRouter.navigate('/login');
                        const last = fakeRouter.getLastNavigate();
                        
                        if (last === '/login') {
                            logToConsole('âœ… Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ /login Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.', 'pass');
                        } else {
                            logToConsole(`âŒ Ù‡Ø¯Ø§ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯ (Ø¢Ø®Ø±ÛŒÙ† Ù…Ø³ÛŒØ±: ${last})`, 'fail');
                        }
                        
                        // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                        logToConsole(`  Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯: ${uniqueUsername}`, 'info');
                    } else {
                        logToConsole(`âŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù†Ø§Ù…ÙˆÙÙ‚ - Ø®Ø·Ø§: ${result.error}`, 'fail');
                        logToConsole('  Ø§ÛŒÙ† Ø®Ø·Ø§ Ù†Ø¨Ø§ÛŒØ¯ Ø±Ø® Ø¯Ù‡Ø¯. Ù…Ø´Ú©Ù„ Ø§Ø² fakeAuth.register Ø§Ø³Øª.', 'warn');
                    }
                } catch (err) {
                    logToConsole(`âŒ Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${err.message}`, 'fail');
                }
            });

            // ØªØ³Øª Û±Û°: Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('test_reset_form').addEventListener('click', () => {
                logToConsole('ğŸ”¹ [ØªØ³Øª Û±Û°] Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…', 'step');
                logToConsole('âœ… ÙØ±Ù… Ù¾Ø§Ú© Ø´Ø¯ (ÙÛŒÙ„Ø¯Ù‡Ø§ Ø®Ø§Ù„ÛŒ Ø´Ø¯Ù†Ø¯)', 'pass');
            });

            // Ù„Ø§Ú¯ Ø´Ø±ÙˆØ¹
            logToConsole('âœ… ØµÙØ­Ù‡ ØªØ³Øª register-screen Ø¨Ø§ Ø±ÙØ¹ Ø®Ø·Ø§ÛŒ ØªØ³Øª Û¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯.', 'pass');
            logToConsole('â„¹ï¸ ØªØ³Øª Û¹ Ø§Ú©Ù†ÙˆÙ† Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚ Ùˆ Ù‡Ø¯Ø§ÛŒØª ØµØ­ÛŒØ­ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.', 'info');

        })();
    </script>
</body>
</html>
