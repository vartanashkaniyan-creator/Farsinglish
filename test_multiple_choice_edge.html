<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Multiple Choice - Farsinglish</title>
    <style>
        body {
            font-family: Vazir, Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: #4A90E2;
            color: white;
            padding: 25px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        .header p {
            margin: 10px 0 0;
            opacity: 0.9;
        }
        .test-panel {
            padding: 25px;
        }
        .info-box {
            background: #E3F2FD;
            border-right: 5px solid #2196F3;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 0.95em;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-card {
            background: #F8F9FA;
            border: 2px solid #E9ECEF;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .test-card h3 {
            margin: 0 0 15px 0;
            color: #2C3E50;
            font-size: 1.2em;
            border-bottom: 2px solid #4A90E2;
            padding-bottom: 8px;
        }
        .test-btn {
            background: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.95em;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
            font-weight: 500;
            margin-top: 10px;
        }
        .test-btn:hover {
            background: #357ABD;
            transform: scale(1.02);
        }
        .test-btn:active {
            transform: scale(0.98);
        }
        .result-box {
            background: #1E1E2F;
            color: #F8F9FA;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 15px 0;
            white-space: pre-wrap;
            direction: ltr;
            max-height: 200px;
            overflow-y: auto;
        }
        .summary-box {
            background: #2ECC71;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 25px;
        }
        .summary-box h3 {
            margin: 0 0 10px 0;
            font-size: 1.5em;
        }
        .summary-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 1.2em;
        }
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .badge.success { background: #27AE60; color: white; }
        .badge.danger { background: #E74C3C; color: white; }
        .badge.warning { background: #F39C12; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª ØªØ³Øª Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Multiple Choice</h1>
            <p>Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø²ÛŒ Ùˆ Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ</p>
        </div>
        <div class="test-panel">
            <div class="info-box">
                <strong>ğŸ¯ Ø§ØµÙˆÙ„ ØªØ³Øª:</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li>ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù„Ø¨Ù‡ (Edge Cases) - Ù„ÛŒØ³Øª Ø®Ø§Ù„ÛŒØŒ Ú¯Ø²ÛŒÙ†Ù‡ ØªÚ©Ø±Ø§Ø±ÛŒØŒ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ù†Ø§Ù…Ø¹ØªØ¨Ø±</li>
                    <li>Ø®Ø±ÙˆØ¬ÛŒ Ù‚Ø·Ø¹ÛŒ Ùˆ Ù‚Ø§Ø¨Ù„ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ</li>
                    <li>Ù‡ÛŒÚ† ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø§Ú˜ÙˆÙ„ Ù†Ø¯Ø§Ø±Ø¯</li>
                </ul>
            </div>

            <div id="testGrid" class="test-grid">
                <!-- ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ JavaScript Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>

            <div class="summary-box" id="summaryBox">
                <h3>ğŸ“Š Ù†ØªØ§ÛŒØ¬ ØªØ³Øªâ€ŒÙ‡Ø§</h3>
                <div class="summary-stats" id="summaryStats">
                    <span>âœ… Ù…ÙˆÙÙ‚: <span id="successCount">0</span></span>
                    <span>âŒ Ø´Ú©Ø³Øª: <span id="failCount">0</span></span>
                    <span>âš ï¸ Ú©Ù„: <span id="totalCount">0</span></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== Ù…Ø§Ú˜ÙˆÙ„ Multiple Choice ====================
        const MultipleChoiceModule = {
            // ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®
            checkAnswer(question, selectedIndex) {
                // validation Ø§ÙˆÙ„ÛŒÙ‡
                if (!question || typeof question !== 'object') {
                    return {
                        isValid: false,
                        correct: false,
                        error: 'Ø³ÙˆØ§Ù„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
                    };
                }

                if (!Array.isArray(question.options) || question.options.length === 0) {
                    return {
                        isValid: false,
                        correct: false,
                        error: 'Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ø®Ø§Ù„ÛŒ Ù‡Ø³ØªÙ†Ø¯'
                    };
                }

                if (typeof question.correctIndex !== 'number' || 
                    question.correctIndex < 0 || 
                    question.correctIndex >= question.options.length) {
                    return {
                        isValid: false,
                        correct: false,
                        error: 'Ø´Ø§Ø®Øµ Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
                    };
                }

                if (typeof selectedIndex !== 'number' || selectedIndex < 0) {
                    return {
                        isValid: false,
                        correct: false,
                        error: 'Ø´Ø§Ø®Øµ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
                    };
                }

                // Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Ù‡Ø´Ø¯Ø§Ø±)
                const uniqueOptions = new Set(question.options);
                if (uniqueOptions.size !== question.options.length) {
                    console.warn('âš ï¸ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù†Ø¯');
                }

                // Ø¨Ø±Ø±Ø³ÛŒ ØµØ­Øª Ù¾Ø§Ø³Ø®
                const isCorrect = (selectedIndex === question.correctIndex);
                
                return {
                    isValid: true,
                    correct: isCorrect,
                    selectedIndex,
                    correctIndex: question.correctIndex,
                    message: isCorrect ? 'Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ø§Ø³Øª âœ…' : 'Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª âŒ',
                    hasDuplicate: uniqueOptions.size !== question.options.length
                };
            },

            // ØªØ§Ø¨Ø¹ Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²ÛŒÙ†Ù‡ ØªØµØ§Ø¯ÙÛŒ (Ø¨Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù„Ø¨Ù‡)
            getRandomOption(question) {
                if (!question || !Array.isArray(question.options) || question.options.length === 0) {
                    return null;
                }
                const randomIndex = Math.floor(Math.random() * question.options.length);
                return {
                    index: randomIndex,
                    text: question.options[randomIndex]
                };
            }
        };

        // ==================== ØªØ¹Ø±ÛŒÙ ØªØ³Øªâ€ŒÙ‡Ø§ ====================
        const tests = [
            {
                id: 1,
                title: 'ØªØ³Øª Ù„ÛŒØ³Øª Ø®Ø§Ù„ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§',
                description: 'ÙˆÙ‚ØªÛŒ Ø¢Ø±Ø§ÛŒÙ‡ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª',
                question: {
                    text: 'Ø±Ù†Ú¯ Ø¢Ø³Ù…Ø§Ù† Ú†ÛŒØ³ØªØŸ',
                    options: [],
                    correctIndex: 0
                },
                selectedIndex: 0,
                expectedError: true,
                expectedMessage: 'Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ø®Ø§Ù„ÛŒ Ù‡Ø³ØªÙ†Ø¯'
            },
            {
                id: 2,
                title: 'ØªØ³Øª Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ',
                description: 'ÙˆÙ‚ØªÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ (Ù‡Ø´Ø¯Ø§Ø±)',
                question: {
                    text: 'Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† Ø³ÛŒØ§Ø±Ù‡ Ù…Ù†Ø¸ÙˆÙ…Ù‡ Ø´Ù…Ø³ÛŒØŸ',
                    options: ['Ù…Ø´ØªØ±ÛŒ', 'Ø²Ø­Ù„', 'Ù…Ø´ØªØ±ÛŒ', 'Ù…Ø±ÛŒØ®'],
                    correctIndex: 0
                },
                selectedIndex: 0,
                expectedCorrect: true,
                expectDuplicateWarning: true
            },
            {
                id: 3,
                title: 'ØªØ³Øª Ø§ÛŒÙ†Ø¯Ú©Ø³ ØµØ­ÛŒØ­ Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¨Ø§Ø²Ù‡',
                description: 'ÙˆÙ‚ØªÛŒ correctIndex Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² ØªØ¹Ø¯Ø§Ø¯ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§Ø³Øª',
                question: {
                    text: 'Ù¾Ø§ÛŒØªØ®Øª Ø§ÛŒØ±Ø§Ù†ØŸ',
                    options: ['ØªÙ‡Ø±Ø§Ù†', 'Ù…Ø´Ù‡Ø¯', 'Ø§ØµÙÙ‡Ø§Ù†'],
                    correctIndex: 5
                },
                selectedIndex: 0,
                expectedError: true,
                expectedMessage: 'Ø´Ø§Ø®Øµ Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
            },
            {
                id: 4,
                title: 'ØªØ³Øª Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù…Ù†ÙÛŒ',
                description: 'ÙˆÙ‚ØªÛŒ selectedIndex Ø¹Ø¯Ø¯ Ù…Ù†ÙÛŒ Ø§Ø³Øª',
                question: {
                    text: '2+2 Ú†Ù†Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ',
                    options: ['3', '4', '5'],
                    correctIndex: 1
                },
                selectedIndex: -1,
                expectedError: true,
                expectedMessage: 'Ø´Ø§Ø®Øµ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
            },
            {
                id: 5,
                title: 'ØªØ³Øª Ø³ÙˆØ§Ù„ Ù†Ø§Ù„',
                description: 'ÙˆÙ‚ØªÛŒ Ø®ÙˆØ¯ Ø³ÙˆØ§Ù„ null Ø§Ø³Øª',
                question: null,
                selectedIndex: 0,
                expectedError: true,
                expectedMessage: 'Ø³ÙˆØ§Ù„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
            },
            {
                id: 6,
                title: 'ØªØ³Øª Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ø§ÛŒÙ†Ø¯Ú©Ø³ ØªÚ©Ø±Ø§Ø±ÛŒ',
                description: 'Ø§Ù†ØªØ®Ø§Ø¨ ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ ØªÚ©Ø±Ø§Ø±ÛŒ (Ø§ÙˆÙ„ÛŒÙ† occurrence)',
                question: {
                    text: 'Ú©Ø¯Ø§Ù… Ø­ÛŒÙˆØ§Ù† ØµØ¯Ø§ Ù…ÛŒÙˆ Ø¯Ø§Ø±Ø¯ØŸ',
                    options: ['Ú¯Ø±Ø¨Ù‡', 'Ø³Ú¯', 'Ú¯Ø±Ø¨Ù‡', 'Ù…ÙˆØ´'],
                    correctIndex: 0
                },
                selectedIndex: 2, // Ø§Ù†ØªØ®Ø§Ø¨ Ø¯ÙˆÙ…ÛŒÙ† "Ú¯Ø±Ø¨Ù‡"
                expectedCorrect: true,
                expectDuplicateWarning: true,
                note: 'Ø¯Ø± Ù…Ù†Ø·Ù‚ Ù…Ø§ØŒ Ù‡Ø± Ø¯Ùˆ Ú¯Ø±Ø¨Ù‡ Ø¯Ø±Ø³Øª Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ú†ÙˆÙ† index ÛŒÚ©Ø³Ø§Ù† Ù†Ø¯Ø§Ø±Ù†Ø¯'
            },
            {
                id: 7,
                title: 'ØªØ³Øª Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø´Ø¨ÛŒÙ‡',
                description: 'Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø´Ø¨ÛŒÙ‡ Ø¨Ù‡ Ù‡Ù…',
                question: {
                    text: 'Ú©Ø¯Ø§Ù…ÛŒÚ© ØµØ­ÛŒØ­ Ø§Ø³ØªØŸ',
                    options: ['affect', 'effect', 'affect', 'effekt'],
                    correctIndex: 1
                },
                selectedIndex: 0,
                expectedCorrect: false,
                expectDuplicateWarning: true
            },
            {
                id: 8,
                title: 'ØªØ³Øª ØªØ¹Ø¯Ø§Ø¯ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù…',
                description: 'ÙÙ‚Ø· 1 Ú¯Ø²ÛŒÙ†Ù‡ (Ø­Ø§Ù„Øª Ù…Ø±Ø²ÛŒ)',
                question: {
                    text: 'Ø²Ù…ÛŒÙ† Ú¯Ø±Ø¯ Ø§Ø³ØªØŸ',
                    options: ['Ø¨Ù„Ù‡'],
                    correctIndex: 0
                },
                selectedIndex: 0,
                expectedCorrect: true
            },
            {
                id: 9,
                title: 'ØªØ³Øª selectedIndex Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¨Ø§Ø²Ù‡',
                description: 'Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡ Ø¨Ø§ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² Ø·ÙˆÙ„ Ø¢Ø±Ø§ÛŒÙ‡',
                question: {
                    text: 'Ú†Ù†Ø¯ ÙØµÙ„ Ø¯Ø§Ø±ÛŒÙ…ØŸ',
                    options: ['Û²', 'Û³', 'Û´'],
                    correctIndex: 2
                },
                selectedIndex: 10,
                expectedError: true,
                expectedMessage: 'Ø´Ø§Ø®Øµ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'
            },
            {
                id: 10,
                title: 'ØªØ³Øª question Ø¨Ø¯ÙˆÙ† ÙÛŒÙ„Ø¯ options',
                description: 'Ø¢Ø¨Ø¬Ú©Øª Ø³ÙˆØ§Ù„ Ù†Ø§Ù‚Øµ',
                question: {
                    text: 'ØªØ³Øª'
                },
                selectedIndex: 0,
                expectedError: true,
                expectedMessage: 'Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ø®Ø§Ù„ÛŒ Ù‡Ø³ØªÙ†Ø¯'
            }
        ];

        // ==================== Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª ====================
        function runTest(testCase) {
            try {
                const result = MultipleChoiceModule.checkAnswer(
                    testCase.question, 
                    testCase.selectedIndex
                );

                let passed = true;
                let messages = [];

                // Ø¨Ø±Ø±Ø³ÛŒ Ø®Ø·Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø±
                if (testCase.expectedError) {
                    passed = !result.isValid && result.error === testCase.expectedMessage;
                    if (!passed) {
                        messages.push(`âŒ Ø®Ø·Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø±: "${testCase.expectedMessage}" Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯: "${result.error}"`);
                    }
                } else {
                    passed = result.isValid;
                    if (testCase.expectedCorrect !== undefined) {
                        passed = passed && (result.correct === testCase.expectedCorrect);
                        if (!passed) {
                            messages.push(`âŒ Ù†ØªÛŒØ¬Ù‡ Ù…ÙˆØ±Ø¯ Ø§Ù†ØªØ¸Ø§Ø±: ${testCase.expectedCorrect} Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯: ${result.correct}`);
                        }
                    }
                }

                // Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø´Ø¯Ø§Ø± ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù†
                if (testCase.expectDuplicateWarning) {
                    // Ù…Ø§ Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ result.hasDuplicate Ø±Ø§ Ø¯Ø§Ø±ÛŒÙ…
                    if (!result.hasDuplicate) {
                        messages.push('âš ï¸ Ù‡Ø´Ø¯Ø§Ø± ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù† Ø§Ù†ØªØ¸Ø§Ø± Ù…ÛŒâ€ŒØ±ÙØª');
                    }
                }

                return {
                    passed: passed && messages.length === 0,
                    result: result,
                    messages: messages
                };
            } catch (error) {
                return {
                    passed: false,
                    result: null,
                    messages: [`âŒ Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${error.message}`]
                };
            }
        }

        // ==================== Ø±Ù†Ø¯Ø± ØªØ³Øªâ€ŒÙ‡Ø§ ====================
        function renderTests() {
            const grid = document.getElementById('testGrid');
            let successCount = 0;
            let failCount = 0;

            tests.forEach(test => {
                const result = runTest(test);
                if (result.passed) successCount++; else failCount++;

                const card = document.createElement('div');
                card.className = 'test-card';
                card.innerHTML = `
                    <h3>${test.id}. ${test.title}</h3>
                    <p style="color: #666; margin: 5px 0;">ğŸ“Œ ${test.description}</p>
                    <div class="result-box" id="result-${test.id}">${JSON.stringify(result.result, null, 2)}</div>
                    <button class="test-btn" onclick="runSingleTest(${test.id})">ğŸ”„ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ø¯Ø¯ ØªØ³Øª</button>
                    <div style="margin-top: 10px;">
                        <span class="badge ${result.passed ? 'success' : 'danger'}">
                            ${result.passed ? 'âœ… Ù¾Ø§Ø³' : 'âŒ Ø´Ú©Ø³Øª'}
                        </span>
                        ${result.messages.length ? `<span class="badge warning">${result.messages.length} Ø§Ø®Ø·Ø§Ø±</span>` : ''}
                    </div>
                `;
                grid.appendChild(card);
            });

            document.getElementById('successCount').textContent = successCount;
            document.getElementById('failCount').textContent = failCount;
            document.getElementById('totalCount').textContent = tests.length;
        }

        // ==================== Ø§Ø¬Ø±Ø§ÛŒ ØªÚ©ÛŒ ====================
        window.runSingleTest = function(testId) {
            const test = tests.find(t => t.id === testId);
            const result = runTest(test);
            const resultBox = document.getElementById(`result-${testId}`);
            if (resultBox) {
                resultBox.textContent = JSON.stringify(result.result, null, 2);
            }
            alert(`ØªØ³Øª ${testId}: ${result.passed ? 'âœ… Ù¾Ø§Ø³' : 'âŒ Ø´Ú©Ø³Øª'}\n${result.messages.join('\n')}`);
        };

        // ==================== Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
        window.onload = renderTests;
    </script>
</body>
</html>
