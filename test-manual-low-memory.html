<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù… - Farsinglish</title>
    <style>
        body {
            font-family: 'Tahoma', Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            background: #f5f5f5;
            direction: rtl;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .warning {
            background: #f39c12;
            color: #2c3e50;
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
            font-weight: bold;
        }
        .test-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .scenario-pass {
            border-right: 5px solid #27ae60;
            background: #f0fff0;
        }
        .scenario-fail {
            border-right: 5px solid #e74c3c;
            background: #fff0f0;
        }
        .scenario-pending {
            border-right: 5px solid #f39c12;
            background: #fff8e7;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin: 5px;
            transition: 0.3s;
        }
        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        button.danger {
            background: #e74c3c;
        }
        button.warning {
            background: #f39c12;
        }
        button.success {
            background: #27ae60;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 13px;
            direction: ltr;
            text-align: left;
        }
        .memory-bar {
            width: 100%;
            height: 30px;
            background: #ecf0f1;
            border-radius: 15px;
            margin: 10px 0;
            overflow: hidden;
        }
        .memory-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);
            transition: width 0.3s;
            color: white;
            line-height: 30px;
            text-align: center;
            font-weight: bold;
        }
        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px 0;
        }
        .badge-success { background: #27ae60; color: white; }
        .badge-warning { background: #f39c12; color: white; }
        .badge-danger { background: #e74c3c; color: white; }
        .badge-info { background: #3498db; color: white; }
        .summary {
            background: #34495e;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ§ª ØªØ³Øª Ø¯Ø³ØªÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù… (Low Memory)</h1>
        <h2>Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø±Ø§ÛŒØ· Ø¨Ø­Ø±Ø§Ù†ÛŒ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ</h2>
    </div>

    <div class="warning">
        âš ï¸ Ø§ÛŒÙ† ØªØ³Øª Ø´Ø±Ø§ÛŒØ· Ø­Ø§ÙØ¸Ù‡ Ú©Ù… Ø±Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ø±ÙˆØ±Ú¯Ø± Ú©Ù†Ø¯ Ø´ÙˆØ¯ ÛŒØ§ Ù‡Ø´Ø¯Ø§Ø± Ø¯Ù‡Ø¯.
    </div>

    <div class="test-card">
        <h3>ğŸ“Š ÙˆØ¶Ø¹ÛŒØª Ø­Ø§ÙØ¸Ù‡</h3>
        <div id="memoryBar" class="memory-bar">
            <div id="memoryFill" class="memory-fill" style="width: 0%">Û°%</div>
        </div>
        <p id="memoryInfo">Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡...</p>
        <button onclick="checkMemory()" class="success">ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø§ÙØ¸Ù‡</button>
        <button onclick="simulateLowMemory()" class="warning">âš ï¸ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù…</button>
        <button onclick="simulateCriticalMemory()" class="danger">ğŸ”¥ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ</button>
        <button onclick="clearMemory()" class="success">ğŸ§¹ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡</button>
    </div>

    <div class="test-card">
        <h3>ğŸ“¦ ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡ Ø³Ù†Ú¯ÛŒÙ†</h3>
        <button onclick="generateLargeData()" class="warning">ğŸ“Š ØªÙˆÙ„ÛŒØ¯ Û±Û°Û°Û° Ø¯Ø±Ø³</button>
        <button onclick="generateHugeData()" class="danger">ğŸ“ˆ ØªÙˆÙ„ÛŒØ¯ Û±Û°Û°Û°Û° Ø¯Ø±Ø³</button>
        <button onclick="clearData()" class="success">ğŸ—‘ï¸ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡</button>
        <pre id="dataStatus">Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù†Ø´Ø¯Ù‡</pre>
    </div>

    <div id="scenariosContainer"></div>

    <div class="test-card">
        <h3>ğŸ”„ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ ØªØ³Øª Ø¯Ø³ØªÛŒ</h3>
        <button onclick="runScenario1()">ğŸ§ª Ø³Ù†Ø§Ø±ÛŒÙˆ Û±: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ùˆ Ø­Ø§ÙØ¸Ù‡</button>
        <button onclick="runScenario2()">ğŸ§ª Ø³Ù†Ø§Ø±ÛŒÙˆ Û²: Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ</button>
        <button onclick="runScenario3()">ğŸ§ª Ø³Ù†Ø§Ø±ÛŒÙˆ Û³: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ</button>
        <button onclick="runScenario4()">ğŸ§ª Ø³Ù†Ø§Ø±ÛŒÙˆ Û´: Crash Recovery</button>
        <button onclick="runAllScenarios()">â–¶ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§</button>
        <button onclick="resetScenarios()" class="danger">ğŸ”„ Ø±ÛŒØ³Øª Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§</button>
    </div>

    <div id="summary" class="summary"></div>

    <script>
        // -------------------- Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§ÙØ¸Ù‡ --------------------
        let memoryData = {
            timestamp: null,
            usage: 0,
            limit: 0,
            percent: 0,
            isLow: false
        };

        let largeData = [];
        let scenarios = [
            { id: 1, name: 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡', status: 'pending', steps: [] },
            { id: 2, name: 'Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ú©Ù…', status: 'pending', steps: [] },
            { id: 3, name: 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª', status: 'pending', steps: [] },
            { id: 4, name: 'Crash Recovery', status: 'pending', steps: [] }
        ];

        function checkMemory() {
            if (performance && performance.memory) {
                const memory = performance.memory;
                memoryData = {
                    timestamp: new Date().toLocaleTimeString('fa-IR'),
                    usage: Math.round(memory.usedJSHeapSize / (1024 * 1024)),
                    limit: Math.round(memory.jsHeapSizeLimit / (1024 * 1024)),
                    percent: Math.round((memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100),
                    isLow: (memory.usedJSHeapSize / memory.jsHeapSizeLimit) > 0.8
                };
                
                document.getElementById('memoryFill').style.width = memoryData.percent + '%';
                document.getElementById('memoryFill').innerText = memoryData.percent + '%';
                document.getElementById('memoryInfo').innerHTML = `
                    <strong>ğŸ“Š Ø¢Ù…Ø§Ø± Ø­Ø§ÙØ¸Ù‡:</strong><br>
                    Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡: ${memoryData.usage} MB<br>
                    Ù…Ø­Ø¯ÙˆØ¯ÛŒØª: ${memoryData.limit} MB<br>
                    Ø¯Ø±ØµØ¯: ${memoryData.percent}%<br>
                    ÙˆØ¶Ø¹ÛŒØª: ${memoryData.isLow ? 'âš ï¸ Ø­Ø§ÙØ¸Ù‡ Ú©Ù…' : 'âœ… Ù†Ø±Ù…Ø§Ù„'}<br>
                    Ø²Ù…Ø§Ù†: ${memoryData.timestamp}
                `;

                if (memoryData.isLow) {
                    document.getElementById('memoryFill').style.background = 'linear-gradient(90deg, #f39c12, #e74c3c)';
                } else {
                    document.getElementById('memoryFill').style.background = 'linear-gradient(90deg, #27ae60, #f39c12)';
                }
            } else {
                document.getElementById('memoryInfo').innerHTML = `
                    âš ï¸ API Ø­Ø§ÙØ¸Ù‡ Ø¯Ø± Ø§ÛŒÙ† Ù…Ø±ÙˆØ±Ú¯Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.<br>
                    Ø§Ø² Chrome/Edge Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
                `;
            }
        }

        // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù…
        function simulateLowMemory() {
            const warning = confirm('âš ï¸ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù…ØŸ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ø±ÙˆØ±Ú¯Ø± Ú©Ù†Ø¯ Ø´ÙˆØ¯.');
            if (!warning) return;
            
            // ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡ Ø³Ù†Ú¯ÛŒÙ†
            for (let i = 0; i < 5000; i++) {
                largeData.push({
                    id: i,
                    data: new Array(1000).join('x'),
                    timestamp: Date.now()
                });
            }
            
            checkMemory();
            updateDataStatus();
            logScenario('simulate', 'Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù… Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯');
        }

        function simulateCriticalMemory() {
            const warning = confirm('ğŸ”¥ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ø¨Ø­Ø±Ø§Ù†ÛŒØŸ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ø±ÙˆØ±Ú¯Ø± Ú©Ø±Ø´ Ú©Ù†Ø¯!');
            if (!warning) return;
            
            // ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡ Ø¨Ø³ÛŒØ§Ø± Ø³Ù†Ú¯ÛŒÙ†
            for (let i = 0; i < 20000; i++) {
                largeData.push({
                    id: i,
                    data: new Array(5000).join('x'),
                    timestamp: Date.now()
                });
            }
            
            checkMemory();
            updateDataStatus();
            logScenario('simulate', 'Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ø¨Ø­Ø±Ø§Ù†ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯');
        }

        function clearMemory() {
            largeData = [];
            if (window.gc) {
                window.gc();
            }
            checkMemory();
            updateDataStatus();
            logScenario('clear', 'Ø­Ø§ÙØ¸Ù‡ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø´Ø¯');
        }

        function generateLargeData() {
            largeData = [];
            for (let i = 0; i < 1000; i++) {
                largeData.push({
                    id: i,
                    title: `Ø¯Ø±Ø³ ${i}`,
                    words: new Array(50).fill('word').map((w, idx) => ({
                        id: idx,
                        text: `Ú©Ù„Ù…Ù‡ ${idx}`,
                        meaning: `Ù…Ø¹Ù†ÛŒ ${idx}`
                    })),
                    progress: Math.random()
                });
            }
            checkMemory();
            updateDataStatus();
            logScenario('generate', 'Û±Û°Û°Û° Ø¯Ø±Ø³ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯');
        }

        function generateHugeData() {
            largeData = [];
            for (let i = 0; i < 10000; i++) {
                largeData.push({
                    id: i,
                    title: `Ø¯Ø±Ø³ Ø³Ù†Ú¯ÛŒÙ† ${i}`,
                    data: new Array(100).join('x')
                });
            }
            checkMemory();
            updateDataStatus();
            logScenario('generate', 'Û±Û°Û°Û°Û° Ø¯Ø±Ø³ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯');
        }

        function clearData() {
            largeData = [];
            updateDataStatus();
            logScenario('clear', 'Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯');
        }

        function updateDataStatus() {
            const status = document.getElementById('dataStatus');
            status.innerHTML = `
                ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø³â€ŒÙ‡Ø§: ${largeData.length}<br>
                Ø­Ø¬Ù… ØªÙ‚Ø±ÛŒØ¨ÛŒ: ${Math.round(JSON.stringify(largeData).length / (1024 * 1024))} MB<br>
                Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${new Date().toLocaleTimeString('fa-IR')}
            `;
        }

        // -------------------- Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ ØªØ³Øª --------------------
        function logScenario(scenarioId, message) {
            const scenario = scenarios.find(s => s.id === scenarioId || s.name.includes(scenarioId));
            if (scenario) {
                scenario.steps.push({
                    time: new Date().toLocaleTimeString('fa-IR'),
                    message: message
                });
            }
            updateScenarios();
        }

        function updateScenarios() {
            const container = document.getElementById('scenariosContainer');
            let html = '';
            
            scenarios.forEach(scenario => {
                const statusClass = scenario.status === 'pass' ? 'scenario-pass' : 
                                   scenario.status === 'fail' ? 'scenario-fail' : 'scenario-pending';
                
                html += `
                    <div class="test-card ${statusClass}">
                        <h4>ğŸ§ª Ø³Ù†Ø§Ø±ÛŒÙˆ ${scenario.id}: ${scenario.name}</h4>
                        <div>
                            <span class="status-badge ${scenario.status === 'pass' ? 'badge-success' : 
                                                      scenario.status === 'fail' ? 'badge-danger' : 'badge-warning'}">
                                ${scenario.status === 'pass' ? 'âœ… Ù…ÙˆÙÙ‚' : 
                                  scenario.status === 'fail' ? 'âŒ Ù†Ø§Ù…ÙˆÙÙ‚' : 'â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±'}
                            </span>
                        </div>
                        <h5>Ù…Ø±Ø§Ø­Ù„ Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡:</h5>
                        <ul>
                            ${scenario.steps.map(step => `<li>â±ï¸ ${step.time} - ${step.message}</li>`).join('') || '<li>Ù‡Ù†ÙˆØ² Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ø§Ø¬Ø±Ø§ Ù†Ø´Ø¯Ù‡</li>'}
                        </ul>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            updateSummary();
        }

        function runScenario1() {
            logScenario(1, 'Ø´Ø±ÙˆØ¹ Ø³Ù†Ø§Ø±ÛŒÙˆ Û±: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡');
            generateLargeData();
            checkMemory();
            
            if (memoryData.percent < 50) {
                scenarios[0].status = 'pass';
                logScenario(1, 'âœ… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙÙ‚ - Ø­Ø§ÙØ¸Ù‡ Ù†Ø±Ù…Ø§Ù„');
            } else {
                scenarios[0].status = 'fail';
                logScenario(1, 'âš ï¸ Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡ Ø¨Ø§Ù„Ø§');
            }
            updateScenarios();
        }

        function runScenario2() {
            logScenario(2, 'Ø´Ø±ÙˆØ¹ Ø³Ù†Ø§Ø±ÛŒÙˆ Û²: Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ú©Ù…');
            
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡ Ú©Ù…
            simulateLowMemory();
            
            try {
                // ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage
                localStorage.setItem('test_data', JSON.stringify(largeData.slice(0, 100)));
                logScenario(2, 'âœ… Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage Ù…ÙˆÙÙ‚');
                scenarios[1].status = 'pass';
            } catch(e) {
                logScenario(2, `âŒ Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ: ${e.message}`);
                scenarios[1].status = 'fail';
            }
            
            updateScenarios();
        }

        function runScenario3() {
            logScenario(3, 'Ø´Ø±ÙˆØ¹ Ø³Ù†Ø§Ø±ÛŒÙˆ Û³: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª');
            
            try {
                const data = localStorage.getItem('test_data');
                if (data) {
                    logScenario(3, 'âœ… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø² localStorage Ù…ÙˆÙÙ‚');
                    scenarios[2].status = 'pass';
                } else {
                    logScenario(3, 'âš ï¸ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
                    scenarios[2].status = 'pending';
                }
            } catch(e) {
                logScenario(3, `âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ: ${e.message}`);
                scenarios[2].status = 'fail';
            }
            
            updateScenarios();
        }

        function runScenario4() {
            logScenario(4, 'Ø´Ø±ÙˆØ¹ Ø³Ù†Ø§Ø±ÛŒÙˆ Û´: Crash Recovery');
            
            // Ø°Ø®ÛŒØ±Ù‡ state ÙØ¹Ù„ÛŒ
            const currentState = {
                data: largeData.length,
                memory: memoryData,
                timestamp: Date.now()
            };
            
            sessionStorage.setItem('crash_recovery', JSON.stringify(currentState));
            logScenario(4, 'ğŸ’¾ state Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
            
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø±ÙØ±Ø´ ØµÙØ­Ù‡ (Ø¨Ø§ ØªØ£Ø®ÛŒØ±)
            logScenario(4, 'ğŸ”„ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø±ÙØ±Ø´ ØµÙØ­Ù‡...');
            
            setTimeout(() => {
                const recovered = sessionStorage.getItem('crash_recovery');
                if (recovered) {
                    logScenario(4, 'âœ… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù¾Ø³ Ø§Ø² Ø±ÙØ±Ø´ Ù…ÙˆÙÙ‚');
                    scenarios[3].status = 'pass';
                } else {
                    logScenario(4, 'âŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚');
                    scenarios[3].status = 'fail';
                }
                updateScenarios();
            }, 2000);
            
            updateScenarios();
        }

        function runAllScenarios() {
            runScenario1();
            setTimeout(runScenario2, 1000);
            setTimeout(runScenario3, 2000);
            setTimeout(runScenario4, 3000);
        }

        function resetScenarios() {
            scenarios = [
                { id: 1, name: 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡', status: 'pending', steps: [] },
                { id: 2, name: 'Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ú©Ù…', status: 'pending', steps: [] },
                { id: 3, name: 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª', status: 'pending', steps: [] },
                { id: 4, name: 'Crash Recovery', status: 'pending', steps: [] }
            ];
            clearData();
            clearMemory();
            updateScenarios();
        }

        function updateSummary() {
            const summary = document.getElementById('summary');
            const passed = scenarios.filter(s => s.status === 'pass').length;
            const failed = scenarios.filter(s => s.status === 'fail').length;
            const pending = scenarios.filter(s => s.status === 'pending').length;
            
            summary.innerHTML = `
                <h3>ğŸ“Š Ø®Ù„Ø§ØµÙ‡ ØªØ³Øªâ€ŒÙ‡Ø§</h3>
                <p>âœ… Ù…ÙˆÙÙ‚: ${passed} | âŒ Ù†Ø§Ù…ÙˆÙÙ‚: ${failed} | â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±: ${pending} | ğŸ“‹ Ú©Ù„: ${scenarios.length}</p>
                <p>â° Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${new Date().toLocaleDateString('fa-IR')} - ${new Date().toLocaleTimeString('fa-IR')}</p>
                <p>${memoryData.isLow ? 'âš ï¸ Ù‡Ø´Ø¯Ø§Ø±: Ø­Ø§ÙØ¸Ù‡ Ø¯Ø± ÙˆØ¶Ø¹ÛŒØª Ø¨Ø­Ø±Ø§Ù†ÛŒ' : 'âœ… ÙˆØ¶Ø¹ÛŒØª Ø­Ø§ÙØ¸Ù‡ Ù†Ø±Ù…Ø§Ù„'}</p>
            `;
        }

        // Ø¨Ø±Ø±Ø³ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
        window.onload = function() {
            checkMemory();
            updateScenarios();
        };

        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø­Ø§ÙØ¸Ù‡
        setInterval(checkMemory, 5000);
    </script>
</body>
</html>
