<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Auth Service - Farsinglish</title>
    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            line-height: 1.6;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            background: #3498db;
            color: white;
        }
        button:hover {
            opacity: 0.8;
            transform: translateY(-1px);
        }
        button.danger {
            background: #e74c3c;
        }
        button.success {
            background: #2ecc71;
        }
        button.warning {
            background: #f39c12;
        }
        .output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .output.success {
            border-right: 4px solid #2ecc71;
        }
        .output.error {
            border-right: 4px solid #e74c3c;
        }
        .summary {
            background: #34495e;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .summary span {
            font-size: 24px;
            font-weight: bold;
            color: #f1c40f;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ØªØ³Øª Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Auth Service</h1>
    <h3 style="text-align: center; color: #7f8c8d;">Farsinglish - ØªØ³Øª Ø¯Ø³ØªÛŒ Ø¨Ø§ Ø¯Ú©Ù…Ù‡</h3>

    <div class="summary">
        <div>ÙˆØ¶Ø¹ÛŒØª: <span id="status-indicator">âšª</span></div>
        <div>ØªØ¹Ø¯Ø§Ø¯ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡: <span id="test-count">Û°</span></div>
    </div>

    <!-- ØªØ³Øª Û±: ØªÙˆÚ©Ù† Ù…Ù†Ù‚Ø¶ÛŒ -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û±: ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù† Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡</div>
        <div class="button-group">
            <button onclick="runExpiredTokenTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('expired-token-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="expired-token-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û²: ØªÙˆÚ©Ù† Ù†Ø§Ù…Ø¹ØªØ¨Ø± (ÙØ±Ù…Øª Ø§Ø´ØªØ¨Ø§Ù‡) -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û²: ØªÙˆÚ©Ù† Ø¨Ø§ ÙØ±Ù…Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±</div>
        <div class="button-group">
            <button onclick="runInvalidFormatTokenTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('invalid-format-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="invalid-format-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û³: ØªÙˆÚ©Ù† Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø´Ø¯Ù‡ (Ø§Ù…Ø¶Ø§ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±) -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û³: ØªÙˆÚ©Ù† Ø¨Ø§ Ø§Ù…Ø¶Ø§ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±</div>
        <div class="button-group">
            <button onclick="runInvalidSignatureTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('invalid-signature-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="invalid-signature-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û´: ØªÙ„Ø§Ø´ Ù„Ø§Ú¯ÛŒÙ† Ø¨Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®Ø§Ù„ÛŒ -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û´: Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®Ø§Ù„ÛŒ</div>
        <div class="button-group">
            <button onclick="runEmptyUsernameTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('empty-username-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="empty-username-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Ûµ: ØªÙ„Ø§Ø´ Ù„Ø§Ú¯ÛŒÙ† Ø¨Ø§ Ø±Ù…Ø² Ø®Ø§Ù„ÛŒ -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Ûµ: Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®Ø§Ù„ÛŒ</div>
        <div class="button-group">
            <button onclick="runEmptyPasswordTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('empty-password-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="empty-password-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û¶: ØªÙ„Ø§Ø´ Ù„Ø§Ú¯ÛŒÙ† Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø± ØºÛŒØ±Ù…Ø¬Ø§Ø² -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û¶: Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø±</div>
        <div class="button-group">
            <button onclick="runInvalidUserTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('invalid-user-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="invalid-user-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û·: ØªÙ„Ø§Ø´ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ø§ÛŒÙ…ÛŒÙ„ ØªÚ©Ø±Ø§Ø±ÛŒ -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û·: Ø§ÛŒÙ…ÛŒÙ„ ØªÚ©Ø±Ø§Ø±ÛŒ</div>
        <div class="button-group">
            <button onclick="runDuplicateEmailTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('duplicate-email-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="duplicate-email-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û¸: ØªÙ„Ø§Ø´ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û¸: Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ</div>
        <div class="button-group">
            <button onclick="runDuplicateUsernameTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('duplicate-username-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="duplicate-username-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û¹: ØªÙ„Ø§Ø´ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û¹: Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±</div>
        <div class="button-group">
            <button onclick="runInvalidEmailTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('invalid-email-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="invalid-email-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- ØªØ³Øª Û±Û°: ØªÙ„Ø§Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø§ ØªÙˆÚ©Ù† Ø®Ø§Ù„ÛŒ -->
    <div class="test-container">
        <div class="test-title">ğŸ”´ ØªØ³Øª Û±Û°: ØªÙˆÚ©Ù† Ø®Ø§Ù„ÛŒ</div>
        <div class="button-group">
            <button onclick="runEmptyTokenTest()" class="danger">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
            <button onclick="resetTest('empty-token-output')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ</button>
        </div>
        <div id="empty-token-output" class="output">Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯...</div>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù†ØªØ±Ù„ÛŒ Ú©Ù„ÛŒ -->
    <div class="button-group" style="justify-content: center; margin-top: 30px;">
        <button onclick="runAllTests()" class="success" style="padding: 15px 30px;">â–¶ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§</button>
        <button onclick="resetAllOutputs()" class="warning" style="padding: 15px 30px;">ğŸ”„ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡</button>
    </div>

    <script>
        // Auth Service Mock Ø¨Ø±Ø§ÛŒ ØªØ³Øª
        const AuthService = {
            // Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)
            _users: [
                { id: 1, username: 'test', email: 'test@example.com', password: 'hashed_123' }
            ],
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ØªÙˆÚ©Ù†
            validateToken: function(token) {
                if (!token) return { valid: false, error: 'TOKEN_EMPTY' };
                
                try {
                    const parts = token.split('.');
                    if (parts.length !== 3) return { valid: false, error: 'INVALID_FORMAT' };
                    
                    const payload = JSON.parse(atob(parts[1]));
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ù‚Ø¶Ø§
                    if (payload.exp && payload.exp < Date.now()) {
                        return { valid: false, error: 'TOKEN_EXPIRED' };
                    }
                    
                    // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù…Ø¶Ø§ (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)
                    const signature = parts[2];
                    if (signature === 'invalidsignature') {
                        return { valid: false, error: 'INVALID_SIGNATURE' };
                    }
                    
                    return { valid: true, user: payload };
                } catch (e) {
                    return { valid: false, error: 'TOKEN_PARSE_ERROR' };
                }
            },

            // Ù„Ø§Ú¯ÛŒÙ†
            login: function(username, password) {
                if (!username) return { success: false, error: 'USERNAME_EMPTY' };
                if (!password) return { success: false, error: 'PASSWORD_EMPTY' };
                
                const user = this._users.find(u => u.username === username);
                if (!user) return { success: false, error: 'USER_NOT_FOUND' };
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø±Ù…Ø²
                if (password !== 'correct_password') {
                    return { success: false, error: 'INVALID_PASSWORD' };
                }
                
                return { 
                    success: true, 
                    token: 'valid.token.' + btoa(JSON.stringify({ id: user.id, username: user.username, exp: Date.now() + 3600000 }))
                };
            },

            // Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
            register: function(userData) {
                if (!userData.email || !userData.email.includes('@')) {
                    return { success: false, error: 'INVALID_EMAIL' };
                }
                
                if (this._users.some(u => u.email === userData.email)) {
                    return { success: false, error: 'EMAIL_EXISTS' };
                }
                
                if (this._users.some(u => u.username === userData.username)) {
                    return { success: false, error: 'USERNAME_EXISTS' };
                }
                
                return { success: true, user: { id: Date.now(), ...userData } };
            }
        };

        // Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§
        let testCount = 0;
        const updateTestCount = () => {
            document.getElementById('test-count').textContent = testCount;
            document.getElementById('status-indicator').textContent = 'ğŸŸ¢';
        };

        // ØªÙˆØ§Ø¨Ø¹ ØªØ³Øª
        function runExpiredTokenTest() {
            const output = document.getElementById('expired-token-output');
            const expiredToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.' + 
                btoa(JSON.stringify({ user: 'test', exp: Date.now() - 10000 })) + 
                '.signature';
            
            const result = AuthService.validateToken(expiredToken);
            output.innerHTML = `ğŸ” ØªØ³Øª ØªÙˆÚ©Ù† Ù…Ù†Ù‚Ø¶ÛŒ:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: ØªÙˆÚ©Ù† Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ Ú¯Ø°Ø´ØªÙ‡<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'TOKEN_EXPIRED' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ø§Ù†Ù‚Ø¶Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'TOKEN_EXPIRED' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runInvalidFormatTokenTest() {
            const output = document.getElementById('invalid-format-output');
            const invalidToken = 'not.a.valid.token';
            
            const result = AuthService.validateToken(invalidToken);
            output.innerHTML = `ğŸ” ØªØ³Øª ÙØ±Ù…Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: "${invalidToken}"<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'INVALID_FORMAT' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - ÙØ±Ù…Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'INVALID_FORMAT' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runInvalidSignatureTest() {
            const output = document.getElementById('invalid-signature-output');
            const invalidSignatureToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.' + 
                btoa(JSON.stringify({ user: 'test' })) + 
                '.invalidsignature';
            
            const result = AuthService.validateToken(invalidSignatureToken);
            output.innerHTML = `ğŸ” ØªØ³Øª Ø§Ù…Ø¶Ø§ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: ØªÙˆÚ©Ù† Ø¨Ø§ Ø§Ù…Ø¶Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'INVALID_SIGNATURE' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø§Ù…Ø¶Ø§ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'INVALID_SIGNATURE' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runEmptyUsernameTest() {
            const output = document.getElementById('empty-username-output');
            const result = AuthService.login('', 'pass');
            output.innerHTML = `ğŸ” ØªØ³Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®Ø§Ù„ÛŒ:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: username=""<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'USERNAME_EMPTY' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®Ø§Ù„ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'USERNAME_EMPTY' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runEmptyPasswordTest() {
            const output = document.getElementById('empty-password-output');
            const result = AuthService.login('test', '');
            output.innerHTML = `ğŸ” ØªØ³Øª Ø±Ù…Ø² Ø®Ø§Ù„ÛŒ:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: password=""<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'PASSWORD_EMPTY' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ø±Ù…Ø² Ø®Ø§Ù„ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'PASSWORD_EMPTY' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runInvalidUserTest() {
            const output = document.getElementById('invalid-user-output');
            const result = AuthService.login('nonexistent', 'pass');
            output.innerHTML = `ğŸ” ØªØ³Øª Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø±:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: username="nonexistent"<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'USER_NOT_FOUND' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø± ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'USER_NOT_FOUND' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runDuplicateEmailTest() {
            const output = document.getElementById('duplicate-email-output');
            const result = AuthService.register({ 
                username: 'new', 
                email: 'test@example.com',
                password: 'pass' 
            });
            output.innerHTML = `ğŸ” ØªØ³Øª Ø§ÛŒÙ…ÛŒÙ„ ØªÚ©Ø±Ø§Ø±ÛŒ:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: email="test@example.com" (Ù…ÙˆØ¬ÙˆØ¯)<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'EMAIL_EXISTS' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ø§ÛŒÙ…ÛŒÙ„ ØªÚ©Ø±Ø§Ø±ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'EMAIL_EXISTS' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runDuplicateUsernameTest() {
            const output = document.getElementById('duplicate-username-output');
            const result = AuthService.register({ 
                username: 'test', 
                email: 'new@example.com',
                password: 'pass' 
            });
            output.innerHTML = `ğŸ” ØªØ³Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: username="test" (Ù…ÙˆØ¬ÙˆØ¯)<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'USERNAME_EXISTS' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'USERNAME_EXISTS' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runInvalidEmailTest() {
            const output = document.getElementById('invalid-email-output');
            const result = AuthService.register({ 
                username: 'new', 
                email: 'not-an-email',
                password: 'pass' 
            });
            output.innerHTML = `ğŸ” ØªØ³Øª Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: email="not-an-email"<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'INVALID_EMAIL' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'INVALID_EMAIL' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function runEmptyTokenTest() {
            const output = document.getElementById('empty-token-output');
            const result = AuthService.validateToken('');
            output.innerHTML = `ğŸ” ØªØ³Øª ØªÙˆÚ©Ù† Ø®Ø§Ù„ÛŒ:<br>`;
            output.innerHTML += `ÙˆØ±ÙˆØ¯ÛŒ: token=""<br>`;
            output.innerHTML += `Ù†ØªØ§ÛŒØ¬: ${JSON.stringify(result, null, 2)}<br>`;
            output.innerHTML += result.error === 'TOKEN_EMPTY' ? 
                'âœ… ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯ - Ø®Ø·Ø§ÛŒ ØªÙˆÚ©Ù† Ø®Ø§Ù„ÛŒ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯' : 
                'âŒ ØªØ³Øª Ù…Ø±Ø¯ÙˆØ¯ - Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù†Ø´Ø¯';
            output.className = 'output ' + (result.error === 'TOKEN_EMPTY' ? 'success' : 'error');
            testCount++;
            updateTestCount();
        }

        function resetTest(elementId) {
            document.getElementById(elementId).innerHTML = 'Ø®Ø±ÙˆØ¬ÛŒ Ù¾Ø§Ú© Ø´Ø¯...';
            document.getElementById(elementId).className = 'output';
        }

        function resetAllOutputs() {
            const outputs = document.querySelectorAll('.output');
            outputs.forEach(output => {
                output.innerHTML = 'Ø®Ø±ÙˆØ¬ÛŒ Ù¾Ø§Ú© Ø´Ø¯...';
                output.className = 'output';
            });
            testCount = 0;
            updateTestCount();
            document.getElementById('status-indicator').textContent = 'âšª';
        }

        function runAllTests() {
            testCount = 0;
            runExpiredTokenTest();
            runInvalidFormatTokenTest();
            runInvalidSignatureTest();
            runEmptyUsernameTest();
            runEmptyPasswordTest();
            runInvalidUserTest();
            runDuplicateEmailTest();
            runDuplicateUsernameTest();
            runInvalidEmailTest();
            runEmptyTokenTest();
            updateTestCount();
        }
    </script>
</body>
</html>
