<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ SRS - Farsinglish</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Tahoma', 'Vazir', 'Segoe UI', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            padding: 16px;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(145deg, #0f2c3e, #1a3a4f);
            color: white;
            padding: 24px 20px;
            border-radius: 28px;
            margin-bottom: 24px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            text-align: center;
        }
        h1 { font-size: 1.8rem; margin-bottom: 8px; }
        h2 { font-size: 1.2rem; font-weight: 400; opacity: 0.95; }
        .scenario-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s;
        }
        .scenario-title {
            background: #f1f5f9;
            padding: 12px 18px;
            border-radius: 14px;
            margin-bottom: 18px;
            font-weight: bold;
            color: #0c4a6e;
            border-right: 6px solid #0284c7;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }
        .btn {
            background: #ffffff;
            border: 2px solid #cbd5e1;
            padding: 14px 20px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            cursor: pointer;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 6px;
            min-width: 140px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }
        .btn-primary {
            background: #0284c7;
            border-color: #0284c7;
            color: white;
        }
        .btn-success {
            background: #0f7b5a;
            border-color: #0f7b5a;
            color: white;
        }
        .btn-warning {
            background: #b45309;
            border-color: #b45309;
            color: white;
        }
        .btn:active { transform: scale(0.97); }
        .log-panel {
            background: #0f172a;
            color: #e2e8f0;
            padding: 18px;
            border-radius: 16px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            direction: ltr;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 25px;
            border: 1px solid #334155;
        }
        .badge {
            background: #e2e8f0;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.8rem;
            color: #334155;
            display: inline-block;
            margin-left: 8px;
        }
        .review-item {
            background: #fef9c3;
            border-right: 6px solid #eab308;
            padding: 12px;
            margin: 10px 0;
            border-radius: 12px;
        }
        .footer {
            text-align: center;
            margin-top: 35px;
            color: #64748b;
            font-size: 0.9rem;
        }
        .flex-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ§  Ø¢Ø²Ù…ÙˆÙ† Ø¯Ø³ØªÛŒ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ SRS</h1>
        <h2>âœï¸ Farsinglish â€” Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ù…Ø±ÙˆØ± Ù‡ÙˆØ´Ù…Ù†Ø¯ (Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… SM-2 Ù¾ÛŒØ´Ø±ÙØªÙ‡)</h2>
        <div style="margin-top: 12px;"><span class="badge">ğŸ“± ØªØ³Øª Ù„Ù…Ø³ÛŒ Ùˆ Ø¯Ø³ØªÛŒ</span><span class="badge">âš¡ Û¸ Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ ÙˆØ§Ù‚Ø¹ÛŒ</span></div>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û±: Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø±Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ£Ø®ÛŒØ± -->
    <div class="scenario-card" id="scenario1">
        <div class="scenario-title">
            <span>ğŸ”´ Û±. Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ£Ø®ÛŒØ± (Overdue)</span>
        </div>
        <p style="margin-bottom: 12px;">ğŸ“Œ Û³ Ø¯Ø±Ø³ Ø¨Ø§ ØªØ£Ø®ÛŒØ±Ù‡Ø§ÛŒ Ù…ØªÙØ§ÙˆØª: <strong>Ø¯Ø±Ø³ A (Ûµ Ø±ÙˆØ² Ø¹Ù‚Ø¨), Ø¯Ø±Ø³ B (Û² Ø±ÙˆØ² Ø¹Ù‚Ø¨), Ø¯Ø±Ø³ C (Û° Ø±ÙˆØ² Ø¹Ù‚Ø¨)</strong></p>
        <div id="reviewList1" class="review-item" style="background:#f1f5f9;">
            Ù…Ù†ØªØ¸Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª...
        </div>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario1()">ğŸ”„ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ</button>
            <button class="btn" onclick="markResult('scenario1', true)">âœ… ØªØ£ÛŒÛŒØ¯ Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø±Ø³Øª</button>
            <button class="btn" onclick="markResult('scenario1', false)">âŒ Ø§ÙˆÙ„ÙˆÛŒØª Ù†Ø§Ø¯Ø±Ø³Øª</button>
        </div>
        <p id="status1" style="margin-top: 12px; color: #475569;"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û²: Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ => Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Û± Ø±ÙˆØ²Ù‡ -->
    <div class="scenario-card" id="scenario2">
        <div class="scenario-title">
            <span>ğŸŸ  Û². Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª (Ú©ÛŒÙÛŒØª Û²) Ùˆ ØªØ£Ø«ÛŒØ± Ø¨Ø± Ø§ÙˆÙ„ÙˆÛŒØª</span>
        </div>
        <p>ğŸ“Œ Ø¯Ø±Ø³ D Ø¨Ø§ Û´ Ø¨Ø§Ø± ØªÚ©Ø±Ø§Ø±ØŒ ÙØ§ØµÙ„Ù‡ Û±Û² Ø±ÙˆØ²Ù‡ØŒ Ù¾Ø§Ø³Ø® Ú©Ø§Ø±Ø¨Ø±: <strong>Ú©ÛŒÙÛŒØª Û² (Ø¶Ø¹ÛŒÙ)</strong></p>
        <div id="reviewList2" style="background: #fee2e2; padding: 12px; border-radius: 12px; margin: 10px 0;">
            ...
        </div>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario2()">ğŸ“‰ Ø§Ø¹Ù…Ø§Ù„ Ù¾Ø§Ø³Ø® Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§ÙˆÙ„ÙˆÛŒØª Ø¬Ø¯ÛŒØ¯</button>
            <button class="btn" onclick="markResult('scenario2', true)">âœ… ØªØ£ÛŒÛŒØ¯</button>
            <button class="btn" onclick="markResult('scenario2', false)">âŒ Ø±Ø¯</button>
        </div>
        <p id="status2"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û³: Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ù…Ù‚Ø§Ø¨Ù„ Ø¯Ø±Ø³ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ù…Ø±ÙˆØ± ÙÙˆØ±ÛŒ -->
    <div class="scenario-card" id="scenario3">
        <div class="scenario-title">
            <span>ğŸŸ¡ Û³. Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯ (ØªÚ©Ø±Ø§Ø± Û°) vs Ø¯Ø±Ø³ Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ±</span>
        </div>
        <p>ğŸ“Œ Ø¯Ø±Ø³ E: Ø¬Ø¯ÛŒØ¯ØŒ Ø¨Ø¯ÙˆÙ† Ù…Ø±ÙˆØ± â€” Ø¯Ø±Ø³ F: Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ± (Û² Ø±ÙˆØ² Ú¯Ø°Ø´ØªÙ‡)</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario3()">âš–ï¸ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø§ÙˆÙ„ÙˆÛŒØª</button>
            <button class="btn" onclick="markResult('scenario3', true)">âœ… Ø¯Ø±Ø³ F Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§ØªØ±</button>
            <button class="btn" onclick="markResult('scenario3', false)">âŒ Ø§Ø´ØªØ¨Ø§Ù‡</button>
        </div>
        <p id="status3"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û´: Ø­Ø¯Ø§Ù‚Ù„ Ùˆ Ø­Ø¯Ø§Ú©Ø«Ø± Ø¹Ø§Ù…Ù„ Ø³Ù‡ÙˆÙ„Øª -->
    <div class="scenario-card" id="scenario4">
        <div class="scenario-title">
            <span>ğŸŸ¢ Û´. Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¹Ø§Ù…Ù„ Ø³Ù‡ÙˆÙ„Øª (Ease Factor)</span>
        </div>
        <p>ğŸ“Œ Ø§Ø¹Ù…Ø§Ù„ Ûµ Ù¾Ø§Ø³Ø® Ø¹Ø§Ù„ÛŒ Ù¾ÛŒØ§Ù¾ÛŒ Ùˆ Ø³Ù¾Ø³ Û³ Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ â€” Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Û±.Û³ ØªØ§ Û³.Û°</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario4()">ğŸ“Š Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡</button>
            <button class="btn" onclick="markResult('scenario4', true)">âœ… Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø¹Ø§ÛŒØª Ø´Ø¯Ù‡</button>
            <button class="btn" onclick="markResult('scenario4', false)">âŒ Ù†Ù‚Ø¶ Ú©Ø±Ø§Ù†</button>
        </div>
        <p id="status4"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Ûµ: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù† Û²Û° Ø¯Ø±Ø³ Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø§Ø± Ù…Ø±ÙˆØ± -->
    <div class="scenario-card" id="scenario5">
        <div class="scenario-title">
            <span>ğŸ”µ Ûµ. Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ø± Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ (Û²Û° Ø¯Ø±Ø³ Ù…ØªÙ†ÙˆØ¹)</span>
        </div>
        <p>ğŸ“Œ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Û²Û° Ø¯Ø±Ø³ Ø¨Ø§ ÙÙˆØ§ØµÙ„ Ùˆ ØªÚ©Ø±Ø§Ø±Ù‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒØŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Û±Û° Ø¯Ø±Ø³ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¯Ø§Ø±</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario5()">âš¡ Ø§Ø¬Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ</button>
            <button class="btn" onclick="markResult('scenario5', true)">âœ… Ù†ØªÛŒØ¬Ù‡ Ù…Ù†Ø·Ù‚ÛŒ</button>
            <button class="btn" onclick="markResult('scenario5', false)">âŒ Ù†Ø§Ù¾Ø§ÛŒØ¯Ø§Ø±</button>
        </div>
        <pre id="scenario5Output" style="background: #e6f7ff; padding: 8px; margin-top: 10px; direction: ltr; max-height: 150px;"></pre>
        <p id="status5"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û¶: ØªÙˆØ²ÛŒØ¹ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø±ÙˆØ± Ø¯Ø± Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¢ØªÛŒ -->
    <div class="scenario-card" id="scenario6">
        <div class="scenario-title">
            <span>ğŸŸ£ Û¶. Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ ÙØ±Ø¯Ø§ Ùˆ Û· Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡</span>
        </div>
        <p>ğŸ“Œ Ø§Ø² Ù…ÛŒØ§Ù† Û±Ûµ Ø¯Ø±Ø³ØŒ Ú©Ø¯Ø§Ù…â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ ÙØ±Ø¯Ø§ Ù…Ø±ÙˆØ± Ø´ÙˆÙ†Ø¯ØŸ</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario6()">ğŸ“… ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø±ÙˆØ±</button>
            <button class="btn" onclick="markResult('scenario6', true)">âœ… Ù…Ù†Ø·Ù‚ÛŒ Ø§Ø³Øª</button>
            <button class="btn" onclick="markResult('scenario6', false)">âŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§ØµÙ„Ø§Ø­</button>
        </div>
        <div id="scenario6Output" style="margin-top: 12px;"></div>
        <p id="status6"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û·: ØªØ±Ú©ÛŒØ¨ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ùˆ ØªØºÛŒÛŒØ± Ø§ÙˆÙ„ÙˆÛŒØª Ù¾ÙˆÛŒØ§ -->
    <div class="scenario-card" id="scenario7">
        <div class="scenario-title">
            <span>ğŸŸ¤ Û·. Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾ÙˆÛŒØ§ Ù¾Ø³ Ø§Ø² Ù¾Ø§Ø³Ø® Ù…ØªÙˆØ§Ù„ÛŒ</span>
        </div>
        <p>ğŸ“Œ Ø³Ù‡ Ø¯Ø±Ø³ G, H, I â€” Ø§Ø¹Ù…Ø§Ù„ Ú©ÛŒÙÛŒØªâ€ŒÙ‡Ø§ÛŒ Ûµ, Û², Û´ â€” Ø¨Ø±Ø±Ø³ÛŒ Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario7()">ğŸ”„ ØªØºÛŒÛŒØ± Ùˆ Ø§ÙˆÙ„ÙˆÛŒØª Ø¬Ø¯ÛŒØ¯</button>
            <button class="btn" onclick="markResult('scenario7', true)">âœ… ØªØ£ÛŒÛŒØ¯</button>
            <button class="btn" onclick="markResult('scenario7', false)">âŒ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ø¯</button>
        </div>
        <p id="status7"></p>
    </div>

    <!-- Ø³Ù†Ø§Ø±ÛŒÙˆ Û¸: Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ Ùˆ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø­ØªÙ…Ù„ -->
    <div class="scenario-card" id="scenario8">
        <div class="scenario-title">
            <span>âš« Û¸. Ø±ÙØªØ§Ø± Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ù…Ø±Ø²ÛŒ (ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±)</span>
        </div>
        <p>ğŸ“Œ Ú©ÛŒÙÛŒØª Û·ØŒ ØªÚ©Ø±Ø§Ø± Ù…Ù†ÙÛŒØŒ ÙØ§ØµÙ„Ù‡ ØµÙØ± â€” Ø¢ÛŒØ§ Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ</p>
        <div class="flex-row">
            <button class="btn btn-primary" onclick="runScenario8()">âš ï¸ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§</button>
            <button class="btn" onclick="markResult('scenario8', true)">âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ ØµØ­ÛŒØ­</button>
            <button class="btn" onclick="markResult('scenario8', false)">âŒ Ø®Ø·Ø§ Ù‚ÙˆØ±Øª Ø¯Ø§Ø¯Ù‡ Ø´Ø¯</button>
        </div>
        <p id="status8" style="color: #b45309;"></p>
    </div>

    <!-- Ù¾Ù†Ù„ Ù„Ø§Ú¯ Ùˆ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø³ØªÛŒ -->
    <div style="background: white; border-radius: 20px; padding: 20px; margin: 30px 0;">
        <h3 style="display: flex; gap: 10px; margin-bottom: 16px;">ğŸ“‹ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø³ØªÛŒ ØªØ³Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;" id="checklist">
            <label><input type="checkbox" id="c1"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û± - Ø§ÙˆÙ„ÙˆÛŒØª ØªØ£Ø®ÛŒØ±</label>
            <label><input type="checkbox" id="c2"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û² - Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ</label>
            <label><input type="checkbox" id="c3"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û³ - Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯/Ù…Ø±ÙˆØ±</label>
            <label><input type="checkbox" id="c4"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û´ - Ú©Ø±Ø§Ù† EF</label>
            <label><input type="checkbox" id="c5"> Ø³Ù†Ø§Ø±ÛŒÙˆ Ûµ - Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§</label>
            <label><input type="checkbox" id="c6"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û¶ - ØªÙˆØ²ÛŒØ¹ Ù…Ø±ÙˆØ±</label>
            <label><input type="checkbox" id="c7"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û· - Ø§ÙˆÙ„ÙˆÛŒØª Ù¾ÙˆÛŒØ§</label>
            <label><input type="checkbox" id="c8"> Ø³Ù†Ø§Ø±ÛŒÙˆ Û¸ - Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù…Ø±Ø²ÛŒ</label>
        </div>
        <button class="btn btn-success" style="width: 100%; margin-top: 20px;" onclick="exportReport()">ğŸ“¤ Ø°Ø®ÛŒØ±Ù‡ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø³ØªÛŒ</button>
    </div>

    <div class="log-panel" id="logPanel">
        â³ Ù…Ù†ØªØ¸Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ† Ø³Ù†Ø§Ø±ÛŒÙˆ...
    </div>

    <div class="footer">
        âœ… Ø§ÛŒÙ† ØªØ³Øª Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø³ØªÛŒ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ â€” Ù‡Ø± Ø³Ù†Ø§Ø±ÛŒÙˆ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ù…Ø¬Ø²Ø§ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
    </div>

    <script>
        // ---------- Ù‡Ø³ØªÙ‡ SRS (Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…Ø´Ø§Ø¨Ù‡ Ù†Ø³Ø®Ù‡ Ø§ØµÙ„ÛŒ) ----------
        class SRSScheduler {
            constructor() {
                this.defaultEaseFactor = 2.5;
                this.minEaseFactor = 1.3;
                this.maxEaseFactor = 3.0;
            }
            calculateNextReview(quality, repetitions, easeFactor, interval = 0) {
                if (quality < 0 || quality > 5) throw new Error('Ú©ÛŒÙÛŒØª Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û° ØªØ§ Ûµ Ø¨Ø§Ø´Ø¯');
                if (repetitions < 0) throw new Error('ØªÚ©Ø±Ø§Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ù†ÙÛŒ Ø¨Ø§Ø´Ø¯');
                if (quality < 3) {
                    return {
                        interval: 1,
                        repetitions: 0,
                        easeFactor: Math.max(this.minEaseFactor, (easeFactor - 0.2).toFixed(2) * 1)
                    };
                }
                let newInterval;
                if (repetitions === 0) newInterval = 1;
                else if (repetitions === 1) newInterval = 6;
                else newInterval = Math.round(interval * easeFactor);
                let newEaseFactor = easeFactor + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02));
                newEaseFactor = Math.max(this.minEaseFactor, Math.min(this.maxEaseFactor, newEaseFactor));
                newEaseFactor = Math.round(newEaseFactor * 100) / 100;
                return {
                    interval: newInterval,
                    repetitions: repetitions + 1,
                    easeFactor: newEaseFactor
                };
            }
            needsReview(lastReviewDate, currentDate, interval) {
                const daysPassed = Math.floor((currentDate - lastReviewDate) / (1000 * 60 * 60 * 24));
                return daysPassed >= interval;
            }
            prioritizeReviews(items) {
                return [...items].sort((a, b) => {
                    const aOverdue = a.daysOverdue || 0;
                    const bOverdue = b.daysOverdue || 0;
                    return bOverdue - aOverdue;
                });
            }
        }

        const scheduler = new SRSScheduler();
        const logPanel = document.getElementById('logPanel');

        function log(message) {
            const p = document.createElement('div');
            p.innerHTML = `â±ï¸ ${new Date().toLocaleTimeString('fa-IR')} â€” ${message}`;
            logPanel.appendChild(p);
            logPanel.scrollTop = logPanel.scrollHeight;
        }

        // ---------- Ø³Ù†Ø§Ø±ÛŒÙˆ 1 ----------
        window.runScenario1 = function() {
            const items = [
                { id: 'Ø¯Ø±Ø³ A', daysOverdue: 5 },
                { id: 'Ø¯Ø±Ø³ B', daysOverdue: 2 },
                { id: 'Ø¯Ø±Ø³ C', daysOverdue: 0 }
            ];
            const prioritized = scheduler.prioritizeReviews(items);
            let html = 'ğŸ”¹ Ø§ÙˆÙ„ÙˆÛŒØª Ù†Ù‡Ø§ÛŒÛŒ: <br>';
            prioritized.forEach((item, idx) => { html += `${idx+1}. ${item.id} (${item.daysOverdue} Ø±ÙˆØ² Ø¹Ù‚Ø¨)<br>`; });
            document.getElementById('reviewList1').innerHTML = html;
            document.getElementById('status1').innerHTML = 'âœ… Ø¢Ø²Ù…ÙˆÙ† Ø§Ø¬Ø±Ø§ Ø´Ø¯ â€“ Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ£Ø®ÛŒØ± Ø§Ø³Øª.';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û±: Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.');
        };

        window.runScenario2 = function() {
            const result = scheduler.calculateNextReview(2, 4, 2.5, 12);
            document.getElementById('reviewList2').innerHTML = `ğŸ“‰ ÙØ§ØµÙ„Ù‡ Ø¬Ø¯ÛŒØ¯: ${result.interval} Ø±ÙˆØ² | ØªÚ©Ø±Ø§Ø±: ${result.repetitions} | EF: ${result.easeFactor}`;
            document.getElementById('status2').innerHTML = 'ğŸŸ  Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ => Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Û± Ø±ÙˆØ²Ù‡. Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª.';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û²: Ù¾Ø§Ø³Ø® Ø¶Ø¹ÛŒÙ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯.');
        };

        window.runScenario3 = function() {
            const newLesson = { id: 'Ø¯Ø±Ø³ E', repetitions: 0, interval: 0, daysOverdue: 0 };
            const reviewLesson = { id: 'Ø¯Ø±Ø³ F', repetitions: 3, interval: 6, daysOverdue: 2 };
            const items = [newLesson, reviewLesson];
            const prioritized = scheduler.prioritizeReviews(items.map(i => ({ ...i, daysOverdue: i.daysOverdue })));
            let msg = `ğŸ¥‡ Ø§ÙˆÙ„ÙˆÛŒØª Ø§ÙˆÙ„: ${prioritized[0].id}`;
            document.getElementById('status3').innerHTML = msg;
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û³: Ø¯Ø±Ø³ Ø¢Ù…Ø§Ø¯Ù‡ Ù…Ø±ÙˆØ± Ù…Ù‚Ø¯Ù… Ø§Ø³Øª.');
        };

        window.runScenario4 = function() {
            let ef = 2.5;
            for (let i=0; i<5; i++) ef = scheduler.calculateNextReview(5, 3, ef, 10).easeFactor;
            for (let i=0; i<3; i++) ef = scheduler.calculateNextReview(2, 3, ef, 5).easeFactor;
            const boundPass = (ef >= 1.3 && ef <= 3.0);
            document.getElementById('status4').innerHTML = `EF Ù†Ù‡Ø§ÛŒÛŒ: ${ef} â€” ${boundPass ? 'âœ… Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù…Ø¬Ø§Ø²' : 'âŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ú©Ø±Ø§Ù†'}`;
            log(`Ø³Ù†Ø§Ø±ÛŒÙˆ Û´: EF=${ef} , Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø¹Ø§ÛŒØª Ø´Ø¯: ${boundPass}`);
        };

        window.runScenario5 = function() {
            let lessons = [];
            for (let i=1; i<=20; i++) {
                lessons.push({
                    id: `Ø¯Ø±Ø³ ${i}`,
                    interval: Math.floor(Math.random() * 30) + 1,
                    repetitions: Math.floor(Math.random() * 5),
                    easeFactor: (Math.random() * 1.5 + 1.5).toFixed(2),
                    daysOverdue: Math.floor(Math.random() * 10) - 2
                });
            }
            const top10 = scheduler.prioritizeReviews(lessons).slice(0, 10);
            let out = 'Û±Û° Ø¯Ø±Ø³ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¯Ø§Ø±:\n';
            top10.forEach((l,i) => out += `${i+1}. ${l.id} (ØªØ£Ø®ÛŒØ±: ${l.daysOverdue})\n`);
            document.getElementById('scenario5Output').innerText = out;
            document.getElementById('status5').innerHTML = 'âš¡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø­Ø¬Ù… Ø¨Ø§Ù„Ø§ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Ûµ: Û²Û° Ø¯Ø±Ø³ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯.');
        };

        window.runScenario6 = function() {
            const baseDate = new Date('2026-02-12');
            const reviews = [];
            for (let i=0; i<15; i++) {
                let interval = [1,2,4,7,15,30][Math.floor(Math.random()*6)];
                let lastDate = new Date(baseDate);
                lastDate.setDate(baseDate.getDate() - interval + 1);
                reviews.push({ id: `ÙˆØ§Ú˜Ù‡ ${i+1}`, interval, lastDate });
            }
            let tomorrowReviews = reviews.filter(r => r.interval <= 1);
            let nextWeekReviews = reviews.filter(r => r.interval <= 7 && r.interval > 1);
            document.getElementById('scenario6Output').innerHTML = `
                <div style="background:#e0f2fe; padding:10px; border-radius:10px;">
                ğŸ“… ÙØ±Ø¯Ø§: ${tomorrowReviews.length} Ø¯Ø±Ø³<br>
                ğŸ“† Û· Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡: ${nextWeekReviews.length} Ø¯Ø±Ø³
                </div>
            `;
            document.getElementById('status6').innerHTML = 'âœ… ØªÙˆØ²ÛŒØ¹ Ù…Ø±ÙˆØ± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯.';
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û¶: Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø±ÙˆØ± ÙØ±Ø¯Ø§/Ù‡ÙØªÙ‡ Ø¢ÛŒÙ†Ø¯Ù‡');
        };

        window.runScenario7 = function() {
            let items = [
                { id: 'Ø¯Ø±Ø³ G', reps: 2, ef: 2.5, interval: 6, daysOverdue: 1 },
                { id: 'Ø¯Ø±Ø³ H', reps: 1, ef: 2.3, interval: 3, daysOverdue: 2 },
                { id: 'Ø¯Ø±Ø³ I', reps: 4, ef: 2.8, interval: 20, daysOverdue: 0 }
            ];
            items[0] = { ...items[0], ...scheduler.calculateNextReview(5, items[0].reps, items[0].ef, items[0].interval) };
            items[1] = { ...items[1], ...scheduler.calculateNextReview(2, items[1].reps, items[1].ef, items[1].interval) };
            items[2] = { ...items[2], ...scheduler.calculateNextReview(4, items[2].reps, items[2].ef, items[2].interval) };
            const sorted = scheduler.prioritizeReviews(items.map(i => ({ ...i, daysOverdue: i.daysOverdue || 0 })));
            document.getElementById('status7').innerHTML = `ğŸ¥‡ Ø§ÙˆÙ„ÙˆÛŒØª Ø¬Ø¯ÛŒØ¯: ${sorted[0].id} | ${sorted[1].id} | ${sorted[2].id}`;
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û·: Ø§ÙˆÙ„ÙˆÛŒØª Ù¾ÙˆÛŒØ§ Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯.');
        };

        window.runScenario8 = function() {
            try {
                scheduler.calculateNextReview(7, 1, 2.5, 5);
                document.getElementById('status8').innerHTML = 'âŒ Ø®Ø·Ø§: ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù…Ù†Ø¬Ø± Ø¨Ù‡ Ø®Ø·Ø§ Ù†Ø´Ø¯!';
            } catch(e) {
                document.getElementById('status8').innerHTML = `âœ… Ø®Ø·Ø§ÛŒ ØµØ­ÛŒØ­: ${e.message}`;
            }
            try {
                scheduler.calculateNextReview(4, -3, 2.0, 2);
            } catch(e) {
                document.getElementById('status8').innerHTML += ` â€” Ùˆ Ù‡Ù…Ú†Ù†ÛŒÙ† ØªÚ©Ø±Ø± Ù…Ù†ÙÛŒ: ${e.message}`;
            }
            log('Ø³Ù†Ø§Ø±ÛŒÙˆ Û¸: Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ Ø¢Ø²Ù…Ø§ÛŒØ´ Ø´Ø¯.');
        };

        window.markResult = function(scenarioId, passed) {
            const statusEl = document.getElementById('status' + scenarioId.slice(-1));
            if (passed) {
                statusEl.innerHTML += ' âœ… Ú©Ø§Ø±Ø¨Ø± ØªØ£ÛŒÛŒØ¯ Ú©Ø±Ø¯.';
                statusEl.style.color = '#0f7b5a';
            } else {
                statusEl.innerHTML += ' âŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ø¯ Ú©Ø±Ø¯.';
                statusEl.style.color = '#b45309';
            }
            log(`Ø³Ù†Ø§Ø±ÛŒÙˆ ${scenarioId.slice(-1)}: ${passed ? 'ØªØ£ÛŒÛŒØ¯' : 'Ø±Ø¯'} Ø´Ø¯ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±.`);
        };

        window.exportReport = function() {
            const checks = [
                document.getElementById('c1').checked,
                document.getElementById('c2').checked,
                document.getElementById('c3').checked,
                document.getElementById('c4').checked,
                document.getElementById('c5').checked,
                document.getElementById('c6').checked,
                document.getElementById('c7').checked,
                document.getElementById('c8').checked,
            ];
            let report = 'ğŸ“‹ Ú¯Ø²Ø§Ø±Ø´ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø³ØªÛŒ SRS Prioritization\n';
            report += `ØªØ§Ø±ÛŒØ®: ${new Date().toLocaleDateString('fa-IR')}\n`;
            checks.forEach((v, i) => report += `Ø³Ù†Ø§Ø±ÛŒÙˆ ${i+1}: ${v ? 'âœ…' : 'â¬œ'}\n`);
            const total = checks.filter(Boolean).length;
            report += `\nâœ… Ù…Ø¬Ù…ÙˆØ¹ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡: ${total}/8`;
            alert(report);
            log('ğŸ“¤ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø³ØªÛŒ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯.');
        };

        // Ø§Ø¬Ø±Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø³Ù†Ø§Ø±ÛŒÙˆ Û± Ø¯Ø± Ø´Ø±ÙˆØ¹
        window.onload = function() {
            runScenario1();
            log('ğŸš€ ØªØ³Øª Ø¯Ø³ØªÛŒ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ SRS Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª.');
        };
    </script>
</body>
</html>
