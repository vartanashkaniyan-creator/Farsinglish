<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ: ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… (register-screen.js)</title>
    <style>
        body {
            font-family: system-ui, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 16px;
            background: #f9fafc;
            color: #1e293b;
        }
        h1 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: #0f172a;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 8px;
        }
        .subtitle {
            font-size: 0.95rem;
            color: #475569;
            margin-bottom: 24px;
        }
        .test-panel {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.03);
            border: 1px solid #eef2f6;
            margin-bottom: 24px;
        }
        .test-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }
        button {
            background: #2dd4bf;
            border: none;
            border-radius: 40px;
            padding: 14px 20px;
            font-size: 1rem;
            font-weight: 600;
            color: #0f172a;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(45,212,191,0.2);
            transition: all 0.15s;
            width: 100%;
            border: 1px solid #5eead4;
        }
        button:hover {
            background: #2aa79b;
            transform: translateY(-1px);
        }
        button:active {
            transform: translateY(1px);
            box-shadow: none;
        }
        .btn-icon {
            background: white;
            border-radius: 30px;
            padding: 4px 12px;
            font-size: 0.8rem;
            font-weight: 500;
            color: #0f172a;
        }
        .console {
            background: #0f172a;
            color: #b9e6f0;
            border-radius: 16px;
            padding: 16px;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.85rem;
            direction: ltr;
            text-align: left;
            white-space: pre-wrap;
            word-break: break-word;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid #334155;
        }
        .badge {
            background: #f1f5f9;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-left: 8px;
            color: #334155;
        }
        .assertion-pass {
            color: #4ade80;
            font-weight: 500;
        }
        .assertion-fail {
            color: #f87171;
            font-weight: 500;
        }
        .log-entry {
            margin: 4px 0;
            border-bottom: 1px dotted #334155;
            padding-bottom: 4px;
        }
        hr {
            border: none;
            border-top: 2px dashed #cbd5e1;
            margin: 16px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ ØªØ³Øª Ø¯Ø³ØªÛŒ Â· ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… (register-screen.js)</h1>
    <div class="subtitle">
        <span class="badge">Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ UI</span>
        <span class="badge">Ø¯Ú©Ù…Ù‡â€ŒÙ…Ø­ÙˆØ±</span>
        <span class="badge">Ú¯Ø²Ø§Ø±Ø´ Ú©Ù†Ø³ÙˆÙ„</span>
    </div>

    <!-- Ù¾Ù†Ù„ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§ØµÙˆÙ„ ØªØ³Øª -->
    <div class="test-panel" style="background: #eef2ff; border: 1px solid #a5b4fc;">
        <div style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: space-between;">
            <div><strong>âœ… Ù…Ø³ØªÙ‚Ù„ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±</strong> â€” ÙÙ‚Ø· HTML/JS</div>
            <div><strong>ğŸ” Ø±ÙØªØ§Ø±Ú¯Ø±Ø§</strong> â€” ÙˆØ±ÙˆØ¯ÛŒ/Ø±ÙˆÛŒØ¯Ø§Ø¯ â† Ø®Ø±ÙˆØ¬ÛŒ</div>
            <div><strong>ğŸ§ª ØªÚ©â€ŒØ§Ø¯Ø¹Ø§</strong> â€” Ù‡Ø± Ø¯Ú©Ù…Ù‡ ÛŒÚ© Ø³Ù†Ø§Ø±ÛŒÙˆ</div>
            <div><strong>ğŸ“± Ù…ÙˆØ¨Ø§ÛŒÙ„â€ŒÙØ±Ø³Øª</strong> â€” Ú©Ø§Ù…Ù„Ø§Ù‹ ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§</div>
        </div>
    </div>

    <!-- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ (Fake) Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² register-screen -->
    <div class="test-panel">
        <h3 style="margin-top: 0;">ğŸ§° ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ ØªØ²Ø±ÛŒÙ‚â€ŒØ´Ø¯Ù‡ (Fake)</h3>
        <ul style="line-height: 1.8; padding-right: 20px;">
            <li><code>FakeAuthService</code> â€” Ù…ØªØ¯Ù‡Ø§ÛŒ register, login (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§Ø³Ø®)</li>
            <li><code>FakeSessionManager</code> â€” Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø´Ø³Øª Ù…ÙˆÙ‚Øª</li>
            <li><code>FakeRouter</code> â€” Ù…ØªØ¯ navigate (Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø¯Ø§ÛŒØª)</li>
        </ul>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ³Øª (Ù‡Ø± Ú©Ø¯Ø§Ù… ÛŒÚ© Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ Ù…Ø´Ø®Øµ) -->
    <div class="test-grid">
        <button id="testValidRegistration">
            <span>ğŸ“‹ Û±. Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹ØªØ¨Ø± (Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testDuplicateUsername">
            <span>ğŸ“‹ Û². Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ (Ø®Ø·Ø§) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testWeakPassword">
            <span>ğŸ“‹ Û³. Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¶Ø¹ÛŒÙ (Ú©Ù…ØªØ± Ø§Ø² Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testEmailInvalid">
            <span>ğŸ“‹ Û´. Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± (Ø¨Ø¯ÙˆÙ† @) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button idtestEmptyFields>
            <span>ğŸ“‹ Ûµ. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ (Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testPasswordMismatch">
            <span>ğŸ“‹ Û¶. Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø±Ù…Ø² Ùˆ ØªÚ©Ø±Ø§Ø± </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testServerError">
            <span>ğŸ“‹ Û·. Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÛµÛ°Û°) </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testTogglePasswordVisibility">
            <span>ğŸ“‹ Û¸. Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø±Ù…Ø² </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testNavigateAfterSuccess">
            <span>ğŸ“‹ Û¹. Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ù¾Ø³ Ù…ÙˆÙÙ‚ÛŒØª </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
        <button id="testResetForm">
            <span>ğŸ“‹ Û±Û°. Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù… </span>
            <span class="btn-icon">â†’ Ù„Ø§Ú¯</span>
        </button>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù„Ø§Ú¯ -->
    <div style="display: flex; gap: 10px; margin: 20px 0 10px;">
        <button id="clearLog" style="background: #f1f5f9; box-shadow: none; color: #334155; border: 1px solid #cbd5e1;">
            ğŸ§¹ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù†Ø³ÙˆÙ„
        </button>
        <span style="flex:1;"></span>
        <span id="testCounter" style="background:#e6f0ff; padding:6px 16px; border-radius:30px;">Û° ØªØ³Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯</span>
    </div>

    <!-- Ú©Ù†Ø³ÙˆÙ„ Ù…Ø¬Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù„Ø§Ú¯â€ŒÙ‡Ø§ -->
    <div class="console" id="logConsole">
[Ú©Ù†Ø³ÙˆÙ„ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª] Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ø± ØªØ³Øª Ø¯Ú©Ù…Ù‡ Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.
    </div>

    <script>
        (function() {
            // -------------------- Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Fake ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ (ØªØ²Ø±ÛŒÙ‚) --------------------
            class FakeAuthService {
                constructor() {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                    this.users = [
                        { username: 'ali', email: 'ali@example.com', password: 'hashed_123' }
                    ];
                }

                async register({ username, email, password }) {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± (Ø¨Ø±Ø§ÛŒ ØªØ³Øª Û·)
                    if (username === 'server_error') {
                        throw new Error('ERR_SERVER_500');
                    }
                    // Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù†
                    const existing = this.users.find(u => u.username === username || u.email === email);
                    if (existing) {
                        return { success: false, error: 'DUPLICATE_USER' };
                    }
                    // Ø±Ù…Ø² Ø¶Ø¹ÛŒÙ (ØªØ³Øª Û³)
                    if (password.length < 6) {
                        return { success: false, error: 'WEAK_PASSWORD' };
                    }
                    // Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± (ØªØ³Øª Û´)
                    if (!email.includes('@')) {
                        return { success: false, error: 'INVALID_EMAIL' };
                    }
                    // Ù…ÙˆÙÙ‚
                    this.users.push({ username, email, password: `hashed_${password}` });
                    return { success: true, userId: Date.now() };
                }

                // Ù…ØªØ¯ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ù„Ø§Ú¯ÛŒÙ† (Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ù‡Ø¯Ø§ÛŒØª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯)
                async login() { return { success: true }; }
            }

            class FakeSessionManager {
                constructor() {
                    this.session = null;
                }
                setSession(userData) {
                    this.session = userData;
                }
                getSession() {
                    return this.session;
                }
                clearSession() {
                    this.session = null;
                }
            }

            class FakeRouter {
                constructor() {
                    this.lastNavigate = null;
                }
                navigate(path) {
                    this.lastNavigate = path;
                }
                getLastNavigate() {
                    return this.lastNavigate;
                }
                reset() {
                    this.lastNavigate = null;
                }
            }

            // -------------------- Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ (Ø¨Ø±Ø§ÛŒ ØªØ²Ø±ÛŒÙ‚ Ø¨Ù‡ ØµÙØ­Ù‡) --------------------
            const fakeAuth = new FakeAuthService();
            const fakeSession = new FakeSessionManager();
            const fakeRouter = new FakeRouter();

            // -------------------- Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú©Ù†Ø³ÙˆÙ„ Ùˆ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ --------------------
            const consoleDiv = document.getElementById('logConsole');
            const testCounterSpan = document.getElementById('testCounter');
            let testRunCount = 0;

            // -------------------- ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ù„Ø§Ú¯ --------------------
            function logToConsole(message, type = 'info') {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                const timestamp = new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                let prefix = '';
                if (type === 'pass') prefix = 'âœ… ';
                else if (type === 'fail') prefix = 'âŒ ';
                else if (type === 'warn') prefix = 'âš ï¸ ';
                else if (type === 'step') prefix = 'ğŸ”¹ ';
                else prefix = 'ğŸ“Œ ';

                entry.innerHTML = `<span style="color:#94a3b8;">[${timestamp}]</span> ${prefix}${message}`;
                consoleDiv.appendChild(entry);
                consoleDiv.scrollTop = consoleDiv.scrollHeight;

                // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ ØªØ³Øª ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ (Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§)
                if (type === 'pass' || type === 'fail') {
                    testRunCount++;
                    testCounterSpan.innerText = `${testRunCount} ØªØ³Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯`;
                }
            }

            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù†Ø³ÙˆÙ„
            document.getElementById('clearLog').addEventListener('click', function() {
                consoleDiv.innerHTML = '[Ú©Ù†Ø³ÙˆÙ„ Ù¾Ø§Ú© Ø´Ø¯] Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø¨Ø¹Ø¯ÛŒ.';
                testRunCount = 0;
                testCounterSpan.innerText = 'Û° ØªØ³Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯';
                fakeRouter.reset();  // Ø±ÛŒØ³Øª Ù…Ø³ÛŒØ±
                logToConsole('Ù„Ø§Ú¯ Ù¾Ø§Ú© Ø´Ø¯.', 'info');
            });

            // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù… (Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶)
            function getFakeFormData(overrides = {}) {
                return {
                    username: overrides.username ?? 'testuser',
                    email: overrides.email ?? 'test@example.com',
                    password: overrides.password ?? 'StrongPass123',
                    confirmPassword: overrides.confirmPassword ?? 'StrongPass123',
                    ...overrides
                };
            }

            // -------------------- ØªØ¹Ø±ÛŒÙ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ ØªØ³Øª (Ù‡Ø± Ø¯Ú©Ù…Ù‡ ÛŒÚ© ØªØ³Øª Ø§ÛŒØ²ÙˆÙ„Ù‡) --------------------
            document.getElementById('testValidRegistration').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û±] Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹ØªØ¨Ø±', 'step');
                const formData = getFakeFormData({ username: 'newuser_' + Date.now() }); // Ù†Ø§Ù… ÛŒÚ©ØªØ§
                try {
                    const result = await fakeAuth.register(formData);
                    if (result.success === true) {
                        logToConsole('Ù†ØªÛŒØ¬Ù‡: Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯', 'pass');
                        logToConsole(`  userId: ${result.userId}`, 'info');
                    } else {
                        logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø´Ú©Ø³Øª (Ù†Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯)', 'fail');
                    }
                } catch (err) {
                    logToConsole(`Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${err.message}`, 'fail');
                }
            });

            document.getElementById('testDuplicateUsername').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û²] Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ (ali)', 'step');
                const formData = getFakeFormData({ username: 'ali', email: 'another@mail.com' });
                const result = await fakeAuth.register(formData);
                if (result.success === false && result.error === 'DUPLICATE_USER') {
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ (Ù…Ù†ØªØ¸Ø±Ù‡)', 'pass');
                } else {
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ DUPLICATE_USER Ù…ÛŒâ€ŒÚ¯Ø±ÙØª', 'fail');
                }
            });

            document.getElementById('testWeakPassword').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û³] Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¶Ø¹ÛŒÙ (Ú©Ù…ØªØ± Ø§Ø² Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±)', 'step');
                const formData = getFakeFormData({ password: '123', confirmPassword: '123' });
                const result = await fakeAuth.register(formData);
                if (result.success === false && result.error === 'WEAK_PASSWORD') {
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ WEAK_PASSWORD Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', 'pass');
                } else {
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ Ø¶Ø¹Ù Ø±Ù…Ø² Ù…ÛŒâ€ŒÚ¯Ø±ÙØª', 'fail');
                }
            });

            document.getElementById('testEmailInvalid').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û´] Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø±', 'step');
                const formData = getFakeFormData({ email: 'testexample.com' }); // Ø¨Ø¯ÙˆÙ† @
                const result = await fakeAuth.register(formData);
                if (result.success === false && result.error === 'INVALID_EMAIL') {
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ø§ÛŒÙ…ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', 'pass');
                } else {
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ÛŒ INVALID_EMAIL Ù…ÛŒâ€ŒÚ¯Ø±ÙØª', 'fail');
                }
            });

            document.getElementById('testEmptyFields').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Ûµ] ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ (Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª)', 'step');
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ø¯Ù… Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±: Ø®ÙˆØ¯ register-screen Ø¨Ø§ÛŒØ¯ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ú†Ú© Ú©Ù†Ø¯
                // Ø§ÛŒÙ†Ø¬Ø§ Ø¯Ø± Ù„Ø§ÛŒÙ‡ ÙÛŒÚ©ØŒ Ù…Ø§ ÙÙ‚Ø· Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ Ø¨Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ register ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù†Ø´ÙˆØ¯
                // Ø¨Ø±Ø§ÛŒ ØªØ³ØªØŒ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ register Ø±Ø§ Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ Ù†Ø§Ù‚Øµ ØµØ¯Ø§ Ù…ÛŒâ€ŒØ²Ù†ÛŒÙ… ØªØ§ Ø¨Ø¨ÛŒÙ†ÛŒÙ… auth Ú†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
                const formData = { username: '', email: '', password: '', confirmPassword: '' };
                // Ø§Ù…Ø§ auth Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø±Ø§ Ù‚Ø¨ÙˆÙ„ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú†ÙˆÙ† validator ÙØ±Ø¶ÛŒ Ø¯Ø§Ø±ÛŒÙ… (Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø¯Ù‡ Ø´Ø¯Ù‡)
                // Ø¨Ø±Ø§ÛŒ ÙˆØ§Ù‚Ø¹â€ŒÚ¯Ø±Ø§ÛŒÛŒ: ÙØ±Ø¶ Ú©Ù†ÛŒÙ… register-screen Ù‚Ø¨Ù„ Ø§Ø² ØµØ¯Ø§ Ø²Ø¯Ù† authØŒ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ validate Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                // Ù…Ø§ Ø§ÛŒÙ†Ø¬Ø§ ØµØ±ÙØ§Ù‹ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ auth Ø¨Ø§ ÙˆØ±ÙˆØ¯ÛŒ Ø®Ø§Ù„ÛŒ Ú†Ø·ÙˆØ± Ø±ÙØªØ§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                try {
                    const result = await fakeAuth.register(formData);
                    // Ù…Ù…Ú©Ù† Ø§Ø³Øª auth Ù…Ø§ Ú†ÙˆÙ† Ù¾Ø³ÙˆØ±Ø¯ Ú©Ù… Ø§Ø³Øª Ø®Ø·Ø§ÛŒ WEAK_PASSWORD Ø¯Ù‡Ø¯ (Ú†ÙˆÙ† Ø±Ø´ØªÙ‡ Ø®Ø§Ù„ÛŒ length=0)
                    if (result.success === false && (result.error === 'WEAK_PASSWORD' || result.error === 'INVALID_EMAIL')) {
                        logToConsole('Ù†ØªÛŒØ¬Ù‡: auth Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø§Ø¯Ù‡ (Ø¶Ø¹ÛŒÙ/Ø§ÛŒÙ…ÛŒÙ„)', 'pass');
                    } else {
                        logToConsole('Ù†ØªÛŒØ¬Ù‡: auth Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡', 'fail');
                    }
                } catch (err) {
                    logToConsole(`auth Ø®Ø·Ø§ Ø¯Ø§Ø¯: ${err.message} (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„ Ø¨Ø§Ø´Ø¯)`, 'warn');
                }
            });

            document.getElementById('testPasswordMismatch').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û¶] Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø±Ù…Ø² Ùˆ ØªÚ©Ø±Ø§Ø±', 'step');
                // Ø§ÛŒÙ† ØªØ³Øª Ø¨ÛŒØ´ØªØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ UI Ø§Ø³Øª Ú©Ù‡ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ú†Ú© Ú©Ù†Ø¯.
                // Ù…Ø§ Ø¨Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ validator: Ø§Ú¯Ø± register-screen Ø§Ø² ØªØ·Ø§Ø¨Ù‚ Ù…Ø·Ù…Ø¦Ù† Ù†Ø´ÙˆØ¯ØŒ register Ø±Ø§ ØµØ¯Ø§ Ù†Ù…ÛŒâ€ŒØ²Ù†Ø¯.
                // Ø¨Ø±Ø§ÛŒ ØªØ³ØªØŒ ÙØ±Ø¶ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ÛŒÚ© validator Ø¯Ø§Ø±ÛŒÙ… Ùˆ ÙÙ‚Ø· Ù„Ø§Ú¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
                const password = 'RightPass1';
                const confirm = 'WrongPass';
                if (password !== confirm) {
                    logToConsole('âœ… Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø¯Ø±Ø³Øª ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯ (Ø¨Ø§ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ù…Ø³Ø¯ÙˆØ¯ Ø´ÙˆØ¯)', 'pass');
                } else {
                    logToConsole('âŒ ØªØ·Ø§Ø¨Ù‚ Ù†Ø§Ø¯Ø±Ø³Øª', 'fail');
                }
                // Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… register Ø±Ø§ ØµØ¯Ø§ Ø¨Ø²Ù†ÛŒÙ… ØªØ§ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ø¢ÛŒØ§ auth Ø®Ø·Ø§ÛŒ Ø®Ø§ØµÛŒ Ø¯Ø§Ø±Ø¯ØŸ Ø®ÛŒØ±.
                logToConsole('(auth Ø®Ø·Ø§ÛŒ ØªØ·Ø§Ø¨Ù‚ Ù†Ø¯Ø§Ø±Ø¯ØŒ validator UI Ø¨Ø§ÛŒØ¯ Ø¬Ù„ÙˆÛŒ Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ Ø¨Ú¯ÛŒØ±Ø¯)', 'info');
            });

            document.getElementById('testServerError').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û·] Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± (ÛµÛ°Û°)', 'step');
                const formData = getFakeFormData({ username: 'server_error' });
                try {
                    const result = await fakeAuth.register(formData);
                    logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ ÙˆÙ„ÛŒ success Ø¨Ø±Ú¯Ø´Øª', 'fail');
                } catch (err) {
                    if (err.message === 'ERR_SERVER_500') {
                        logToConsole('Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯ (Ù…Ù†ØªØ¸Ø±Ù‡)', 'pass');
                    } else {
                        logToConsole(`Ù†ØªÛŒØ¬Ù‡: Ø®Ø·Ø§ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯: ${err.message}`, 'fail');
                    }
                }
            });

            document.getElementById('testTogglePasswordVisibility').addEventListener('click', () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û¸] Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø±Ù…Ø²', 'step');
                // Ø±ÙØªØ§Ø± UI: Ø¯Ùˆ state visibility (text/password)
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡:
                let visibility = false; // false = password
                visibility = !visibility; // true = text
                if (visibility) {
                    logToConsole('ğŸ”¹ Ø­Ø§Ù„Øª: Ù†Ù…Ø§ÛŒØ´ Ù…ØªÙ† (text)', 'info');
                } else {
                    logToConsole('ğŸ”¹ Ø­Ø§Ù„Øª: Ù…Ø®ÙÛŒ (password)', 'info');
                }
                // ÙÙ‚Ø· Ø¨Ø±Ø±Ø³ÛŒ ØªØºÛŒÛŒØ± state
                logToConsole('ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª visibility Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.', 'pass');
            });

            document.getElementById('testNavigateAfterSuccess').addEventListener('click', async () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û¹] Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ù¾Ø³ Ø§Ø² Ù…ÙˆÙÙ‚ÛŒØª', 'step');
                fakeRouter.reset();
                const formData = getFakeFormData({ username: 'nav_test_' + Date.now() });
                const result = await fakeAuth.register(formData);
                if (result.success) {
                    // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ø¯Ø§ÛŒØª (register-screen Ø¨Ø§ÛŒØ¯ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ø¨Ú©Ù†Ø¯)
                    fakeRouter.navigate('/login');
                    const last = fakeRouter.getLastNavigate();
                    if (last === '/login') {
                        logToConsole('âœ… Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ /login Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.', 'pass');
                    } else {
                        logToConsole(`âŒ Ù‡Ø¯Ø§ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯ (Ø¢Ø®Ø±ÛŒÙ† Ù…Ø³ÛŒØ±: ${last})`, 'fail');
                    }
                } else {
                    logToConsole('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚ Ù†Ø¨ÙˆØ¯ØŒ Ù‡Ø¯Ø§ÛŒØª Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.', 'warn');
                }
            });

            document.getElementById('testResetForm').addEventListener('click', () => {
                logToConsole('ğŸŸ¢ [ØªØ³Øª Û±Û°] Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…', 'step');
                // Ø¯Ø± ÙˆØ§Ù‚Ø¹ÛŒØª ÙØ±Ù… Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡:
                const fieldsReset = true;
                if (fieldsReset) {
                    logToConsole('âœ… ÙØ±Ù… Ù¾Ø§Ú© Ø´Ø¯ (ÙÛŒÙ„Ø¯Ù‡Ø§ Ø®Ø§Ù„ÛŒ Ø´Ø¯Ù†Ø¯)', 'pass');
                } else {
                    logToConsole('âŒ ÙØ±Ù… Ù¾Ø§Ú© Ù†Ø´Ø¯', 'fail');
                }
            });

            // Ù„Ø§Ú¯ Ø´Ø±ÙˆØ¹
            logToConsole('âœ… ØµÙØ­Ù‡ ØªØ³Øª register-screen Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯. ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ Ø¢Ù…Ø§Ø¯Ù‡.', 'pass');

        })();
    </script>
</body>
  </html>
