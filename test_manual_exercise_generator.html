<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ: ØªÙˆÙ„ÛŒØ¯ ØªÙ…Ø±ÛŒÙ† ØªØµØ§Ø¯ÙÛŒ Ø¨Ø§ Seed Ø«Ø§Ø¨Øª - Farsinglish</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Tahoma', 'Vazir', 'Arial', sans-serif;
            background: linear-gradient(145deg, #f6f9fc 0%, #e9f2f8 100%);
            padding: 20px 16px;
            color: #1a3e50;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            font-size: 1.9rem;
            background: #0b4f6c;
            color: white;
            padding: 18px 22px;
            border-radius: 40px 40px 20px 20px;
            box-shadow: 0 10px 20px rgba(0,20,30,0.2);
            text-align: center;
            letter-spacing: 1px;
            margin-bottom: 25px;
            border-bottom: 6px solid #ffb74d;
            word-break: break-word;
        }
        .card {
            background: rgba(255,255,255,0.85);
            backdrop-filter: blur(8px);
            border-radius: 28px;
            padding: 22px 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 24px rgba(0,50,70,0.12);
            border: 1px solid rgba(255,255,255,0.6);
        }
        h2 {
            font-size: 1.5rem;
            color: #0a3142;
            border-right: 8px solid #ff9800;
            padding-right: 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        button {
            background: #0e5c6b;
            border: none;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            padding: 16px 24px;
            border-radius: 50px;
            width: 100%;
            margin: 12px 0;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 6px 0 #06323b;
            border-bottom: 3px solid #ffb74d;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        button:hover, button:active {
            background: #136f82;
            transform: translateY(4px);
            box-shadow: 0 2px 0 #06323b;
        }
        .seed-panel {
            background: #263238;
            color: #e2f0f9;
            padding: 18px;
            border-radius: 18px;
            margin: 20px 0;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
        }
        .seed-value {
            background: #37474f;
            padding: 10px 18px;
            border-radius: 40px;
            color: #ffb74d;
            font-weight: bold;
            font-size: 1.3rem;
            letter-spacing: 3px;
            direction: ltr;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            justify-content: space-between;
        }
        .col {
            flex: 1 1 260px;
            background: #ffffffdd;
            padding: 16px;
            border-radius: 20px;
            box-shadow: inset 0 1px 4px #0000001a;
        }
        .exercise-box {
            background: #fdf8e7;
            border: 2px dashed #2a7f6e;
            border-radius: 24px;
            padding: 24px 16px;
            margin-top: 12px;
        }
        .badge {
            display: inline-block;
            background: #00acc1;
            color: white;
            padding: 6px 16px;
            border-radius: 40px;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }
        .option-btn {
            background: white;
            border: 2px solid #2e7d73;
            color: #034748;
            padding: 14px;
            border-radius: 16px;
            margin: 8px 0;
            text-align: right;
            font-size: 1.1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .console {
            background: #0d1c24;
            color: #bebebe;
            padding: 18px;
            border-radius: 16px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            direction: ltr;
            text-align: left;
            max-height: 250px;
            overflow-y: auto;
            margin-top: 18px;
            border-left: 6px solid #ffb74d;
        }
        .success { color: #a5d6a5; }
        .fail { color: #ffab91; }
        hr { margin: 30px 0 10px; border: 2px dotted #80cbc4; }
    </style>
</head>
<body>
<div class="container">

    <h1>ğŸ§ªğŸ² ØªØ³Øª Ø¯Ø³ØªÛŒ: Ù…ÙˆÙ„Ø¯ ØªÙ…Ø±ÛŒÙ† ØªØµØ§Ø¯ÙÛŒ<br>Ø¨Ø§ Seed Ø«Ø§Ø¨Øª</h1>

    <div class="card" style="background:#e0f2fe;">
        <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
            <span style="background: #004d40; padding:10px 18px; border-radius:50px; color:white;">ğŸ”¢ SEED ÙØ¹Ù„ÛŒ:</span>
            <span id="seedDisplay" class="seed-value">12345</span>
            <button id="newSeedBtn" style="width:auto; padding:12px 25px; background:#2a5c5a;">ğŸ² ØªØºÛŒÛŒØ± Seed</button>
            <button id="resetSeedBtn" style="width:auto; padding:12px 25px; background:#5f4330;">â†©ï¸ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¨Ù‡ 12345</button>
        </div>
        <p style="margin-top:16px; background: #fff3e0; padding:14px; border-radius:20px;">
        ğŸ“Œ <strong>Ø®Ø§ØµÛŒØª seed Ø«Ø§Ø¨Øª:</strong> Ø§Ú¯Ø± Seed ÛŒÚ©Ø³Ø§Ù† Ø¨Ø§Ø´Ø¯ØŒ ØªØ±ØªÛŒØ¨ Ùˆ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ø¨Ø§ÛŒØ¯ <strong style="color:#b3431b;">Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ ÛŒÚ©Ø³Ø§Ù†</strong> ØªÙˆÙ„ÛŒØ¯ Ø´ÙˆÙ†Ø¯. Ø§ÛŒÙ† ØªØ³Øª Ø¯Ø³ØªÛŒ Ø§ÛŒÙ† ÙˆÛŒÚ˜Ú¯ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
        </p>
    </div>

    <!-- ==========  Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ========== -->
    <div class="card">
        <h2>ğŸ§· Û±. Ú©Ù†ØªØ±Ù„ Ù…ÙˆÙ„Ø¯ ØªÙ…Ø±ÛŒÙ†</h2>
        <div class="row">
            <div class="col">
                <span class="badge">ğŸ“˜ Ù†ÙˆØ¹ ØªÙ…Ø±ÛŒÙ† Û±</span>
                <button id="genMultipleChoiceBtn" style="background:#00796b;">â“ ØªÙˆÙ„ÛŒØ¯ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ</button>
                <button id="genFillBlankBtn" style="background:#5d4037;">âœï¸ ØªÙˆÙ„ÛŒØ¯ Ø¬Ø§ÛŒâ€ŒØ®Ø§Ù„ÛŒ</button>
            </div>
            <div class="col">
                <span class="badge">ğŸ” Ù†ÙˆØ¹ ØªÙ…Ø±ÛŒÙ† Û²</span>
                <button id="genTranslationBtn" style="background:#4a6c6f;">ğŸŒ ØªÙˆÙ„ÛŒØ¯ ØªØ±Ø¬Ù…Ù‡</button>
                <button id="genMatchingBtn" style="background:#6a4e7a;">ğŸ”— ØªÙˆÙ„ÛŒØ¯ ØªØ·Ø¨ÛŒÙ‚</button>
            </div>
        </div>
        <button id="seedBasedComparisonBtn" style="background:#b06e36; margin-top:25px;">ğŸ”„ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ùˆ ØªÙ…Ø±ÛŒÙ† Ø¨Ø§ SEED ÛŒÚ©Ø³Ø§Ù† (Ù…Ù‚Ø§ÛŒØ³Ù‡)</button>
    </div>

    <!-- ==========  Ù†Ù…Ø§ÛŒØ´ ØªÙ…Ø±ÛŒÙ† ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ ========== -->
    <div class="card exercise-box" id="exerciseDisplayArea">
        <div style="display:flex; justify-content:space-between;">
            <span style="background: #004d40; padding:8px 18px; border-radius: 30px; color:white;">ğŸ§¾ Ø¢Ø®Ø±ÛŒÙ† ØªÙ…Ø±ÛŒÙ† ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡</span>
            <span id="exerciseTypeTag" style="background: #ab8b5a; padding:8px 20px; border-radius:30px; color:white;">-</span>
        </div>
        <div id="exerciseContent" style="font-size:1.5rem; padding:30px 10px; text-align:center; background:#fff9c4; border-radius:28px; margin-top:15px;">
            Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ ØªÙ…Ø±ÛŒÙ† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ÙØ´Ø§Ø± Ø¯Ù‡ÛŒØ¯
        </div>
        <div id="exerciseOptions" style="margin-top:20px;">
            <!-- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ -->
        </div>
        <div id="metaInfo" style="margin-top:18px; color:#37474f; background:#eceff1; padding:12px; border-radius:18px; font-size:0.9rem;"></div>
    </div>

    <!-- ==========  Ù„Ø§Ú¯ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÛŒ ========== -->
    <div class="card">
        <h2>ğŸ“‹ Ú¯Ø²Ø§Ø±Ø´ ØªØ³Øª Ø¯Ø³ØªÛŒ</h2>
        <div style="display:flex; gap:10px; margin-bottom:15px;">
            <button id="clearLogBtn" style="background:#4e5b66;">ğŸ§¹ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù„Ø§Ú¯</button>
            <button id="compareTwoSeedsBtn" style="background:#6d4c41;">âš–ï¸ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Seed Ù…ØªÙØ§ÙˆØª</button>
        </div>
        <div id="logConsole" class="console">
            â±ï¸ Ù…Ù†ØªØ¸Ø± Ø¹Ù…Ù„ÛŒØ§Øª...
        </div>
    </div>

    <hr>
    <div style="text-align:center; color:#2c3e50; padding:20px;">
        âœ… Farsinglish â€” ØªØ³Øª Ø¯Ø³ØªÛŒ ØªØµØ§Ø¯ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ú©Ù†ØªØ±Ù„â€ŒØ´Ø¯Ù‡ Ø¨Ø§ Seed
    </div>
</div>

<script>
// =======================================================
// ğŸ²  Ú©Ù„Ø§Ø³ Ù…ÙˆÙ„Ø¯ ØªÙ…Ø±ÛŒÙ† ØªØµØ§Ø¯ÙÛŒ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Seed Ø«Ø§Ø¨Øª
// =======================================================
class ExerciseGenerator {
    constructor(seed = 12345) {
        this.seed = seed;
        // Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ÙˆØ§Ú˜Ú¯Ø§Ù† Ù†Ù…ÙˆÙ†Ù‡
        this.vocabBank = [
            { id: 1, word: "apple", meaning: "Ø³ÛŒØ¨", phonetic: "/ËˆÃ¦p.É™l/" },
            { id: 2, word: "dog", meaning: "Ø³Ú¯", phonetic: "/dÉ’É¡/" },
            { id: 3, word: "cat", meaning: "Ú¯Ø±Ø¨Ù‡", phonetic: "/kÃ¦t/" },
            { id: 4, word: "book", meaning: "Ú©ØªØ§Ø¨", phonetic: "/bÊŠk/" },
            { id: 5, word: "car", meaning: "Ù…Ø§Ø´ÛŒÙ†", phonetic: "/kÉ‘Ër/" },
            { id: 6, word: "house", meaning: "Ø®Ø§Ù†Ù‡", phonetic: "/haÊŠs/" },
            { id: 7, word: "tree", meaning: "Ø¯Ø±Ø®Øª", phonetic: "/triË/" },
            { id: 8, word: "sun", meaning: "Ø®ÙˆØ±Ø´ÛŒØ¯", phonetic: "/sÊŒn/" },
            { id: 9, word: "moon", meaning: "Ù…Ø§Ù‡", phonetic: "/muËn/" },
            { id: 10, word: "star", meaning: "Ø³ØªØ§Ø±Ù‡", phonetic: "/stÉ‘Ër/" },
            { id: 11, word: "water", meaning: "Ø¢Ø¨", phonetic: "/ËˆwÉ”Ë.tÉ™r/" },
            { id: 12, word: "fire", meaning: "Ø¢ØªØ´", phonetic: "/faÉªÉ™r/" },
            { id: 13, word: "blue", meaning: "Ø¢Ø¨ÛŒ", phonetic: "/bluË/" },
            { id: 14, word: "red", meaning: "Ù‚Ø±Ù…Ø²", phonetic: "/red/" },
            { id: 15, word: "green", meaning: "Ø³Ø¨Ø²", phonetic: "/É¡riËn/" }
        ];
    }

    // Ù…ÙˆÙ„Ø¯ Ø§Ø¹Ø¯Ø§Ø¯ Ø´Ø¨Ù‡ ØªØµØ§Ø¯ÙÛŒ Ø¨Ø§ seed (Linear Congruential Generator)
    random() {
        const a = 1664525;
        const c = 1013904223;
        const m = Math.pow(2, 32);
        this.seed = (a * this.seed + c) % m;
        return this.seed / m;
    }

    // ØªÙ†Ø¸ÛŒÙ… Seed Ø¬Ø¯ÛŒØ¯
    setSeed(seed) {
        this.seed = seed;
    }

    // Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ ÛŒÚ© Ø¢ÛŒØªÙ… Ø§Ø² Ø¢Ø±Ø§ÛŒÙ‡ Ø¨Ø§ ÙˆØ²Ù† ÛŒÚ©Ø³Ø§Ù†
    randomItem(array) {
        const idx = Math.floor(this.random() * array.length);
        return array[idx];
    }

    // ØªÙˆÙ„ÛŒØ¯ Ø¢Ø±Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ø§Ø² Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ (Ø¨Ø¯ÙˆÙ† ØªÚ©Ø±Ø§Ø±)
    randomDistinctItems(array, count) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(this.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled.slice(0, count);
    }

    // --- Û±. ØªÙˆÙ„ÛŒØ¯ Ø³ÙˆØ§Ù„ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ ---
    generateMultipleChoice(correctVocab = null) {
        const target = correctVocab || this.randomItem(this.vocabBank);
        // Ø§Ù†ØªØ®Ø§Ø¨ Û³ Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø² Ø¨ÛŒÙ† Ø¨Ù‚ÛŒÙ‡ ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§
        const otherVocabs = this.vocabBank.filter(v => v.id !== target.id);
        const wrongChoices = this.randomDistinctItems(otherVocabs, 3).map(v => v.meaning);
        const choices = [target.meaning, ...wrongChoices];
        // Ø¨Ù‡ Ù‡Ù… Ø²Ø¯Ù† ØªØ±ØªÛŒØ¨ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ø§ seed)
        for (let i = choices.length - 1; i > 0; i--) {
            const j = Math.floor(this.random() * (i + 1));
            [choices[i], choices[j]] = [choices[j], choices[i]];
        }
        return {
            type: 'multiple-choice',
            question: `Ù…Ø¹Ù†ÛŒ Ú©Ù„Ù…Ù‡ "${target.word}" Ú†ÛŒØ³ØªØŸ`,
            correctAnswer: target.meaning,
            choices: choices,
            phonetic: target.phonetic,
            vocabId: target.id
        };
    }

    // --- Û². ØªÙˆÙ„ÛŒØ¯ Ø³ÙˆØ§Ù„ Ø¬Ø§ÛŒâ€ŒØ®Ø§Ù„ÛŒ ---
    generateFillBlank(correctVocab = null) {
        const target = correctVocab || this.randomItem(this.vocabBank);
        const sentenceTemplates = [
            `I have a ___ .`,
            `Look at that ___ .`,
            `The ___ is beautiful.`,
            `This ___ is new.`,
            `She likes the ___ .`
        ];
        const template = this.randomItem(sentenceTemplates);
        return {
            type: 'fill-blank',
            question: template.replace('___', '______'),
            correctAnswer: target.word,
            meaning: target.meaning,
            vocabId: target.id
        };
    }

    // --- Û³. ØªÙˆÙ„ÛŒØ¯ Ø³ÙˆØ§Ù„ ØªØ±Ø¬Ù…Ù‡ ---
    generateTranslation(correctVocab = null) {
        const target = correctVocab || this.randomItem(this.vocabBank);
        const dir = this.random() > 0.5 ? 'en2fa' : 'fa2en';
        if (dir === 'en2fa') {
            return {
                type: 'translation',
                direction: 'Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ â†’ ÙØ§Ø±Ø³ÛŒ',
                question: `Ù…Ø¹Ù†ÛŒ "${target.word}" Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ Ú†ÛŒØ³ØªØŸ`,
                correctAnswer: target.meaning,
                vocabId: target.id
            };
        } else {
            return {
                type: 'translation',
                direction: 'ÙØ§Ø±Ø³ÛŒ â†’ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ',
                question: `Ù…Ø¹Ù†ÛŒ "${target.meaning}" Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ú†ÛŒØ³ØªØŸ`,
                correctAnswer: target.word,
                vocabId: target.id
            };
        }
    }

    // --- Û´. ØªÙˆÙ„ÛŒØ¯ Ø³ÙˆØ§Ù„ ØªØ·Ø¨ÛŒÙ‚ (Ø³Ø§Ø¯Ù‡â€ŒØ´Ø¯Ù‡) ---
    generateMatching() {
        const pairs = this.randomDistinctItems(this.vocabBank, 4);
        const left = pairs.map(p => p.word);
        const right = pairs.map(p => p.meaning);
        // Ø¬Ø§Ø¨Ù‡â€ŒØ¬Ø§ÛŒÛŒ ØªØµØ§Ø¯ÙÛŒ Ø³ØªÙˆÙ† Ø±Ø§Ø³Øª
        for (let i = right.length - 1; i > 0; i--) {
            const j = Math.floor(this.random() * (i + 1));
            [right[i], right[j]] = [right[j], right[i]];
        }
        return {
            type: 'matching',
            question: 'Ú©Ù„Ù…Ø§Øª Ø±Ø§ Ø¨Ù‡ Ù…Ø¹Ø§Ù†ÛŒ ØµØ­ÛŒØ­ Ù…ØªØµÙ„ Ú©Ù†ÛŒØ¯.',
            leftItems: left,
            rightItems: right,
            correctPairs: pairs.map(p => ({ word: p.word, meaning: p.meaning }))
        };
    }

    // Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù…Ù„ Ù…ÙˆÙ„Ø¯ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
    getState() {
        return { seed: this.seed };
    }
}

// =======================================================
// ğŸ§ª  Ø³ÛŒØ³ØªÙ… ØªØ³Øª Ø¯Ø³ØªÛŒ
// =======================================================

// Ù†Ù…ÙˆÙ†Ù‡ Ø§ØµÙ„ÛŒ Ù…ÙˆÙ„Ø¯ ØªÙ…Ø±ÛŒÙ†
const generator = new ExerciseGenerator(12345);

// Ø¹Ù†Ø§ØµØ± DOM
const seedDisplay = document.getElementById('seedDisplay');
const exerciseContent = document.getElementById('exerciseContent');
const exerciseOptions = document.getElementById('exerciseOptions');
const exerciseTypeTag = document.getElementById('exerciseTypeTag');
const metaInfo = document.getElementById('metaInfo');
const logConsole = document.getElementById('logConsole');

// Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Seed
function updateSeedUI() {
    seedDisplay.innerText = generator.seed;
}
updateSeedUI();

// Ø§ÙØ²ÙˆØ¯Ù† Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ù„Ø§Ú¯
function log(message, type = 'info') {
    const p = document.createElement('div');
    p.innerHTML = `â±ï¸ ${new Date().toLocaleTimeString('fa-IR')} â€” ${message}`;
    p.style.color = type === 'success' ? '#a5d6a5' : (type === 'error' ? '#ffab91' : '#bebebe');
    logConsole.appendChild(p);
    logConsole.scrollTop = logConsole.scrollHeight;
}

// Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù„Ø§Ú¯
document.getElementById('clearLogBtn').addEventListener('click', function(){
    logConsole.innerHTML = 'ğŸ§¹ Ù„Ø§Ú¯ Ù¾Ø§Ú© Ø´Ø¯.';
    log('Ù„Ø§Ú¯ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø± Ù¾Ø§Ú© Ø´Ø¯');
});

// ØªØºÛŒÛŒØ± Seed Ø¬Ø¯ÛŒØ¯ (ØªØµØ§Ø¯ÙÛŒ)
document.getElementById('newSeedBtn').addEventListener('click', function(){
    const newSeed = Math.floor(Math.random() * 100000);
    generator.setSeed(newSeed);
    updateSeedUI();
    log(`ğŸ”€ Seed ØªØºÛŒÛŒØ± ÛŒØ§ÙØª: ${newSeed}`, 'success');
});

// Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Seed Ø¨Ù‡ 12345
document.getElementById('resetSeedBtn').addEventListener('click', function(){
    generator.setSeed(12345);
    updateSeedUI();
    log(`â†©ï¸ Seed Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¨Ù‡ 12345`, 'success');
});

// ==========  ØªÙˆØ§Ø¨Ø¹ ØªÙˆÙ„ÛŒØ¯ Ùˆ Ù†Ù…Ø§ÛŒØ´ ØªÙ…Ø±ÛŒÙ† ==========
function displayExercise(exercise) {
    exerciseContent.innerText = exercise.question || 'Ø³ÙˆØ§Ù„';
    exerciseTypeTag.innerText = 
        exercise.type === 'multiple-choice' ? 'Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ' :
        exercise.type === 'fill-blank' ? 'Ø¬Ø§ÛŒâ€ŒØ®Ø§Ù„ÛŒ' :
        exercise.type === 'translation' ? 'ØªØ±Ø¬Ù…Ù‡' : 'ØªØ·Ø¨ÛŒÙ‚';
    
    let optionsHtml = '';
    if (exercise.choices) {
        optionsHtml = '<div style="margin-top:18px;">';
        exercise.choices.forEach((ch, idx) => {
            optionsHtml += `<div class="option-btn">ğŸ”¸ ${ch}</div>`;
        });
        optionsHtml += '</div>';
        optionsHtml += `<p style="margin-top:8px;">âœ… Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­: <strong>${exercise.correctAnswer}</strong></p>`;
    } else if (exercise.type === 'fill-blank') {
        optionsHtml = `<p style="background:#e0f2f1; padding:14px; border-radius:20px;">ğŸ”¤ Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­: <strong>${exercise.correctAnswer}</strong> (${exercise.meaning})</p>`;
    } else if (exercise.type === 'translation') {
        optionsHtml = `<p style="background:#ede7f6; padding:14px; border-radius:20px;">ğŸŒ Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­: <strong>${exercise.correctAnswer}</strong></p>`;
    } else if (exercise.type === 'matching') {
        optionsHtml = '<div style="display:flex; gap:18px; justify-content:center;">';
        optionsHtml += '<div><strong>Ú©Ù„Ù…Ø§Øª:</strong><br>' + exercise.leftItems.join('<br>') + '</div>';
        optionsHtml += '<div><strong>Ù…Ø¹Ø§Ù†ÛŒ:</strong><br>' + exercise.rightItems.join('<br>') + '</div>';
        optionsHtml += '</div>';
    }

    exerciseOptions.innerHTML = optionsHtml;
    
    let meta = `ğŸ†” vocabId: ${exercise.vocabId || '-'} | `;
    if (exercise.phonetic) meta += `ğŸ”Š ${exercise.phonetic}`;
    if (exercise.direction) meta += ` | Ø¬Ù‡Øª: ${exercise.direction}`;
    metaInfo.innerText = meta;
}

// ØªÙˆÙ„ÛŒØ¯ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ
document.getElementById('genMultipleChoiceBtn').addEventListener('click', function(){
    const ex = generator.generateMultipleChoice();
    displayExercise(ex);
    log(`ğŸ“˜ ØªÙˆÙ„ÛŒØ¯ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ | Ù¾Ø§Ø³Ø®: ${ex.correctAnswer} | seed: ${generator.seed}`, 'success');
});

// ØªÙˆÙ„ÛŒØ¯ Ø¬Ø§ÛŒâ€ŒØ®Ø§Ù„ÛŒ
document.getElementById('genFillBlankBtn').addEventListener('click', function(){
    const ex = generator.generateFillBlank();
    displayExercise(ex);
    log(`âœï¸ ØªÙˆÙ„ÛŒØ¯ Ø¬Ø§ÛŒâ€ŒØ®Ø§Ù„ÛŒ | Ù¾Ø§Ø³Ø®: ${ex.correctAnswer} | seed: ${generator.seed}`);
});

// ØªÙˆÙ„ÛŒØ¯ ØªØ±Ø¬Ù…Ù‡
document.getElementById('genTranslationBtn').addEventListener('click', function(){
    const ex = generator.generateTranslation();
    displayExercise(ex);
    log(`ğŸŒ ØªÙˆÙ„ÛŒØ¯ ØªØ±Ø¬Ù…Ù‡ (${ex.direction}) | Ù¾Ø§Ø³Ø®: ${ex.correctAnswer}`);
});

// ØªÙˆÙ„ÛŒØ¯ ØªØ·Ø¨ÛŒÙ‚
document.getElementById('genMatchingBtn').addEventListener('click', function(){
    const ex = generator.generateMatching();
    displayExercise(ex);
    log(`ğŸ”— ØªÙˆÙ„ÛŒØ¯ ØªØ·Ø¨ÛŒÙ‚ | ${ex.leftItems.length} Ø¬ÙØª`);
});

// ==========  ØªØ³Øª Seed Ø«Ø§Ø¨Øª (Ù…Ù‚Ø§ÛŒØ³Ù‡) ==========
document.getElementById('seedBasedComparisonBtn').addEventListener('click', function(){
    // Ø°Ø®ÛŒØ±Ù‡ seed ÙØ¹Ù„ÛŒ
    const currentSeed = generator.seed;
    log(`ğŸ”¬ Ø´Ø±ÙˆØ¹ ØªØ³Øª Seed Ø«Ø§Ø¨Øª | seed: ${currentSeed}`, 'info');
    
    // ØªÙˆÙ„ÛŒØ¯ Ø¯Ùˆ ØªÙ…Ø±ÛŒÙ† Ù…ØªÙˆØ§Ù„ÛŒ Ø¨Ø§ ÛŒÚ© seed (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
    const ex1 = generator.generateMultipleChoice();
    const ex2 = generator.generateMultipleChoice();
    
    // Ø¨Ø±Ø±Ø³ÛŒ ÛŒÚ©Ø³Ø§Ù† Ø¨ÙˆØ¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ùˆ Ø³ÙˆØ§Ù„
    let isIdentical = ex1.question === ex2.question && 
                      JSON.stringify(ex1.choices) === JSON.stringify(ex2.choices);
    
    if (isIdentical) {
        log(`âœ… ØªØ³Øª Seed Ø«Ø§Ø¨Øª: Ø¯Ùˆ ØªÙ…Ø±ÛŒÙ† Ù…ØªÙˆØ§Ù„ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ ÛŒÚ©Ø³Ø§Ù† ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù†Ø¯.`, 'success');
    } else {
        log(`âŒ ØªØ³Øª Seed Ø«Ø§Ø¨Øª: ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ø¨Ø§ ÙˆØ¬ÙˆØ¯ seed ÛŒÚ©Ø³Ø§Ù† Ù…ØªÙØ§ÙˆØª Ø´Ø¯Ù†Ø¯!`, 'error');
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ù‡Ø± Ø¯Ùˆ Ø¯Ø± Ù„Ø§Ú¯
    log(`  Û±: "${ex1.question}" Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§: [${ex1.choices}]`);
    log(`  Û²: "${ex2.question}" Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§: [${ex2.choices}]`);
    
    // ÙØ¹Ù„Ø§Ù‹ Ù†Ù…Ø§ÛŒØ´ Ø¢Ø®Ø±ÛŒÙ† ØªÙ…Ø±ÛŒÙ†
    displayExercise(ex2);
});

// ==========  Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Seed Ù…ØªÙØ§ÙˆØª ==========
document.getElementById('compareTwoSeedsBtn').addEventListener('click', function(){
    const seed1 = 12345;
    const seed2 = 99999;
    
    const g1 = new ExerciseGenerator(seed1);
    const g2 = new ExerciseGenerator(seed2);
    
    const ex1 = g1.generateMultipleChoice();
    const ex2 = g2.generateMultipleChoice();
    
    log(`âš–ï¸ Ù…Ù‚Ø§ÛŒØ³Ù‡ seed=${seed1} Ùˆ seed=${seed2}`, 'info');
    log(`  Seed1: Ø³ÙˆØ§Ù„ "${ex1.question}" | Ú¯Ø²ÛŒÙ†Ù‡: [${ex1.choices}]`);
    log(`  Seed2: Ø³ÙˆØ§Ù„ "${ex2.question}" | Ú¯Ø²ÛŒÙ†Ù‡: [${ex2.choices}]`);
    
    if (ex1.question === ex2.question && JSON.stringify(ex1.choices) === JSON.stringify(ex2.choices)) {
        log(`âš ï¸  Ø¨Ø§ ÙˆØ¬ÙˆØ¯ Seed Ù…ØªÙØ§ÙˆØªØŒ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ ÛŒÚ©Ø³Ø§Ù† Ø´Ø¯Ù†Ø¯ (ØªØµØ§Ø¯ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø¶Ø¹ÛŒÙ)`);
    } else {
        log(`âœ… Seed Ù…ØªÙØ§ÙˆØª â†’ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ù…ØªÙØ§ÙˆØª (Ø·Ø¨ÛŒØ¹ÛŒ)`);
    }
});

// Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´
window.addEventListener('load', function(){
    const ex = generator.generateMultipleChoice();
    displayExercise(ex);
    log('ğŸš€ Ù…ÙˆÙ„Ø¯ ØªÙ…Ø±ÛŒÙ† Ø¨Ø§ Seed=12345 Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
});
</script>
</body>
  </html>
