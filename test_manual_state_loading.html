<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ State Loading - Farsinglish</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Tahoma', 'Arial', sans-serif;
            background: #f8fafc;
            padding: 16px;
            padding-bottom: 40px;
            color: #0f172a;
        }
        .container { max-width: 700px; margin: 0 auto; }
        h1 {
            font-size: 24px;
            background: #1e293b;
            color: white;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 24px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }
        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 16px;
        }
        .badge.blue { background: #dbeafe; color: #1e40af; border-right: 4px solid #2563eb; }
        .state-box {
            background: #f1f5f9;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            border: 1px dashed #94a3b8;
            min-height: 100px;
        }
        .loading { display: flex; align-items: center; gap: 12px; background: #fef9c3; padding: 12px; border-radius: 12px; color: #854d0e; }
        .success { background: #dcfce7; padding: 12px; border-radius: 12px; color: #166534; }
        .error { background: #fee2e2; padding: 12px; border-radius: 12px; color: #991b1b; }
        .btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 14px;
            font-size: 16px;
            font-weight: bold;
            margin: 8px 4px;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-width: 120px;
        }
        .btn.secondary { background: #475569; }
        .btn.warning { background: #b45309; }
        .btn.outline { background: white; color: #2563eb; border: 2px solid #2563eb; }
        .btn-group { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 12px; }
        .log {
            background: #0f172a;
            color: #e2e8f0;
            padding: 16px;
            border-radius: 14px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-top: 16px;
            max-height: 200px;
            overflow-y: auto;
            direction: ltr;
            text-align: left;
        }
        .summary { background: #0f172a; color: white; padding: 20px; border-radius: 20px; margin-top: 30px; }
        .result-badge { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-left: 8px; }
        hr { margin: 24px 0; border: 1px solid #e2e8f0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ØªØ³Øª Ø¯Ø³ØªÛŒ Â· State Loading/Success/Error</h1>
        <p style="margin-bottom: 20px; background: #f1f5f9; padding: 14px; border-radius: 14px;">
            âš¡ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ: Ù„ÙˆØ¯ÛŒÙ†Ú¯ØŒ Ù…ÙˆÙÙ‚ÛŒØªØŒ Ø®Ø·Ø§ØŒ ØªØ§ÛŒÙ…â€ŒØ§ÙˆØªØŒ Ø±ÛŒØªØ±Ø§ÛŒØŒ Ú©Ù†Ø³Ù„ØŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
        </p>

        <!-- ØªØ³Øª Û±: Ø­Ø§Ù„Øª Ù„ÙˆØ¯ÛŒÙ†Ú¯ Ø³Ø§Ø¯Ù‡ -->
        <div class="card">
            <span class="badge blue">ğŸ§  ØªØ³Øª Û± Â· Ø­Ø§Ù„Øª Ù„ÙˆØ¯ÛŒÙ†Ú¯</span>
            <div id="state1Display" class="state-box">
                <div style="color: #64748b;">â³ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ: â€”</div>
            </div>
            <div class="btn-group">
                <button id="btnLoading1" class="btn">â³ Ø´Ø±ÙˆØ¹ Ù„ÙˆØ¯ÛŒÙ†Ú¯</button>
                <button id="btnSuccess1" class="btn success" style="background:#22c55e; color:white;">âœ… Ù…ÙˆÙÙ‚</button>
                <button id="btnError1" class="btn error" style="background:#ef4444; color:white;">âŒ Ø®Ø·Ø§</button>
                <button id="btnReset1" class="btn outline">â†º Ø±ÛŒØ³Øª</button>
            </div>
            <div id="log1" class="log">[Ù„Ø§Ú¯] Ù…Ù†ØªØ¸Ø± Ø¹Ù…Ù„ÛŒØ§Øª...</div>
        </div>

        <!-- ØªØ³Øª Û²: ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª Ùˆ Ø±ÛŒØªØ±Ø§ÛŒ -->
        <div class="card">
            <span class="badge blue">â±ï¸ ØªØ³Øª Û² Â· ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª + Ø±ÛŒØªØ±Ø§ÛŒ</span>
            <div id="state2Display" class="state-box">
                <div>â³ ØªÙ„Ø§Ø´: <span id="retryCount">Û°</span> Ø§Ø² Û³</div>
                <div id="timeoutStatus">â¸ï¸ Ø¢Ù…Ø§Ø¯Ù‡</div>
            </div>
            <div class="btn-group">
                <button id="btnStartTimeout" class="btn warning">â±ï¸ Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª (Û³Ø«Ø§Ù†ÛŒÙ‡)</button>
                <button id="btnRetry" class="btn secondary">ğŸ”„ Ø±ÛŒØªØ±Ø§ÛŒ</button>
                <button id="btnCancel" class="btn outline">âœ–ï¸ Ú©Ù†Ø³Ù„</button>
            </div>
            <div id="log2" class="log">[Ù„Ø§Ú¯] ...</div>
        </div>

        <!-- ØªØ³Øª Û³: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø² Ø®Ø·Ø§ (Recovery) -->
        <div class="card">
            <span class="badge blue">ğŸ”„ ØªØ³Øª Û³ Â· Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø² Ø®Ø·Ø§</span>
            <div id="state3Display" class="state-box">
                <div>ğŸ“Œ ÙˆØ¶Ø¹ÛŒØª: <span id="recoveryState">Ø¹Ø§Ø¯ÛŒ</span></div>
            </div>
            <div class="btn-group">
                <button id="btnTriggerError" class="btn error" style="background:#b45309;">âš ï¸ Ø§ÛŒØ¬Ø§Ø¯ Ø®Ø·Ø§ÛŒ Ù…ÙˆÙ‚Øª</button>
                <button id="btnRecover" class="btn success" style="background:#16a34a;">âœ… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ</button>
                <button id="btnSimulateNetwork" class="btn secondary">ğŸ“¶ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø´Ø¨Ú©Ù‡</button>
            </div>
            <div id="log3" class="log">[Ù„Ø§Ú¯] ...</div>
        </div>

        <!-- ØªØ³Øª Û´: Ø¢Ø¨Ø´Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Parallel/Sequential) -->
        <div class="card">
            <span class="badge blue">ğŸŒŠ ØªØ³Øª Û´ Â· Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù‡Ù…â€ŒØ²Ù…Ø§Ù†</span>
            <div id="state4Display" class="state-box">
                <div>ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Û±: <span id="req1">â€”</span></div>
                <div>ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Û²: <span id="req2">â€”</span></div>
                <div>ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Û³: <span id="req3">â€”</span></div>
            </div>
            <div class="btn-group">
                <button id="btnParallel" class="btn">âš¡ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…â€ŒØ²Ù…Ø§Ù†</button>
                <button id="btnSequential" class="btn secondary">â¸ï¸ Ø§Ø¬Ø±Ø§ÛŒ ØªØ±ØªÛŒØ¨ÛŒ</button>
                <button id="btnReset4" class="btn outline">â†º Ø±ÛŒØ³Øª</button>
            </div>
            <div id="log4" class="log">[Ù„Ø§Ú¯] ...</div>
        </div>

        <!-- Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§ -->
        <button id="clearAllLogs" style="background:#334155; color:white; padding:14px; border-radius:50px; width:100%; margin-top:10px;">ğŸ§¹ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§</button>

        <!-- Ø®Ù„Ø§ØµÙ‡ Ù†Ù‡Ø§ÛŒÛŒ -->
        <div id="finalSummary" class="summary">
            <h3 style="margin-bottom:12px;">ğŸ“Š Ø®Ù„Ø§ØµÙ‡ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÛŒ</h3>
            <div id="summaryContent">âœ… Û´ Ø³Ù†Ø§Ø±ÛŒÙˆ Ø§ØµÙ„ÛŒ Â· Û¸ Ø­Ø§Ù„Øª Ù…Ø®ØªÙ„Ù Â· Ù„ÙˆØ¯ÛŒÙ†Ú¯/Ù…ÙˆÙÙ‚ÛŒØª/Ø®Ø·Ø§/ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª/Ø±ÛŒØªØ±Ø§ÛŒ/Ú©Ù†Ø³Ù„/Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ/Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ</div>
            <p style="margin-top:16px; color:#94a3b8;">â±ï¸ Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="timestamp">â€”</span></p>
        </div>
    </div>

    <script>
        (function(){
            "use strict";

            // --- Helper Logger ---
            const LogManager = {
                logs: { log1: [], log2: [], log3: [], log4: [] },
                
                add(containerId, message) {
                    const logDiv = document.getElementById(containerId);
                    if (!logDiv) return;
                    const timestamp = new Date().toLocaleTimeString('fa-IR', { hour12: false });
                    const entry = `[${timestamp}] ${message}`;
                    this.logs[containerId]?.push(entry);
                    if (this.logs[containerId].length > 8) this.logs[containerId].shift();
                    logDiv.innerHTML = this.logs[containerId].map(e => `ğŸ”¹ ${e}`).join('<br>') || '[Ù„Ø§Ú¯] Ø®Ø§Ù„ÛŒ';
                },
                
                clear(containerId) {
                    if (containerId) {
                        this.logs[containerId] = [];
                        const logDiv = document.getElementById(containerId);
                        if (logDiv) logDiv.innerHTML = '[Ù„Ø§Ú¯] Ù¾Ø§Ú© Ø´Ø¯';
                    }
                },
                
                clearAll() {
                    this.clear('log1'); this.clear('log2'); this.clear('log3'); this.clear('log4');
                }
            };

            // --- Ø­Ø§Ù„Øªâ€ŒØ¯Ù‡Ù†Ø¯Ù‡ UI Ø¨Ø±Ø§ÛŒ ØªØ³Øª Û± ---
            const state1Display = document.getElementById('state1Display');
            const log1 = 'log1';
            
            document.getElementById('btnLoading1').addEventListener('click', function() {
                state1Display.innerHTML = `<div class="loading">â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯ ... <span style="margin-right:auto;">ğŸ”„</span></div>`;
                LogManager.add(log1, 'Ù†Ù…Ø§ÛŒØ´ Ø­Ø§Ù„Øª Ù„ÙˆØ¯ÛŒÙ†Ú¯');
            });
            
            document.getElementById('btnSuccess1').addEventListener('click', function() {
                state1Display.innerHTML = `<div class="success">âœ… Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯! <br> <small>ğŸ“¦ Ø¯Ø§Ø¯Ù‡: Û±Û² Ø¯Ø±Ø³ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯</small></div>`;
                LogManager.add(log1, 'Ù†Ù…Ø§ÛŒØ´ Ø­Ø§Ù„Øª Ù…ÙˆÙÙ‚ÛŒØª');
            });
            
            document.getElementById('btnError1').addEventListener('click', function() {
                state1Display.innerHTML = `<div class="error">âŒ Ø®Ø·Ø§: Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†Ø´Ø¯ (Ú©Ø¯ Û´Û°Û´) <br> <small>â±ï¸ Û³ Ø«Ø§Ù†ÛŒÙ‡ Ø¯ÛŒÚ¯Ø± ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯...</small></div>`;
                LogManager.add(log1, 'Ù†Ù…Ø§ÛŒØ´ Ø­Ø§Ù„Øª Ø®Ø·Ø§ - 404');
            });
            
            document.getElementById('btnReset1').addEventListener('click', function() {
                state1Display.innerHTML = `<div style="color: #64748b;">â³ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ: â€”</div>`;
                LogManager.add(log1, 'Ø±ÛŒØ³Øª state');
            });

            // --- ØªØ³Øª Û²: ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª Ùˆ Ø±ÛŒØªØ±Ø§ÛŒ ---
            let timeoutId = null;
            let retryAttempt = 0;
            const retrySpan = document.getElementById('retryCount');
            const timeoutStatus = document.getElementById('timeoutStatus');
            const state2Display = document.getElementById('state2Display');
            const log2 = 'log2';

            function resetTimeoutUI() {
                if (timeoutId) clearTimeout(timeoutId);
                timeoutId = null;
                retryAttempt = 0;
                retrySpan.innerText = retryAttempt;
                timeoutStatus.innerText = 'â¸ï¸ Ù…ØªÙˆÙ‚Ù';
                timeoutStatus.style.color = '#64748b';
                state2Display.innerHTML = `<div>â³ ØªÙ„Ø§Ø´: <span id="retryCount">Û°</span> Ø§Ø² Û³</div><div id="timeoutStatus">â¸ï¸ Ø¢Ù…Ø§Ø¯Ù‡</div>`;
                // Ø±ÛŒâ€ŒØ§ØªØµØ§Ù„ span
                document.getElementById('retryCount').innerText = 'Û°';
            }

            document.getElementById('btnStartTimeout').addEventListener('click', function() {
                resetTimeoutUI();
                retryAttempt = 1;
                retrySpan.innerText = retryAttempt;
                timeoutStatus.innerText = 'â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªØ¸Ø§Ø± (Û³ Ø«Ø§Ù†ÛŒÙ‡) ...';
                timeoutStatus.style.color = '#b45309';
                state2Display.innerHTML = `<div class="loading">â³ ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª Û³ Ø«Ø§Ù†ÛŒÙ‡ ...</div>`;
                LogManager.add(log2, 'Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª');

                timeoutId = setTimeout(() => {
                    state2Display.innerHTML = `<div class="error">â° Ø®Ø·Ø§ÛŒ ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª! Ù¾Ø§Ø³Ø® Ø§Ø² Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ù†Ø´Ø¯.</div>`;
                    timeoutStatus.innerText = 'âŒ ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª';
                    LogManager.add(log2, 'ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª - Ø¹Ø¯Ù… Ù¾Ø§Ø³Ø®');
                    timeoutId = null;
                }, 3000);
            });

            document.getElementById('btnRetry').addEventListener('click', function() {
                if (timeoutId) clearTimeout(timeoutId);
                retryAttempt++;
                if (retryAttempt > 3) retryAttempt = 3;
                retrySpan.innerText = retryAttempt;
                timeoutStatus.innerText = `ğŸ”„ Ø±ÛŒØªØ±Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡ ${retryAttempt}`;
                state2Display.innerHTML = `<div class="loading">ğŸ”„ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ (${retryAttempt}/Û³) ...</div>`;
                LogManager.add(log2, `Ø±ÛŒØªØ±Ø§ÛŒ: ØªÙ„Ø§Ø´ ${retryAttempt}`);
                
                if (retryAttempt < 3) {
                    timeoutId = setTimeout(() => {
                        state2Display.innerHTML = `<div class="error">â° ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª Ù…Ø¬Ø¯Ø¯! (ØªÙ„Ø§Ø´ ${retryAttempt})</div>`;
                        LogManager.add(log2, `ØªØ§ÛŒÙ…â€ŒØ§ÙˆØª Ø¯Ø± Ø±ÛŒØªØ±Ø§ÛŒ ${retryAttempt}`);
                        timeoutId = null;
                    }, 3000);
                } else {
                    // ØªÙ„Ø§Ø´ Ø³ÙˆÙ… - Ù…ÙˆÙÙ‚ÛŒØª ÙØ±Ø¶ÛŒ
                    setTimeout(() => {
                        state2Display.innerHTML = `<div class="success">âœ… Ù…ÙˆÙÙ‚! Ø¯Ø§Ø¯Ù‡ Ù¾Ø³ Ø§Ø² Û³ Ø±ÛŒØªØ±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯.</div>`;
                        timeoutStatus.innerText = 'âœ… Ù…ÙˆÙÙ‚';
                        LogManager.add(log2, 'Ø±ÛŒØªØ±Ø§ÛŒ Ø³ÙˆÙ… Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²');
                    }, 1500);
                }
            });

            document.getElementById('btnCancel').addEventListener('click', function() {
                if (timeoutId) {
                    clearTimeout(timeoutId);
                    timeoutId = null;
                }
                retryAttempt = 0;
                retrySpan.innerText = retryAttempt;
                timeoutStatus.innerText = 'âœ–ï¸ Ú©Ù†Ø³Ù„ Ø´Ø¯';
                state2Display.innerHTML = `<div style="background:#e2e8f0; padding:10px;">âœ–ï¸ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø± Ù„ØºÙˆ Ø´Ø¯.</div>`;
                LogManager.add(log2, 'Ø¹Ù…Ù„ÛŒØ§Øª Ú©Ù†Ø³Ù„ Ø´Ø¯');
            });

            // --- ØªØ³Øª Û³: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø² Ø®Ø·Ø§ ---
            const recoveryState = document.getElementById('recoveryState');
            const state3Display = document.getElementById('state3Display');
            const log3 = 'log3';
            
            document.getElementById('btnTriggerError').addEventListener('click', function() {
                state3Display.innerHTML = `<div class="error">âš ï¸ Ø®Ø·Ø§ÛŒ Ù…ÙˆÙ‚Øª Ø´Ø¨Ú©Ù‡! Ø§ØªØµØ§Ù„ Ù‚Ø·Ø¹ Ø§Ø³Øª.<br><small>ØªÙ„Ø§Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ...</small></div>`;
                recoveryState.innerText = 'âš ï¸ Ø®Ø·Ø§';
                LogManager.add(log3, 'Ø®Ø·Ø§ÛŒ Ù…ÙˆÙ‚Øª Ø´Ø¨Ú©Ù‡ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯');
            });
            
            document.getElementById('btnRecover').addEventListener('click', function() {
                state3Display.innerHTML = `<div class="success">âœ… Ø§ØªØµØ§Ù„ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯! Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†Ø¬Ø§Ù… Ú¯Ø±Ø¯ÛŒØ¯.<br><small>ğŸ“¦ Ûµ Ø¯Ø±Ø³ Ø¢ÙÙ„Ø§ÛŒÙ† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯.</small></div>`;
                recoveryState.innerText = 'âœ… Ø¹Ø§Ø¯ÛŒ - Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯Ù‡';
                LogManager.add(log3, 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø³ØªÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª');
            });
            
            document.getElementById('btnSimulateNetwork').addEventListener('click', function() {
                state3Display.innerHTML = `<div class="loading">ğŸ“¶ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø´Ø¨Ú©Ù‡: Ù‚Ø·Ø¹ Ùˆ ÙˆØµÙ„ ...<br><small>Ø¯Ø± Ø­Ø§Ù„ ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯ (Û²/Ûµ)</small></div>`;
                recoveryState.innerText = 'ğŸ”„ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ';
                LogManager.add(log3, 'Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø´Ø¨Ú©Ù‡ ÙØ¹Ø§Ù„ Ø´Ø¯');
                setTimeout(() => {
                    if (state3Display.innerHTML.includes('Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²')) {
                        state3Display.innerHTML = `<div class="success">âœ… Ø´Ø¨Ú©Ù‡ Ù¾Ø§ÛŒØ¯Ø§Ø± Ø´Ø¯. Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„.</div>`;
                        recoveryState.innerText = 'âœ… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±';
                        LogManager.add(log3, 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾Ø³ Ø§Ø² Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ');
                    }
                }, 2500);
            });

            // --- ØªØ³Øª Û´: Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ ---
            const req1 = document.getElementById('req1');
            const req2 = document.getElementById('req2');
            const req3 = document.getElementById('req3');
            const state4Display = document.getElementById('state4Display');
            const log4 = 'log4';

            document.getElementById('btnParallel').addEventListener('click', function() {
                req1.innerText = 'â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯'; req2.innerText = 'â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯'; req3.innerText = 'â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯';
                state4Display.innerHTML = `<div class="loading">âš¡ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù† Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ...</div>`;
                LogManager.add(log4, 'Ø´Ø±ÙˆØ¹ Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ù…Ø²Ù…Ø§Ù†');
                
                setTimeout(() => { req1.innerText = 'âœ… Ù…ÙˆÙÙ‚ (Ø¯Ø±Ø³ Û±)'; }, 800);
                setTimeout(() => { req2.innerText = 'âœ… Ù…ÙˆÙÙ‚ (Ø¯Ø±Ø³ Û·)'; }, 1200);
                setTimeout(() => { 
                    req3.innerText = 'âœ… Ù…ÙˆÙÙ‚ (Ø¯Ø±Ø³ Û±Û²)'; 
                    state4Display.innerHTML = `<div class="success">ğŸŒŠ Ù‡Ù…Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù† Ú©Ø§Ù…Ù„ Ø´Ø¯Ù†Ø¯.</div>`;
                    LogManager.add(log4, 'Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ù…Ø²Ù…Ø§Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯');
                }, 1600);
            });

            document.getElementById('btnSequential').addEventListener('click', function() {
                req1.innerText = 'â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯'; req2.innerText = 'â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±'; req3.innerText = 'â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±';
                state4Display.innerHTML = `<div class="loading">â¸ï¸ Ø§Ø¬Ø±Ø§ÛŒ ØªØ±ØªÛŒØ¨ÛŒ ...</div>`;
                LogManager.add(log4, 'Ø´Ø±ÙˆØ¹ ØªØ±ØªÛŒØ¨ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§');
                
                setTimeout(() => {
                    req1.innerText = 'âœ… Ù…ÙˆÙÙ‚ (Ø¯Ø±Ø³ Û±)';
                    req2.innerText = 'â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯';
                    setTimeout(() => {
                        req2.innerText = 'âœ… Ù…ÙˆÙÙ‚ (Ø¯Ø±Ø³ Û·)';
                        req3.innerText = 'â³ Ù„ÙˆØ¯ÛŒÙ†Ú¯';
                        setTimeout(() => {
                            req3.innerText = 'âœ… Ù…ÙˆÙÙ‚ (Ø¯Ø±Ø³ Û±Û²)';
                            state4Display.innerHTML = `<div class="success">ğŸ” Ù‡Ù…Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ±ØªÛŒØ¨ÛŒ Ú©Ø§Ù…Ù„ Ø´Ø¯Ù†Ø¯.</div>`;
                            LogManager.add(log4, 'Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ±ØªÛŒØ¨ÛŒ Ù…ÙˆÙÙ‚');
                        }, 900);
                    }, 900);
                }, 900);
            });

            document.getElementById('btnReset4').addEventListener('click', function() {
                req1.innerText = 'â€”'; req2.innerText = 'â€”'; req3.innerText = 'â€”';
                state4Display.innerHTML = `<div>ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Û±: <span id="req1">â€”</span></div><div>ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Û²: <span id="req2">â€”</span></div><div>ğŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Û³: <span id="req3">â€”</span></div>`;
                LogManager.add(log4, 'Ø±ÛŒØ³Øª ØªØ³Øª Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ');
            });

            // --- Clear all logs ---
            document.getElementById('clearAllLogs').addEventListener('click', function() {
                LogManager.clearAll();
            });

            // --- timestamp ---
            function updateTimestamp() {
                document.getElementById('timestamp').innerText = new Date().toLocaleString('fa-IR');
            }
            updateTimestamp();
            setInterval(updateTimestamp, 1000);

            // --- Ù„Ø§Ú¯ Ø§ÙˆÙ„ÛŒÙ‡ ---
            LogManager.add('log1', 'Ø¢Ù…Ø§Ø¯Ù‡');
            LogManager.add('log2', 'Ø¢Ù…Ø§Ø¯Ù‡');
            LogManager.add('log3', 'Ø¢Ù…Ø§Ø¯Ù‡');
            LogManager.add('log4', 'Ø¢Ù…Ø§Ø¯Ù‡');

            // reset timeout ui on load
            resetTimeoutUI();
        })();
    </script>
</body>
  </html>
