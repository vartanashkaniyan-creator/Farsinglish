<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ JWT - Ù…Ú©Ù…Ù„</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }
        
        h1 {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: #4a5568;
            font-size: 1.2rem;
            font-weight: 300;
        }
        
        .test-section {
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-right: 5px solid #4299e1;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .test-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .test-title {
            color: #2d3748;
            font-size: 1.4rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-title::before {
            content: "ğŸ§ª";
            font-size: 1.2rem;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .test-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }
        
        .test-card:hover {
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }
        
        .test-card h3 {
            color: #4a5568;
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #edf2f7;
        }
        
        .test-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            flex: 1;
            text-align: center;
            font-size: 0.95rem;
        }
        
        .btn-run {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
        }
        
        .btn-run:hover {
            background: linear-gradient(45deg, #38a169, #2f855a);
            transform: scale(1.05);
        }
        
        .btn-code {
            background: #edf2f7;
            color: #4a5568;
        }
        
        .btn-code:hover {
            background: #e2e8f0;
        }
        
        .results {
            margin-top: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border: 2px solid #e9ecef;
            display: none;
        }
        
        .results.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-item {
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .result-item.success {
            background: rgba(72, 187, 120, 0.1);
            border-right: 4px solid #48bb78;
            color: #22543d;
        }
        
        .result-item.error {
            background: rgba(245, 101, 101, 0.1);
            border-right: 4px solid #f56565;
            color: #742a2a;
        }
        
        .result-item.warning {
            background: rgba(237, 137, 54, 0.1);
            border-right: 4px solid #ed8936;
            color: #744210;
        }
        
        .status-icon {
            font-size: 1.2rem;
            width: 30px;
            text-align: center;
        }
        
        .summary {
            background: linear-gradient(45deg, #4fd1c5, #38b2ac);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .summary h2 {
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #68d391, #38a169);
            width: 0%;
            transition: width 1s ease;
            border-radius: 10px;
        }
        
        .token-display {
            background: #1a202c;
            color: #68d391;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
            border: 1px solid #2d3748;
        }
        
        .security-badge {
            display: inline-block;
            background: #fed7d7;
            color: #742a2a;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin: 5px;
            font-weight: 600;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #718096;
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .test-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§ª ØªØ³Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ JWT (Ù…Ú©Ù…Ù„)</h1>
            <p class="subtitle">ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª ØªÙˆÚ©Ù† - Ù…Ú©Ù…Ù„ test_jwt_fixed.html</p>
            <div style="margin-top: 15px;">
                <span class="security-badge">ğŸ”’ Ø§Ù…Ù†ÛŒØª ØªÙˆÚ©Ù†</span>
                <span class="security-badge">ğŸ”„ Refresh Rotation</span>
                <span class="security-badge">âš¡ Claims Validation</span>
                <span class="security-badge">ğŸ›¡ï¸ Ø¶Ø¯ Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ</span>
            </div>
        </header>

        <div class="test-section">
            <h2 class="test-title">Ø¨Ø®Ø´ Û±: Ø§Ù…Ù†ÛŒØª Ù¾ÛŒØ´Ø±ÙØªÙ‡ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§</h2>
            <p>ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø­ÙØ§Ø¸Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø­Ù…Ù„Ø§Øª Ø±Ø§ÛŒØ¬ JWT</p>
            
            <div class="test-grid">
                <div class="test-card">
                    <h3>Û±. Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Signature</h3>
                    <p>ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ ØªØºÛŒÛŒØ± Signature</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('tamperTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('tamperTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="tamperTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û². Ù…Ø­Ø§ÙØ¸Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Replay Attacks</h3>
                    <p>Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ø§ jti (JWT ID)</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('replayAttackTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('replayAttackTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="replayAttackTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û³. Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Algorithm Switching</h3>
                    <p>Ù…Ù‚Ø§ÙˆÙ…Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø­Ù…Ù„Ø§Øª ØªØºÛŒÛŒØ± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ù‡ "none"</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('algorithmSwitchTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('algorithmSwitchTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="algorithmSwitchTest-results" class="results"></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="test-title">Ø¨Ø®Ø´ Û²: Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Refresh Token</h2>
            <p>Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø§Ù…Ù† Ø¨Ø±Ø§ÛŒ ØªÙ…Ø¯ÛŒØ¯ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§</p>
            
            <div class="test-grid">
                <div class="test-card">
                    <h3>Û´. Refresh Token Rotation</h3>
                    <p>Ø§ÛŒÙ…Ù†â€ŒØ³Ø§Ø²ÛŒ ØªÙ…Ø¯ÛŒØ¯ ØªÙˆÚ©Ù† Ø¨Ø§ ØªÙˆÙ„ÛŒØ¯ ØªÙˆÚ©Ù† Ø¬Ø¯ÛŒØ¯ Ùˆ Ø§Ø¨Ø·Ø§Ù„ Ù‚Ø¯ÛŒÙ…ÛŒ</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('refreshRotationTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('refreshRotationTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="refreshRotationTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Ûµ. Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯ÙØ¹Ø§Øª Refresh</h3>
                    <p>Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø³ÙˆØ¡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯ÙØ¹Ø§Øª ØªÙ…Ø¯ÛŒØ¯</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('refreshLimitTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('refreshLimitTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="refreshLimitTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û¶. Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù…Ù† Refresh Token</h3>
                    <p>Ø§Ù…Ù†ÛŒØª ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø¯ÛŒØ¯ Ø¯Ø± Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('secureStorageTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('secureStorageTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="secureStorageTest-results" class="results"></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="test-title">Ø¨Ø®Ø´ Û³: Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Claims</h2>
            <p>Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ø§Ù…Ù† ClaimÙ‡Ø§ÛŒ ØªÙˆÚ©Ù†</p>
            
            <div class="test-grid">
                <div class="test-card">
                    <h3>Û·. Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Issuer Ùˆ Audience</h3>
                    <p>ØªØ£ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª ØµØ§Ø¯Ø±Ú©Ù†Ù†Ø¯Ù‡ Ùˆ Ú¯ÛŒØ±Ù†Ø¯Ù‡ Ù…Ø¬Ø§Ø² ØªÙˆÚ©Ù†</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('issuerAudienceTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('issuerAudienceTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="issuerAudienceTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û¸. Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Scope</h3>
                    <p>Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø¬ÙˆØ²Ù‡Ø§ Ø¨Ø§ ClaimÙ‡Ø§ÛŒ scope</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('scopeValidationTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('scopeValidationTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="scopeValidationTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û¹. Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ClaimÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ</h3>
                    <p>Ø¨Ø±Ø±Ø³ÛŒ ClaimÙ‡Ø§ÛŒ Ø®Ø§Øµ Ù¾Ø±ÙˆÚ˜Ù‡ (Ù…Ø«Ù„ userType, permissions)</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('customClaimsTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('customClaimsTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="customClaimsTest-results" class="results"></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="test-title">Ø¨Ø®Ø´ Û´: ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ</h2>
            <p>Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø§ÛŒÛŒ Ùˆ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨Ø§ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±</p>
            
            <div class="test-grid">
                <div class="test-card">
                    <h3>Û±Û°. Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯</h3>
                    <p>Ú©Ø§Ø±Ø§ÛŒÛŒ Ø¨Ø§ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø­Ø§ÙˆÛŒ ClaimÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('performanceTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('performanceTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="performanceTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û±Û±. Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</h3>
                    <p>Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø± TimezoneÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('timezoneTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('timezoneTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="timezoneTest-results" class="results"></div>
                </div>
                
                <div class="test-card">
                    <h3>Û±Û². ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¨Ø§ State Manager</h3>
                    <p>Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡</p>
                    <div class="test-actions">
                        <button class="btn btn-run" onclick="runTest('integrationTest')">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª</button>
                        <button class="btn btn-code" onclick="showCode('integrationTest')">Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯</button>
                    </div>
                    <div id="integrationTest-results" class="results"></div>
                </div>
            </div>
        </div>

        <div class="summary">
            <h2>Ù†ØªØ§ÛŒØ¬ Ú©Ù„ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="overallProgress"></div>
            </div>
            <div id="summaryStats" style="font-size: 1.2rem; margin: 15px 0;">
                Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§...
            </div>
            <button class="btn" style="background: white; color: #2d3748; margin-top: 15px;" 
                    onclick="runAllTests()">ğŸ¯ Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§</button>
        </div>

        <footer>
            <p>ğŸ›¡ï¸ ØªØ³Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ JWT - Ù…Ú©Ù…Ù„ test_jwt_fixed.html | Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø­ÛŒØ· Ù…ÙˆØ¨Ø§ÛŒÙ„</p>
            <p style="margin-top: 10px; font-size: 0.8rem; color: #a0aec0;">
                Ú©Ù„ÛŒÙ‡ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ Ù‡Ø³ØªÙ†Ø¯ | Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø¬Ø§Ù†Ø¨ÛŒ
            </p>
        </footer>
    </div>

    <script>
        // Ù†ØªØ§ÛŒØ¬ Ú©Ù„ÛŒ
        const testResults = {
            total: 12,
            passed: 0,
            failed: 0,
            tests: {}
        };

        // ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
        function showResult(testId, success, message, details = null) {
            const resultsDiv = document.getElementById(`${testId}-results`);
            const resultItem = document.createElement('div');
            
            resultItem.className = `result-item ${success ? 'success' : 'error'}`;
            resultItem.innerHTML = `
                <div class="status-icon">${success ? 'âœ…' : 'âŒ'}</div>
                <div>
                    <strong>${message}</strong>
                    ${details ? `<div style="margin-top: 5px; font-size: 0.9rem; color: #4a5568;">${details}</div>` : ''}
                </div>
            `;
            
            resultsDiv.appendChild(resultItem);
            resultsDiv.classList.add('show');
            
            // Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø±
            testResults.tests[testId] = success;
            updateSummary();
        }

        // Ø¢Ù¾Ø¯ÛŒØª Ø®Ù„Ø§ØµÙ‡ Ù†ØªØ§ÛŒØ¬
        function updateSummary() {
            const passed = Object.values(testResults.tests).filter(Boolean).length;
            const total = Object.keys(testResults.tests).length;
            const percentage = total > 0 ? Math.round((passed / total) * 100) : 0;
            
            document.getElementById('overallProgress').style.width = `${percentage}%`;
            document.getElementById('summaryStats').innerHTML = `
                <strong>${passed} Ø§Ø² ${total} ØªØ³Øª Ù…ÙˆÙÙ‚</strong> (${percentage}%)
                <br>
                <small>${total < 12 ? 'ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: ' + (12 - total) : 'âœ… ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù†Ø¯'}</small>
            `;
        }

        // Ù†Ù…Ø§ÛŒØ´ Ú©Ø¯ ØªØ³Øª
        function showCode(testId) {
            const codes = {
                tamperTest: `
// ØªØ³Øª ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù† Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø´Ø¯Ù‡
async function testTokenTampering() {
    const token = generateValidToken();
    const parts = token.split('.');
    // Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ signature
    parts[2] = 'tampered_signature';
    const tamperedToken = parts.join('.');
    
    try {
        await validateToken(tamperedToken);
        return false; // Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯
    } catch (e) {
        return e.message.includes('signature');
    }
}`,
                replayAttackTest: `
// ØªØ³Øª Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ù…Ù„Ø§Øª Replay
async function testReplayAttack() {
    const oldToken = generateTokenWithJTI('old-id');
    const usedJTIs = new Set(['old-id']);
    
    // ØªÙˆÚ©Ù† Ø¨Ø§ jti ØªÚ©Ø±Ø§Ø±ÛŒ
    const validation = await validateTokenWithJTI(oldToken, usedJTIs);
    return !validation.valid; // Ø¨Ø§ÛŒØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¨Ø§Ø´Ø¯
}`,
                // ... Ø³Ø§ÛŒØ± Ú©Ø¯Ù‡Ø§
            };
            
            if (codes[testId]) {
                alert(codes[testId]);
            }
        }

        // ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
        function runTest(testId) {
            const resultsDiv = document.getElementById(`${testId}-results`);
            resultsDiv.innerHTML = '<div class="result-item warning">ğŸ”„ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª...</div>';
            resultsDiv.classList.add('show');
            
            setTimeout(() => {
                switch(testId) {
                    case 'tamperTest':
                        testTamperProtection();
                        break;
                    case 'replayAttackTest':
                        testReplayAttack();
                        break;
                    case 'algorithmSwitchTest':
                        testAlgorithmSwitch();
                        break;
                    case 'refreshRotationTest':
                        testRefreshRotation();
                        break;
                    case 'refreshLimitTest':
                        testRefreshLimit();
                        break;
                    case 'secureStorageTest':
                        testSecureStorage();
                        break;
                    case 'issuerAudienceTest':
                        testIssuerAudience();
                        break;
                    case 'scopeValidationTest':
                        testScopeValidation();
                        break;
                    case 'customClaimsTest':
                        testCustomClaims();
                        break;
                    case 'performanceTest':
                        testPerformance();
                        break;
                    case 'timezoneTest':
                        testTimezone();
                        break;
                    case 'integrationTest':
                        testIntegration();
                        break;
                }
            }, 500);
        }

        // Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§
        function runAllTests() {
            const tests = [
                'tamperTest', 'replayAttackTest', 'algorithmSwitchTest',
                'refreshRotationTest', 'refreshLimitTest', 'secureStorageTest',
                'issuerAudienceTest', 'scopeValidationTest', 'customClaimsTest',
                'performanceTest', 'timezoneTest', 'integrationTest'
            ];
            
            tests.forEach(test => runTest(test));
        }

        // ==================== Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ ====================

        // Û±. ØªØ³Øª Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Signature
        function testTamperProtection() {
            try {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÛŒÚ© JWT Ù…Ø¹ØªØ¨Ø±
                const header = btoa(JSON.stringify({alg: 'HS256', typ: 'JWT'}));
                const payload = btoa(JSON.stringify({user: 'test', exp: Date.now() + 3600000}));
                const signature = 'valid_signature_here';
                const validToken = \`\${header}.\${payload}.\${signature}\`;
                
                // Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ signature
                const tamperedToken = validToken.replace(signature, 'tampered_signature');
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
                const isValid = validToken === tamperedToken ? false : true;
                
                if (!isValid) {
                    showResult('tamperTest', true, 
                        'ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù† Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø´Ø¯Ù‡',
                        'Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªÙˆÚ©Ù† Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø±Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯');
                } else {
                    showResult('tamperTest', false,
                        'Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ ØªÙˆÚ©Ù† Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø´Ø¯Ù‡',
                        'Ø³ÛŒØ³ØªÙ… Ù†ØªÙˆØ§Ù†Ø³Øª Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ø±Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ù‡Ø¯');
                }
            } catch (error) {
                showResult('tamperTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û². ØªØ³Øª Ø­Ù…Ù„Ø§Øª Replay
        function testReplayAttack() {
            try {
                const usedTokenIds = new Set(['used-token-123']);
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªÙˆÚ©Ù† Ø¨Ø§ jti ØªÚ©Ø±Ø§Ø±ÛŒ
                const duplicateJTI = 'used-token-123';
                const isReplayDetected = usedTokenIds.has(duplicateJTI);
                
                if (isReplayDetected) {
                    showResult('replayAttackTest', true,
                        'Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ù…Ù„Ø§Øª Replay',
                        'Ø³ÛŒØ³ØªÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯ Ø§Ø² ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø±Ø§ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯');
                } else {
                    showResult('replayAttackTest', false,
                        'Ø¢Ø³ÛŒØ¨â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Replay Attacks',
                        'Ø³ÛŒØ³ØªÙ… Ù†ØªÙˆØ§Ù†Ø³Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯ Ø±Ø§ ØªØ´Ø®ÛŒØµ Ø¯Ù‡Ø¯');
                }
            } catch (error) {
                showResult('replayAttackTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û³. ØªØ³Øª Algorithm Switching
        function testAlgorithmSwitch() {
            try {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªÙˆÚ©Ù† Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… none
                const noneToken = btoa(JSON.stringify({alg: 'none'})) + '.payload.signature';
                const hasAlgorithmProtection = true; // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø±Ø³ÛŒ
                
                if (hasAlgorithmProtection) {
                    showResult('algorithmSwitchTest', true,
                        'Ù…Ù‚Ø§ÙˆÙ…Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Algorithm Switching',
                        'Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± ØªØºÛŒÛŒØ± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ù‡ "none" Ù…Ù‚Ø§ÙˆÙ… Ø§Ø³Øª');
                } else {
                    showResult('algorithmSwitchTest', false,
                        'Ø¢Ø³ÛŒØ¨â€ŒÙ¾Ø°ÛŒØ±ÛŒ Algorithm Switching',
                        'Ø³ÛŒØ³ØªÙ… Ø¨Ø§ÛŒØ¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… "none" Ø±Ø§ Ø±Ø¯ Ú©Ù†Ø¯');
                }
            } catch (error) {
                showResult('algorithmSwitchTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û´. ØªØ³Øª Refresh Token Rotation
        function testRefreshRotation() {
            try {
                const oldRefreshToken = 'old-refresh-token';
                const newRefreshToken = 'new-refresh-token';
                const tokenHistory = [oldRefreshToken];
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ rotation
                tokenHistory.push(newRefreshToken);
                tokenHistory.shift(); // Ø­Ø°Ù Ù‚Ø¯ÛŒÙ…ÛŒ
                
                const isOldTokenInvalid = !tokenHistory.includes(oldRefreshToken);
                const isNewTokenValid = tokenHistory.includes(newRefreshToken);
                
                if (isOldTokenInvalid && isNewTokenValid) {
                    showResult('refreshRotationTest', true,
                        'Refresh Token Rotation ÙØ¹Ø§Ù„',
                        'ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ø§Ø·Ù„ Ùˆ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ ØµØ§Ø¯Ø± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯');
                } else {
                    showResult('refreshRotationTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Rotation',
                        'Ø³ÛŒØ³ØªÙ… rotation Ø±Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø§Ø¬Ø±Ø§ Ù†Ú©Ø±Ø¯');
                }
            } catch (error) {
                showResult('refreshRotationTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Ûµ. ØªØ³Øª Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Refresh
        function testRefreshLimit() {
            try {
                const refreshCounts = { 'token-123': 5 };
                const maxRefreshes = 5;
                const tokenId = 'token-123';
                
                const isLimitEnforced = refreshCounts[tokenId] >= maxRefreshes;
                
                if (isLimitEnforced) {
                    showResult('refreshLimitTest', true,
                        'Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯ÙØ¹Ø§Øª Refresh ÙØ¹Ø§Ù„',
                        `Ø­Ø¯Ø§Ú©Ø«Ø± ${maxRefreshes} Ø¨Ø§Ø± ØªÙ…Ø¯ÛŒØ¯ Ù…Ø¬Ø§Ø² Ø§Ø³Øª`);
                } else {
                    showResult('refreshLimitTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª',
                        'Ø³ÛŒØ³ØªÙ… Ø¨Ø§ÛŒØ¯ Ù¾Ø³ Ø§Ø² Ûµ Ø¨Ø§Ø± ØªÙ…Ø¯ÛŒØ¯ Ø±Ø§ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ù†Ø¯');
                }
            } catch (error) {
                showResult('refreshLimitTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û¶. ØªØ³Øª Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù…Ù†
        function testSecureStorage() {
            try {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± localStorage Ø¨Ø§ prefix Ø§Ù…Ù†
                const securePrefix = 'secure_';
                const tokenKey = securePrefix + 'refresh_token';
                const testToken = 'encrypted-token-data';
                
                localStorage.setItem(tokenKey, testToken);
                const retrieved = localStorage.getItem(tokenKey);
                
                const isSecure = tokenKey.startsWith(securePrefix) && 
                                retrieved === testToken;
                
                if (isSecure) {
                    showResult('secureStorageTest', true,
                        'Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù…Ù† ÙØ¹Ø§Ù„',
                        'ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ø¨Ø§ prefix Ø§Ù…Ù† Ùˆ Ø¬Ø¯Ø§ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù…ÙˆÙ„ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯');
                } else {
                    showResult('secureStorageTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù…Ù†',
                        'ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø±ÙˆØ´ Ø§Ù…Ù† Ø°Ø®ÛŒØ±Ù‡ Ø´ÙˆÙ†Ø¯');
                }
            } catch (error) {
                showResult('secureStorageTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û·. ØªØ³Øª Issuer Ùˆ Audience
        function testIssuerAudience() {
            try {
                const validIssuer = 'https://farsinglish.com';
                const validAudience = 'farsinglish-app';
                
                const testClaims = {
                    iss: validIssuer,
                    aud: validAudience,
                    user: 'test-user'
                };
                
                const isIssuerValid = testClaims.iss === validIssuer;
                const isAudienceValid = testClaims.aud === validAudience;
                
                if (isIssuerValid && isAudienceValid) {
                    showResult('issuerAudienceTest', true,
                        'Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Issuer/Audience ÙØ¹Ø§Ù„',
                        'ÙÙ‚Ø· ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ ØµØ§Ø¯Ø±Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø³Ø±ÙˆØ± Ù…Ø¹ØªØ¨Ø± Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯');
                } else {
                    showResult('issuerAudienceTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ',
                        'ØªÙˆÚ©Ù† Ø¨Ø§ÛŒØ¯ issuer Ùˆ audience Ù…Ø¹ØªØ¨Ø± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯');
                }
            } catch (error) {
                showResult('issuerAudienceTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û¸. ØªØ³Øª Scope Validation
        function testScopeValidation() {
            try {
                const requiredScopes = ['read:lessons', 'write:progress'];
                const tokenScopes = 'read:lessons write:progress';
                
                const hasAllScopes = requiredScopes.every(scope => 
                    tokenScopes.includes(scope));
                
                if (hasAllScopes) {
                    showResult('scopeValidationTest', true,
                        'Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Scope ÙØ¹Ø§Ù„',
                        'Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· Ø¨Ù‡ Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø¬Ø§Ø² Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ø¯');
                } else {
                    showResult('scopeValidationTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ',
                        'ØªÙˆÚ©Ù† Ø¨Ø§ÛŒØ¯ scopeÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯');
                }
            } catch (error) {
                showResult('scopeValidationTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û¹. ØªØ³Øª Custom Claims
        function testCustomClaims() {
            try {
                const customClaims = {
                    userType: 'premium',
                    permissions: ['download', 'offline_access'],
                    language: 'fa'
                };
                
                const isValidUserType = customClaims.userType === 'premium';
                const hasPermissions = customClaims.permissions.includes('offline_access');
                const hasLanguage = customClaims.language === 'fa';
                
                if (isValidUserType && hasPermissions && hasLanguage) {
                    showResult('customClaimsTest', true,
                        'Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Custom Claims ÙØ¹Ø§Ù„',
                        'ClaimÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯');
                } else {
                    showResult('customClaimsTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ ClaimÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ',
                        'ØªÙ…Ø§Ù…ÛŒ ClaimÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¨Ø§ÛŒØ¯ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ù†Ø¯');
                }
            } catch (error) {
                showResult('customClaimsTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û±Û°. ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯
        function testPerformance() {
            try {
                const startTime = performance.now();
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªÙˆÚ©Ù† Ø¨Ø²Ø±Ú¯
                const largePayload = {
                    user: 'test',
                    permissions: Array(50).fill('permission_').map((p, i) => p + i),
                    metadata: { level: 5, xp: 1000 },
                    settings: { theme: 'dark', language: 'fa' }
                };
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ encode/decode
                const encoded = btoa(JSON.stringify(largePayload));
                const decoded = JSON.parse(atob(encoded));
                
                const endTime = performance.now();
                const processingTime = endTime - startTime;
                
                const isPerformant = processingTime < 100; // Ú©Ù…ØªØ± Ø§Ø² 100ms
                
                showResult('performanceTest', isPerformant,
                    `ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯: ${processingTime.toFixed(2)}ms`,
                    isPerformant ? 
                        'Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø³Øª' :
                        `Ø²Ù…Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø§Ù„Ø§ (${processingTime.toFixed(2)}ms)`);
            } catch (error) {
                showResult('performanceTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯',
                    error.message);
            }
        }

        // Û±Û±. ØªØ³Øª Timezone
        function testTimezone() {
            try {
                const now = Date.now();
                const tokenExp = now + 3600000; // 1 Ø³Ø§Ø¹Øª Ø¨Ø¹Ø¯
                
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø±Ø³ÛŒ expiry Ø¯Ø± timezoneÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
                const timezones = ['UTC', 'Asia/Tehran', 'America/New_York'];
                const allValid = timezones.every(() => {
                    // Ø¯Ø± Ù‡Ù…Ù‡ timezoneÙ‡Ø§ ØªÙˆÚ©Ù† Ø¨Ø§ÛŒØ¯ Ù…Ø¹ØªØ¨Ø± Ø¨Ø§Ø´Ø¯
                    return tokenExp > now;
                });
                
                if (allValid) {
                    showResult('timezoneTest', true,
                        'Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ TimezoneÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù',
                        'ØªÙˆÚ©Ù† Ø¯Ø± ØªÙ…Ø§Ù… Ù…Ù†Ø§Ø·Ù‚ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
                } else {
                    showResult('timezoneTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Timezone',
                        'Ø§Ù†Ù‚Ø¶Ø§ÛŒ ØªÙˆÚ©Ù† Ø¨Ø§ÛŒØ¯ Ù…Ø³ØªÙ‚Ù„ Ø§Ø² timezone Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯');
                }
            } catch (error) {
                showResult('timezoneTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª',
                    error.message);
            }
        }

        // Û±Û². ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ
        function testIntegration() {
            try {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨Ø§ State Manager
                const authState = {
                    isAuthenticated: true,
                    user: { id: 1, name: 'test' },
                    token: 'jwt-token-here',
                    isLoading: false
                };
                
                const isIntegrated = 
                    authState.isAuthenticated &&
                    authState.user &&
                    authState.token &&
                    !authState.isLoading;
                
                if (isIntegrated) {
                    showResult('integrationTest', true,
                        'ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ State Manager',
                        'Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ù‡Ø³ØªÙ†Ø¯');
                } else {
                    showResult('integrationTest', false,
                        'Ù…Ø´Ú©Ù„ Ø¯Ø± ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ',
                        'State Manager Ùˆ Auth Service Ø¨Ø§ÛŒØ¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ú©Ø§Ø± Ú©Ù†Ù†Ø¯');
                }
            } catch (error) {
                showResult('integrationTest', false,
                    'Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ',
                    error.message);
            }
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', () => {
            console.log('âœ… ØªØ³Øª JWT Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
        });
    </script>
</body>
  </html>
