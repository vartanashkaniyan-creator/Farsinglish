<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø¯Ø³ØªÛŒ - ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ (Login Screen Flow)</title>
    <style>
        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 20px auto;
            padding: 0 20px;
            background: #f5f7fb;
            color: #1e293b;
        }
        h1 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #0f172a;
            border-bottom: 2px solid #cbd5e1;
            padding-bottom: 12px;
        }
        .badge {
            background: #3b82f6;
            color: white;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: normal;
            margin-right: 10px;
        }
        .test-container {
            background: white;
            border-radius: 24px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 24px;
            border: 1px solid #e2e8f0;
        }
        .test-suite {
            margin-bottom: 32px;
        }
        .test-item {
            background: #f8fafc;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border-right: 4px solid #94a3b8;
        }
        .test-item.pass { border-right-color: #22c55e; background: #f0fdf4; }
        .test-item.fail { border-right-color: #ef4444; background: #fef2f2; }
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .test-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .test-status {
            font-size: 0.8rem;
            padding: 4px 12px;
            border-radius: 30px;
            background: #e2e8f0;
        }
        .test-status.pass { background: #22c55e; color: white; }
        .test-status.fail { background: #ef4444; color: white; }
        .test-log {
            background: #0f172a;
            color: #e2e8f0;
            padding: 12px;
            border-radius: 12px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            margin: 12px 0;
            white-space: pre-wrap;
            direction: ltr;
            text-align: left;
            max-height: 300px;
            overflow: auto;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 40px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: 0.2s;
            border: 1px solid #2563eb;
            margin-left: 8px;
            margin-bottom: 8px;
        }
        button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        button.secondary {
            background: #f1f5f9;
            color: #1e293b;
            border: 1px solid #cbd5e1;
        }
        button.secondary:hover {
            background: #e2e8f0;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 16px 0;
        }
        .output-panel {
            background: #1e293b;
            color: #a5f3fc;
            padding: 16px;
            border-radius: 16px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            direction: ltr;
            text-align: left;
            max-height: 200px;
            overflow: auto;
            margin-top: 16px;
        }
        hr {
            border: none;
            border-top: 2px dashed #cbd5e1;
            margin: 24px 0;
        }
        .note {
            background: #fff7ed;
            border-right: 4px solid #f97316;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <h1>
        ğŸ“± ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ (Login Screen)
        <span class="badge">ØªØ³Øª Ø¯Ø³ØªÛŒ Â· Û¶ Ø³Ù†Ø§Ø±ÛŒÙˆ</span>
    </h1>
    <div class="note">
        <strong>ğŸ§ª Ø§ØµÙˆÙ„ Ø±Ø¹Ø§ÛŒØª Ø´Ø¯Ù‡:</strong> Ù…Ø³ØªÙ‚Ù„ Ø§Ø² Ø§Ø¨Ø²Ø§Ø± Â· Ø±ÙØªØ§Ø±Ú¯Ø±Ø§ Â· Ù‚Ø·Ø¹ÛŒ Â· Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Â· Ø§ÛŒØ²ÙˆÙ„Ù‡ Â· ØªÚ©â€ŒØ§Ø¯Ø¹Ø§ Â· Ø®Ø·Ø§ÛŒ ÙˆØ§Ø¶Ø­ Â· Ø¨Ø¯ÙˆÙ† ØªØ³Øª UI Ø¬Ø²Ø¦ÛŒ Â· Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ (Fake Auth)
    </div>

    <!-- -------------------- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¹Ù„ÛŒ (Fake) -------------------- -->
    <div style="display: none;" id="fake-modules">
        <script>
            // ==================== Fake Auth Service ====================
            window.fakeAuth = {
                users: [
                    { username: 'ali', password: '123456', email: 'ali@test.com' },
                    { username: 'sara', password: 'pass', email: 'sara@test.com' }
                ],
                currentUser: null,
                login(username, password) {
                    return new Promise((resolve, reject) => {
                        setTimeout(() => {
                            const user = this.users.find(u => u.username === username && u.password === password);
                            if (user) {
                                this.currentUser = { ...user, password: undefined }; // remove password
                                resolve({ success: true, user: this.currentUser, token: 'fake-jwt-token' });
                            } else {
                                reject({ success: false, error: 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª' });
                            }
                        }, 300); // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªØ£Ø®ÛŒØ± Ø´Ø¨Ú©Ù‡
                    });
                },
                logout() {
                    this.currentUser = null;
                    return Promise.resolve({ success: true });
                },
                getCurrentUser() {
                    return this.currentUser ? { ...this.currentUser } : null;
                },
                isLoggedIn() {
                    return this.currentUser !== null;
                }
            };

            // ==================== Fake State Manager ====================
            window.fakeState = {
                state: { user: null, loading: false, error: null },
                listeners: [],
                setState(newState) {
                    this.state = { ...this.state, ...newState };
                    this.listeners.forEach(fn => fn(this.state));
                },
                getState() { return { ...this.state }; },
                subscribe(fn) { this.listeners.push(fn); },
                reset() {
                    this.state = { user: null, loading: false, error: null };
                }
            };

            // ==================== Fake Router ====================
            window.fakeRouter = {
                currentRoute: '/login',
                navigate(route) {
                    this.currentRoute = route;
                    console.log(`[Ù…Ø³ÛŒØ±ÛŒØ§Ø¨] Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡: ${route}`);
                }
            };

            // ==================== Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù„Ø§Ú¯ ====================
            window.logs = [];
            window.log = function(...args) {
                const message = args.map(arg => 
                    typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                ).join(' ');
                window.logs.push(message);
                console.log(...args);
                const el = document.getElementById('live-log');
                if (el) {
                    el.innerText = window.logs.join('\n');
                }
            };
            window.clearLog = function() {
                window.logs = [];
                document.getElementById('live-log').innerText = '';
            };
        </script>
    </div>

    <!-- -------------------- ØªØ³Øªâ€ŒÙ‡Ø§ -------------------- -->
    <div class="test-container">
        <h2 style="margin-top: 0;">ğŸ” Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ (Û¶ ØªØ³Øª Ù…Ø³ØªÙ‚Ù„)</h2>
        <div class="row">
            <button onclick="runAllTests()">â–¶ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§</button>
            <button class="secondary" onclick="resetAll()">ğŸ”„ Ø±ÛŒØ³Øª state</button>
            <button class="secondary" onclick="clearLog()">ğŸ§¹ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù„Ø§Ú¯</button>
        </div>

        <div id="test-list" class="test-suite">
            <!-- ØªØ³Øª 1: ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ -->
            <div id="test1" class="test-item">
                <div class="test-header">
                    <span class="test-title">âœ… Û±. ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ (Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø±ÙØªØ§Ø±)</span>
                    <span id="status1" class="test-status">Ø¢Ù…Ø§Ø¯Ù‡</span>
                </div>
                <p>Ù‡Ø¯Ù: Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø± Ù…Ø¹ØªØ¨Ø± (ali/123456) â†’ ÙˆØ¶Ø¹ÛŒØª logged-in Ùˆ ØªÙˆÚ©Ù† Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø¯.</p>
                <button onclick="runTest1()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Û±</button>
            </div>
            <!-- ØªØ³Øª 2: ÙˆØ±ÙˆØ¯ Ù†Ø§Ù…ÙˆÙÙ‚ (Ø±Ù…Ø² ØºÙ„Ø·) -->
            <div id="test2" class="test-item">
                <div class="test-header">
                    <span class="test-title">âŒ Û². ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡</span>
                    <span id="status2" class="test-status">Ø¢Ù…Ø§Ø¯Ù‡</span>
                </div>
                <p>Ù‡Ø¯Ù: Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø±ÛŒØ§ÙØª Ø´ÙˆØ¯ØŒ state Ø®Ø·Ø§ Ø«Ø¨Øª Ø´ÙˆØ¯.</p>
                <button onclick="runTest2()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Û²</button>
            </div>
            <!-- ØªØ³Øª 3: ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ -->
            <div id="test3" class="test-item">
                <div class="test-header">
                    <span class="test-title">ğŸ” Û³. Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯</span>
                    <span id="status3" class="test-status">Ø¢Ù…Ø§Ø¯Ù‡</span>
                </div>
                <p>Ù‡Ø¯Ù: Ø³Ø±ÙˆÛŒØ³ Ø®Ø·Ø§ÛŒ Â«Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯Â» Ø¨Ø¯Ù‡Ø¯.</p>
                <button onclick="runTest3()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Û³</button>
            </div>
            <!-- ØªØ³Øª 4: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø± Ø­ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (loading) -->
            <div id="test4" class="test-item">
                <div class="test-header">
                    <span class="test-title">â³ Û´. ÙˆØ¶Ø¹ÛŒØª loading</span>
                    <span id="status4" class="test-status">Ø¢Ù…Ø§Ø¯Ù‡</span>
                </div>
                <p>Ù‡Ø¯Ù: Ø¯Ø± Ø²Ù…Ø§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³ØªØŒ state.loading = true Ø´ÙˆØ¯.</p>
                <button onclick="runTest4()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Û´</button>
            </div>
            <!-- ØªØ³Øª 5: Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ØŒ state Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´ÙˆØ¯ -->
            <div id="test5" class="test-item">
                <div class="test-header">
                    <span class="test-title">ğŸ“¦ Ûµ. Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ state Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯</span>
                    <span id="status5" class="test-status">Ø¢Ù…Ø§Ø¯Ù‡</span>
                </div>
                <p>Ù‡Ø¯Ù: state.user Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ù¾Ø± Ø´ÙˆØ¯.</p>
                <button onclick="runTest5()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ûµ</button>
            </div>
            <!-- ØªØ³Øª 6: Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ -->
            <div id="test6" class="test-item">
                <div class="test-header">
                    <span class="test-title">ğŸ§­ Û¶. Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯</span>
                    <span id="status6" class="test-status">Ø¢Ù…Ø§Ø¯Ù‡</span>
                </div>
                <p>Ù‡Ø¯Ù: Ø¨Ø¹Ø¯ Ø§Ø² Ù„Ø§Ú¯ÛŒÙ† Ù…ÙˆÙÙ‚ØŒ Ø¨Ù‡ '/home' Ù‡Ø¯Ø§ÛŒØª Ø´ÙˆÛŒÙ….</p>
                <button onclick="runTest6()">Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Û¶</button>
            </div>
        </div>

        <hr>
        <div>
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                <span>ğŸ“‹ Ù„Ø§Ú¯ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§:</span>
                <span style="font-size: 0.7rem; color: #64748b;">(Ø®Ø±ÙˆØ¬ÛŒ Ú©Ù†Ø³ÙˆÙ„ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡)</span>
            </div>
            <div id="live-log" class="output-panel">
                Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯ØŒ ØªØ³ØªÛŒ Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.
            </div>
        </div>
    </div>

    <script>
        // ==================== Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² RTL Ùˆ Ø§Ø¨Ø²Ø§Ø± ====================
        window.onload = function() {
            resetAll();
        };

        function resetAll() {
            window.fakeAuth.logout();
            window.fakeState.reset();
            window.fakeRouter.currentRoute = '/login';
            window.clearLog();
            // Ø±ÛŒØ³Øª ÙˆØ¶Ø¹ÛŒØª Ù†Ù…Ø§ÛŒØ´ÛŒ
            document.querySelectorAll('.test-item').forEach(el => {
                el.classList.remove('pass', 'fail');
            });
            ['1','2','3','4','5','6'].forEach(i => {
                document.getElementById(`status${i}`).innerText = 'Ø¢Ù…Ø§Ø¯Ù‡';
                document.getElementById(`status${i}`).className = 'test-status';
            });
            log('ğŸ”„ Ø³ÛŒØ³ØªÙ… Ø±ÛŒØ³Øª Ø´Ø¯. state Ù¾Ø§Ú©ØŒ Ú©Ø§Ø±Ø¨Ø± Ø®Ø§Ø±Ø¬ Ø´Ø¯.');
        }

        // ==================== ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª ====================
        function updateTestStatus(testId, passed, message) {
            const statusEl = document.getElementById(`status${testId}`);
            const testItem = document.getElementById(`test${testId}`);
            if (passed) {
                statusEl.innerText = 'âœ… Ù‚Ø¨ÙˆÙ„';
                statusEl.className = 'test-status pass';
                testItem.classList.add('pass');
                testItem.classList.remove('fail');
            } else {
                statusEl.innerText = 'âŒ Ù…Ø±Ø¯ÙˆØ¯';
                statusEl.className = 'test-status fail';
                testItem.classList.add('fail');
                testItem.classList.remove('pass');
            }
            log(`ØªØ³Øª ${testId}: ${message}`);
        }

        // ==================== ØªØ³Øª 1: ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ ====================
        async function runTest1() {
            log('â–¶ï¸ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª 1: ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ Ø¨Ø§ ali/123456');
            try {
                const result = await window.fakeAuth.login('ali', '123456');
                if (result.success && result.token === 'fake-jwt-token' && result.user.username === 'ali') {
                    updateTestStatus('1', true, 'ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ØŒ ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯.');
                } else {
                    updateTestStatus('1', false, 'Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø§Ø³Ø® Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª.');
                }
            } catch (e) {
                updateTestStatus('1', false, `Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${e.error || e}`);
            }
        }

        // ==================== ØªØ³Øª 2: Ø±Ù…Ø² ØºÙ„Ø· ====================
        async function runTest2() {
            log('â–¶ï¸ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª 2: ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø±Ù…Ø² ØºÙ„Ø· (ali/wrong)');
            try {
                await window.fakeAuth.login('ali', 'wrong');
                updateTestStatus('2', false, 'Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯ Ø§Ù…Ø§ Ù…ÙˆÙÙ‚ Ø´Ø¯!');
            } catch (e) {
                if (e.error && e.error.includes('Ø§Ø´ØªØ¨Ø§Ù‡')) {
                    updateTestStatus('2', true, 'Ø®Ø·Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯.');
                } else {
                    updateTestStatus('2', false, `Ø®Ø·Ø§: ${JSON.stringify(e)}`);
                }
            }
        }

        // ==================== ØªØ³Øª 3: Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ ====================
        async function runTest3() {
            log('â–¶ï¸ Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª 3: Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ (nosuer)');
            try {
                await window.fakeAuth.login('nosuer', 'pass');
                updateTestStatus('3', false, 'Ø¨Ø§ÛŒØ¯ Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ø§Ø¯.');
            } catch (e) {
                if (e.error) {
                    updateTestStatus('3', true, `Ø®Ø·Ø§: ${e.error}`);
                } else {
                    updateTestStatus('3', false, 'Ø®Ø·Ø§ÛŒ Ù†Ø§Ù…Ù†Ø§Ø³Ø¨');
                }
            }
        }

        // ==================== ØªØ³Øª 4: ÙˆØ¶Ø¹ÛŒØª loading ====================
        async function runTest4() {
            log('â–¶ï¸ ØªØ³Øª 4: Ø¨Ø±Ø±Ø³ÛŒ state.loading');
            window.fakeState.setState({ loading: true });
            if (window.fakeState.getState().loading === true) {
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§ÛŒØ§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª
                window.fakeState.setState({ loading: false });
                updateTestStatus('4', true, 'loading Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ true/false Ø´Ø¯.');
            } else {
                updateTestStatus('4', false, 'loading Ø³Øª Ù†Ø´Ø¯.');
            }
        }

        // ==================== ØªØ³Øª 5: Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ state Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯ ====================
        async function runTest5() {
            log('â–¶ï¸ ØªØ³Øª 5: state.user Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯');
            try {
                const result = await window.fakeAuth.login('sara', 'pass');
                window.fakeState.setState({ user: result.user });
                const user = window.fakeState.getState().user;
                if (user && user.username === 'sara') {
                    updateTestStatus('5', true, 'state.user Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯.');
                } else {
                    updateTestStatus('5', false, 'state.user Ø®Ø§Ù„ÛŒ ÛŒØ§ Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª.');
                }
            } catch (e) {
                updateTestStatus('5', false, `Ø®Ø·Ø§: ${e.error}`);
            }
        }

        // ==================== ØªØ³Øª 6: Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù¾Ø³ Ø§Ø² ÙˆØ±ÙˆØ¯ ====================
        async function runTest6() {
            log('â–¶ï¸ ØªØ³Øª 6: Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ');
            try {
                await window.fakeAuth.login('ali', '123456');
                window.fakeRouter.navigate('/home');
                if (window.fakeRouter.currentRoute === '/home') {
                    updateTestStatus('6', true, 'Ù†Ø§ÙˆØ¨Ø±ÛŒ Ø¨Ù‡ /home Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.');
                } else {
                    updateTestStatus('6', false, `Ù…Ø³ÛŒØ± ÙØ¹Ù„ÛŒ: ${window.fakeRouter.currentRoute}`);
                }
            } catch (e) {
                updateTestStatus('6', false, `Ø®Ø·Ø§: ${e.error}`);
            }
        }

        // ==================== Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ====================
        async function runAllTests() {
            log('ğŸš€ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§...');
            resetAll();
            await runTest1();
            await runTest2();
            await runTest3();
            await runTest4();
            await runTest5();
            await runTest6();
            log('âœ… Ù…Ø¬Ù…ÙˆØ¹Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§ Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª.');
        }

        // Ù„Ø§Ú¯ Ø¯Ø± ØµÙØ­Ù‡
        function log(message) {
            window.logs.push(`[${new Date().toLocaleTimeString('fa-IR')}] ${message}`);
            document.getElementById('live-log').innerText = window.logs.join('\n');
            console.log(message);
        }
    </script>
    <div style="text-align: center; margin: 24px 0; color: #64748b; font-size: 0.8rem;">
        Farsinglish Â· ØªØ³Øª Ø¯Ø³ØªÛŒ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Â· Ø±Ø¹Ø§ÛŒØª Ø§ØµÙˆÙ„ Tool-Agnostic Â· Ù…ÙˆØ¨Ø§ÛŒÙ„-ÙØ±Ø³Øª
    </div>
</body>
</html>
